import{a as c,j as e}from"./emotion-react-jsx-runtime.browser.esm-CDSRZb9c.js";import{r as n}from"./chunk-EPOLDU6W-B8pbzjzn.js";import{F as l,n as S}from"./FlexWrapper-B3ayG6XS.js";import{u as G,t as I}from"./index-CjmaIs_R.js";import{B as y}from"./media-D8HfPojw.js";import{T as $,G as j}from"./TextInputArea-Cqpc5ClC.js";import{T as d}from"./Typography-BI6YlVsB.js";import{u as x}from"./useIsDevice-B4XmIr43.js";import{u as q}from"./useUserStore-BXC7wunu.js";import{W as C}from"./Widget-D_zg5vut.js";import{u as N}from"./useTranslation-DcygOF4d.js";import{T as W}from"./Trans-BHipX7aS.js";import"./env-DlHMDNNS.js";const F=S(l)`
    height: 173px;
    border-radius: 4px;
    background-color: ${({theme:u})=>u.colors.Background.Block.default};
`,L=S.div`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: 12px;
    row-gap: 8px;
    align-items: end;
`;function X(){const{user:u,status:T}=q(),m=G(),{query:t}=x("GET","/users/writable-review",{enabled:T==="success"}),{requestFunction:R}=x("POST","/reviews",{onSuccess:v}),[s,h]=n.useState(""),[a,g]=n.useState(0),[i,f]=n.useState(0),[o,w]=n.useState(0),{t:r}=N();function v(){t.refetch(),h(""),g(0),f(0),w(0)}function b(){t.data&&(R({lectureId:t.data.lectureId,content:s,grade:a,load:i,speech:o}),I("Submit Review",{lectureId:t.data.lectureId,courseName:t.data.name,grade:a,load:i,speech:o,source:"Home"}),m.invalidateQueries({queryKey:["/users/written-reviews"]}),m.invalidateQueries({queryKey:[`/users/${u?.id}/lectures`]}))}return t.data?c(C,{direction:"column",gap:20,padding:"23px 30px",align:"stretch",children:[e(d,{type:"BiggerBold",color:"Text.default",children:e(W,{i18nKey:"main.reviewSection.title",values:{lectureName:t.data?.name}})}),e(F,{direction:"column",align:"stretch",justify:"stretch",gap:0,children:e($,{placeholder:r("main.reviewSection.placeholder"),type:"text",readOnly:!1,value:s,handleChange:h,area:!0})}),c(l,{direction:"column",gap:20,align:"stretch",children:[e(L,{children:[[r("common.grade"),a,g],[r("common.load"),i,f],[r("common.speech"),o,w]].map(([p,B,k])=>c(n.Fragment,{children:[e(d,{type:"Normal",color:"Text.light",children:p}),e(l,{direction:"row",align:"center",gap:10,children:e(j,{score:B,setScore:k})},p)]},p))}),c(l,{direction:"row",justify:"flex-end",gap:12,children:[e(y,{type:"default",$paddingLeft:8,$paddingTop:8,onClick:v,children:e(d,{type:"Normal",children:r("main.reviewSection.writeAnother")})}),e(y,{type:s&&a&&o&&i?"default":"disabled",$paddingLeft:8,$paddingTop:8,onClick:b,children:e(d,{type:"Normal",color:s&&a&&o&&i?"Highlight.default":"Text.disable",children:r("common.upload")})})]})]})]}):null}export{X as default};
//# sourceMappingURL=index-BkwrM04M.js.map

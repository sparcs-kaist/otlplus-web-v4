{"version":3,"mappings":"yqDAEaA,EAAiBC,EAAU,oBAExC,IAAIC,EAAgB,GAChBC,EAAqE,KAEzE,MAAMC,EAAc,SACZ,OAAO,OAAW,IAAoB,MACrCD,IAEDA,GADe,MAAAE,EAAA,IAAM,OAAO,+BAAkB,OACpB,SAEvBF,GAGEG,EAAe,SAAY,CAEpC,GADI,OAAO,OAAW,KAClB,CAACN,GAAkBE,EAAe,OAEtC,MAAMK,EAAW,MAAMH,EAAA,EAClBG,IAELA,EAAS,KAAKP,EAAgB,CAC1B,MAAO,GACP,eAAgB,GAChB,YAAa,eACb,YAAa,GACb,wBAAyB,IAC5B,EACDE,EAAgB,GACpB,EAEaM,EAAe,MAAOC,GAM7B,CAEF,GADI,OAAO,OAAW,KAClB,CAACT,GAAkB,CAACE,EAAe,OAEvC,MAAMK,EAAW,MAAMH,EAAA,EAClBG,IAELA,EAAS,SAASE,EAAK,GAAG,UAAU,EACpCF,EAAS,OAAO,IAAI,CAChB,OAAQE,EAAK,MACb,MAAOA,EAAK,KACZ,eAAgBA,EAAK,cACrB,OAAQA,EAAK,OAChB,EACL,EAEaC,EAAY,SAAY,CAEjC,GADI,OAAO,OAAW,KAClB,CAACV,GAAkB,CAACE,EAAe,OAEvC,MAAMK,EAAW,MAAMH,EAAA,EAClBG,GAELA,EAAS,OACb,EAEaI,EAAa,MACtBC,EACAC,IACC,CAED,GADI,OAAO,OAAW,KAClB,CAACb,GAAkB,CAACE,EAAe,OAEvC,MAAMK,EAAW,MAAMH,EAAA,EAClBG,GAELA,EAAS,MAAMK,EAAWC,CAAU,CACxC","names":["MIXPANEL_TOKEN","clientEnv","isInitialized","mixpanelInstance","getMixpanel","__vitePreload","initMixpanel","mixpanel","identifyUser","user","resetUser","trackEvent","eventName","properties"],"ignoreList":[],"sources":["../../../app/libs/mixpanel/index.ts"],"sourcesContent":["import { clientEnv } from \"@/env\"\n\nexport const MIXPANEL_TOKEN = clientEnv.VITE_MIXPANEL_TOKEN\n\nlet isInitialized = false\nlet mixpanelInstance: typeof import(\"mixpanel-browser\").default | null = null\n\nconst getMixpanel = async () => {\n    if (typeof window === \"undefined\") return null\n    if (!mixpanelInstance) {\n        const module = await import(\"mixpanel-browser\")\n        mixpanelInstance = module.default\n    }\n    return mixpanelInstance\n}\n\nexport const initMixpanel = async () => {\n    if (typeof window === \"undefined\") return\n    if (!MIXPANEL_TOKEN || isInitialized) return\n\n    const mixpanel = await getMixpanel()\n    if (!mixpanel) return\n\n    mixpanel.init(MIXPANEL_TOKEN, {\n        debug: process.env.NODE_ENV === \"development\",\n        track_pageview: true,\n        persistence: \"localStorage\",\n        autocapture: true,\n        record_sessions_percent: 100,\n    })\n    isInitialized = true\n}\n\nexport const identifyUser = async (user: {\n    id: number\n    email: string\n    name?: string\n    studentNumber?: number\n    degree?: string\n}) => {\n    if (typeof window === \"undefined\") return\n    if (!MIXPANEL_TOKEN || !isInitialized) return\n\n    const mixpanel = await getMixpanel()\n    if (!mixpanel) return\n\n    mixpanel.identify(user.id.toString())\n    mixpanel.people.set({\n        $email: user.email,\n        $name: user.name,\n        student_number: user.studentNumber,\n        degree: user.degree,\n    })\n}\n\nexport const resetUser = async () => {\n    if (typeof window === \"undefined\") return\n    if (!MIXPANEL_TOKEN || !isInitialized) return\n\n    const mixpanel = await getMixpanel()\n    if (!mixpanel) return\n\n    mixpanel.reset()\n}\n\nexport const trackEvent = async (\n    eventName: string,\n    properties?: Record<string, unknown>,\n) => {\n    if (typeof window === \"undefined\") return\n    if (!MIXPANEL_TOKEN || !isInitialized) return\n\n    const mixpanel = await getMixpanel()\n    if (!mixpanel) return\n\n    mixpanel.track(eventName, properties)\n}\n"],"file":"index-_rQV4Sop.js"}
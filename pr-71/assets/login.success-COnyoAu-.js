import{w as g,y as p,r as m}from"./chunk-UIGDSWPH-ClhI_Z4l.js";import{u as h,b as n}from"./index-t5Qym2Yj.js";import{c as d}from"./queryPersister-Dnan5egx.js";import{u as w}from"./useTranslation-DrmvPmDd.js";import"./env-BuPg3K8v.js";const S=g(function(){const a=p(),s=h(),{i18n:o}=w(),r=m.useRef(!0);return m.useEffect(()=>(r.current=!0,(async()=>{const f=window.location.hash.substring(1),c=new URLSearchParams(f),i=c.get("accessToken"),u=c.get("refreshToken"),l=o.resolvedLanguage||"ko";if(i&&u){if(navigator.userAgent.includes("otl-app")){window.location.href=`org.sparcs.otl://login?accessToken=${i}&refreshToken=${u}`;return}await d(),s.removeQueries({queryKey:["/users/info"]}),s.removeQueries({queryKey:["/timetables"]}),await s.prefetchQuery({queryKey:["/users/info",null,l],queryFn:async()=>{const{data:e}=await n.get("/api/v2/users/info");return e}});try{const{data:e}=await n.get("/api/v2/semesters");if(e?.semesters?.length>0){const t=e.semesters[e.semesters.length-1];t&&await s.prefetchQuery({queryKey:["/timetables/my-timetable",{year:t.year,semester:t.semester},l],queryFn:async()=>{const{data:y}=await n.get("/api/v2/timetables/my-timetable",{params:{year:t.year,semester:t.semester}});return y}})}}catch(e){console.error("Failed to prefetch timetable:",e)}r.current&&a("/",{replace:!0})}else r.current&&a("/",{replace:!0})})(),()=>{r.current=!1}),[a,s,o.resolvedLanguage]),null});export{S as default};
//# sourceMappingURL=login.success-COnyoAu-.js.map

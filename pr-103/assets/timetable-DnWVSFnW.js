import{p as rt,R as se,r as l,L as gi,w as mi}from"./chunk-EPOLDU6W-DHqJ36X5.js";import{a as w,j as c,F as tt,u as We}from"./emotion-react-jsx-runtime.browser.esm-CHRlxEmW.js";import{n as T,F as L}from"./FlexWrapper-DN6X0kFV.js";import{C as sn,S as vi}from"./proxy-DMCPuogg.js";import{u as bn,t as Oe}from"./index-C2LeEscB.js";import{M as bi}from"./Modal-BiRQQ1nc.js";import{S as pt}from"./StyledDivider-Cv8pBowD.js";import{e as it,t as Ze,g as je,u as ue,I as re,k as ln,q as Ve,W as Re,w as yi}from"./useIsDevice-cU7PV1GL.js";import{T as z}from"./Typography-Dcdi3KtC.js";import{c as wi,r as xi,a as Ei,b as Ti,d as bt}from"./renderTargetArea-SCqELSdt.js";import{u as Ie}from"./useTranslation-BKC8VvFf.js";import{A as yn,S as Si,c as Ci,C as Vt}from"./checkEmpty-CR111bgZ.js";import{R as Di,F as wn,p as Ri}from"./ReviewBlock-DIINwsGe.js";import{B as Gt,m as W}from"./media-ZJ5Z6TkX.js";import{u as Sr,b as Cr,C as Ai,S as Ii}from"./Credits-C0Ou5K_g.js";import{u as Et}from"./useUserStore-BFtmcw-P.js";import{L as cn}from"./LoadingCircle-B60p3jAa.js";import{a as ft}from"./index-DPSlpSLD.js";import{I as nt}from"./IconButton-D2syasdZ.js";import"./env-Dd5bVebZ.js";import"./infiniteQueryBehavior-DakfFEoe.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"f01aa4f6c8c6bcbf757497f9da443abfac01c7c9"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="392f1130-5363-470a-b78f-9c637fca14a9",e._sentryDebugIdIdentifier="sentry-dbid-392f1130-5363-470a-b78f-9c637fca14a9")})()}catch{}const Ni=it(rt.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"})),xn=it(rt.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),Dr=it(rt.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"})),Mi=it(rt.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),Li=it(rt.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),ki=it(rt.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),Oi=(e,t,n,r,i,o)=>{const s=[0];let a=0;for(let d=0;d<e;d++)t.includes(d+o)?(a+=n+i,s.push(a)):(a+=r+i,s.push(a));return s},jn=(e,t,n,r,i,o,s)=>{const a=Oi(t,n,r,i,o,s);for(let d=0;d<t+1;d++){const f=a[d];if(f!==void 0&&f>e)return d-1}return t},Bi=T.div`
    display: flex;
    flex-direction: row;
    gap: 5px;
    align-items: center;
    height: fit-content;
`,zi=T.div`
    padding-top: 15px;
    display: flex;
    flex-grow: 1;
    flex-direction: column;
    height: 100%;
    justify-content: space-evenly;
    gap: calc(var(--cell-height) * 2 - 11px);
    font-size: 8px;
    line-height: 11px;
`,Pi=T.div`
    width: var(--cell-width);
    align-items: center;
    font-size: 12px;
    line-height: 15px;
    padding-bottom: 5px;
    text-align: center;
`,Ui=T.div`
    display: inline-block;
    position: relative;
    user-select: none;
    touch-action: none;
`,Fi=({cellWidth:e=120,fullHeight:t=800.5,lectureSummary:n,setTimeFilter:r,hover:i,setHover:o,selected:s,setSelected:a,removeFunction:d})=>{const{t:f}=Ie(),u=5,h=5,m=8,p=l.useRef(null),A=[f("common.days.monday"),f("common.days.tuesday"),f("common.days.wednesday"),f("common.days.thursday"),f("common.days.friday")];wi(n);const g=32,y=24,E=l.useMemo(()=>t/32,[t]),x=l.useMemo(()=>({"--cell-height":`${E}px`,"--cell-width":`${e}px`,"--col-padding":`${u}px`}),[E,e,u]),[D,C]=l.useState(!1),[N,R]=l.useState(null),[M,b]=l.useState(null),[S,k]=l.useState(null),[O,F]=l.useState(new Map(Array.from({length:h},(B,U)=>[U,Array(g).fill(null)]))),Q=l.useRef(null),X=l.useRef(null),K=l.useRef(null);Q.current=N,X.current=M,K.current=S;const Se=l.useCallback(B=>{if(p.current&&i==null&&s==null){const U=p.current.getBoundingClientRect(),Y=B.clientX-U.left,v=B.clientY-U.top,I=Math.floor(v/E),P=jn(Y,h,[],0,e,u,0);I>=0&&I<g&&P>=0&&P<h&&(C(!0),R(I),b(I),k(P),a(null))}},[i,s,E,g,h,e,u,a]),J=l.useCallback(B=>{if(D&&p.current){const U=p.current.getBoundingClientRect(),Y=B.clientY-U.top,v=Math.floor(Y/E);v>=0&&v<g&&S!=null&&S>=0&&S<h&&v!==M&&b(v)}},[D,E,g,h,S,M]),ee=l.useCallback(()=>{F(new Map(Array.from({length:h},(v,I)=>[I,Array(g).fill(null)])));const B=Q.current,U=X.current,Y=K.current;if(B!=null&&U!=null&&Y!=null){const v=Math.min(B,U),I=Math.max(B,U),P={day:Y,begin:v*30+480,end:(I+1)*30+480};r(P)}R(null),b(null),C(!1)},[h,g,r]),H=l.useCallback(B=>{if(p.current&&i==null&&s==null){const U=B.touches[0];if(!U)return;const Y=p.current.getBoundingClientRect(),v=U.clientX-Y.left,I=U.clientY-Y.top,P=Math.floor(I/E),G=jn(v,h,[],0,e,u,0);P>=0&&P<g&&G>=0&&G<h&&(C(!0),R(P),b(P),k(G),a(null))}},[i,s,E,g,h,e,u,a]),te=l.useCallback(B=>{if(D&&p.current){const U=B.touches[0];if(!U)return;const Y=p.current.getBoundingClientRect(),v=U.clientY-Y.top,I=Math.floor(v/E);I>=0&&I<g&&S!=null&&S>=0&&S<h&&I!==M&&b(I)}},[D,E,g,h,S,M]),ce=l.useCallback(()=>{ee()},[ee]);l.useEffect(()=>(D&&window.addEventListener("mouseup",ee),()=>{window.removeEventListener("mouseup",ee)}),[D,ee]);const q=(B,U,Y)=>{const v=new Map(Array.from({length:h},(I,P)=>[P,Array(g).fill(null)]));for(let I=B;I<U+1;I++)v.get(Y)[I]=!0;return v};l.useLayoutEffect(()=>{if(p.current&&D){const B=Math.min(N,M),U=Math.max(N,M),Y=q(B,U,S);F(Y)}},[M,N,D,S,h,g]);const V=l.useMemo(()=>xi(g,h,e,E,u,[],10,0),[g,h,e,E,u]),ie=l.useMemo(()=>Ei(n,e,E,u,s,a,i,o,D,d),[n,e,E,u,s,a,i,o,D,d]),xe=l.useCallback(()=>{a(null)},[a]),oe=l.useCallback(B=>{B.stopPropagation(),ee()},[ee]);return w(Bi,{style:x,children:[c(zi,{children:Array.from({length:y-m+1},(B,U)=>U+m).map(B=>c(z,{color:"Text.default",children:B%12||12},B))}),w(L,{direction:"column",gap:0,children:[c(L,{direction:"row",gap:5,children:A.map((B,U)=>B!=="none"&&c(Pi,{style:B===""?{width:"10px"}:void 0,children:c(z,{color:"Text.default",children:B})},U))}),w(Ui,{ref:p,onClick:xe,onMouseDown:Se,onMouseMove:J,onMouseUp:oe,onTouchStart:H,onTouchMove:te,onTouchEnd:ce,children:[V,Ti(!0,O,"rgba(229, 76, 101, 0.5)",E,e,2,u,[],0,0),ie]})]})]})},Wn=se.memo(Fi);function Rr(e){return e.map(t=>t.name).join(", ")}function $i(e){return e.slice().sort((n,r)=>{const i=n.day,o=r.day;return i!==o?i-o:n.begin-r.begin}).map(n=>n.str).join(" / ")}function ji(e){const t={};return e.forEach(n=>{const r=n.buildingCode,i=n.roomName;r in t?t[r]&&!t[r].includes(i)&&(t[r]=t[r].concat(`, ${i}`)):t[r]=i}),Object.entries(t).map(([n,r])=>`(${n}) ${r}`).join(" / ")}const Wi=T(L)`
    width: 100%;
`,Hi=T(L)`
    width: 300px;
    padding: 10px;
`,qi=T(L)`
    flex: 1 0 0;
`,Ge=T(z)`
    white-space: nowrap;
`,Yi=({selectedLecture:e})=>{const{t}=Ie();return w(tt,{children:[w(Wi,{direction:"column",gap:8,children:[w(L,{direction:"row",gap:6,children:[c(Ge,{type:"NormalBold",color:"Text.default",children:t("common.search.type")}),c(z,{type:"Normal",color:"Text.default",children:e?.type})]}),w(L,{direction:"row",gap:6,children:[c(Ge,{type:"NormalBold",color:"Text.default",children:t("common.search.department")}),c(z,{type:"Normal",color:"Text.default",children:e?.department.name})]}),w(L,{direction:"row",gap:6,children:[c(Ge,{type:"NormalBold",color:"Text.default",children:t("common.professor")}),c(z,{type:"Normal",color:"Text.default",children:Rr(e?.professors||[])})]}),w(L,{direction:"row",gap:6,children:[c(Ge,{type:"NormalBold",color:"Text.default",children:t("common.room")}),c(z,{type:"Normal",color:"Text.default",children:ji(e?.classes||[])})]}),w(L,{direction:"row",gap:6,children:[c(Ge,{type:"NormalBold",color:"Text.default",children:t("common.limit")}),c(z,{type:"Normal",color:"Text.default",children:e?.limitPeople})]}),w(L,{direction:"row",gap:6,children:[c(Ge,{type:"NormalBold",color:"Text.default",children:t("common.exam")}),c(z,{type:"Normal",color:"Text.default",children:$i(e?.examTimes||[])})]})]}),c(Hi,{direction:"row",gap:0,justify:"space-around",align:"center",children:[[e?.classDuration,t("common.numClasses")],[e?.expDuration,t("common.numLabs")],e?.creditAU?[e?.creditAU,"AU"]:[e?.credit,t("common.credit")]].map(([n,r],i)=>w(qi,{direction:"column",gap:0,align:"center",children:[c(z,{type:"Bigger",color:"Text.default",children:n}),c(z,{type:"Smaller",color:"Text.default",children:r})]},i))})]})},Vi=T(L)`
    width: 300px;
    padding: 10px;
`,Gi=T(L)`
    flex: 1 0 0;
`,Xi=T.div`
    width: 100%;
    min-height: 1px;
    background-color: ${({theme:e})=>e.colors.Line.divider};
`,Ki=({selectedCourseId:e,selectedProfessorId:t})=>{const{t:n}=Ie(),[r,i]=l.useState(!1),{query:o,setParams:s,data:a}=Sr("GET","/reviews",{gcTime:0,infinites:["reviews"],limit:20}),{ref:d,inView:f}=Cr({threshold:0});return l.useEffect(()=>{i(!1);const u=setTimeout(()=>{s({mode:"default",courseId:e??void 0,professorId:t??void 0}),i(!0)},1e3);return()=>clearTimeout(u)},[e,t]),l.useEffect(()=>{f&&o.hasNextPage&&!o.isFetchingNextPage&&o.fetchNextPage()},[f,o]),!a||!r?c(cn,{}):w(tt,{children:[c(L,{direction:"row",gap:0,justify:"center",align:"center",style:{width:"100%"},children:c(Vi,{direction:"row",gap:0,justify:"space-between",align:"center",children:[[Ze(a?.averageGrade,a?.reviews.length),n("common.grade")],[Ze(a?.averageLoad,a?.reviews.length),n("common.load")],[Ze(a?.averageSpeech,a?.reviews.length),n("common.speech")]].map(([u,h],m)=>w(Gi,{direction:"column",gap:0,align:"center",children:[c(z,{type:"Bigger",color:"Text.default",children:u}),c(z,{type:"Smaller",color:"Text.default",children:h})]},m))})}),c(Xi,{}),a?.reviews.map(u=>c(Di,{review:u,linkToDictionary:!0},u.id)),o.hasNextPage&&c(cn,{ref:d})]})},Qi=T(L)`
    width: 100%;
    height: 100%;
    overflow-x: hidden;
    overflow-y: auto;

    scrollbar-width: none;
    &::-webkit-scrollbar {
        display: none;
    }
`,Hn=T(L)`
    width: 100%;
`,Ji=T(L)`
    width: 100%;
    position: sticky;
    top: 0;
    background-color: ${({theme:e})=>e.colors.Background.Section.default};
    z-index: 10;
    padding-bottom: 10px;
`,_i=T(L)`
    position: sticky;
    bottom: 0;
    width: 100%;
    padding: 12px 0;
    background-color: ${({theme:e})=>e.colors.Background.Section.default};
`,Zi=T(gi)`
    text-decoration: none;
`,eo=T.a`
    text-decoration: none;
`,qn=({setNonLoginTimetable:e,handleRemoveFromTimetable:t,selectedLecture:n,onMobileModalClose:r,year:i,semester:o,currentTimetableId:s,timetableLectures:a})=>{const d=bn(),f=We(),{t:u}=Ie(),{user:h,status:m}=Et(),p=je("tablet"),{requestFunction:A}=ue("PATCH",`/timetables/${s}`,{onSuccess:()=>{d.invalidateQueries({queryKey:[`/timetables/${s}`]})}}),[g,y]=l.useState([]),{query:E,setParams:x}=ue("GET",`/users/${h?.id}/wishlist`,{enabled:m==="success"&&i!=-1});l.useEffect(()=>{i!==-1&&x({year:i,semester:o})},[i,o,s]),l.useEffect(()=>{E.data&&y(E.data.courses.flatMap(b=>b.lectures).map(b=>b.id))},[E.data]);const{requestFunction:D}=ue("PATCH",`/users/${h?.id}/wishlist`,{onSuccess:()=>{d.invalidateQueries({queryKey:[`/users/${h?.id}/wishlist`]})}}),C=l.useRef(null),N=b=>{const S={syy:String(i),smtDivCd:String(o),subjtCd:b.code,syllabusOpenYn:"0"};return`https://erp.kaist.ac.kr/com/lgin/SsoCtr/initExtPageWork.do?link=estblSubjt&params=${btoa(JSON.stringify(S))}`},R=async b=>{if(a){if(m!=="success"&&e!==void 0){if(a.some(S=>bt(S.classes,b.classes))){alert(u("timetable.addLectureConflict"));return}e(S=>[...S,b]),Oe("Add Lecture to Timetable",{lectureId:b.id,lectureCode:b.code,courseName:b.name,timetableId:null,isGuest:!0,source:"LectureDetail"});return}if(s){if(a.some(S=>bt(S.classes,b.classes))){alert(u("timetable.addLectureConflict"));return}}else{console.warn("No timetable selected");return}A({action:"add",lectureId:b.id}),Oe("Add Lecture to Timetable",{lectureId:b.id,lectureCode:b.code,courseName:b.name,timetableId:s,source:"LectureDetail"})}},M=async(b,S)=>{if(m==="idle")return;const k=b?"delete":"add";Oe("Update Wishlist",{action:k,lectureId:S,source:"LectureDetail"}),D({lectureId:S,mode:k})};return c(Qi,{direction:"column",gap:12,align:"center",justify:n?"start":"center",children:n?w(tt,{children:[w(Ji,{direction:"column",gap:2,align:"center",justify:"center",children:[w(L,{direction:"row",align:"center",gap:8,justify:p?"space-between":"center",style:{width:"100%"},children:[p&&c("div",{style:{width:20}}),c(z,{type:"Bigger",color:"Text.default",children:n.name+n.subtitle}),p&&c(re,{size:20,onClick:r,color:f.colors.Text.default,children:c(sn,{})})]}),c(z,{type:"Big",color:"Text.default",children:n.code})]}),w(L,{direction:"row",gap:8,justify:"flex-end",style:{width:"100%"},children:[c(Zi,{to:`/dictionary?courseId=${n.courseId}`,children:c(z,{type:"Normal",color:"Highlight.default",style:{cursor:"pointer"},children:u("header.dictionary")})}),c(eo,{href:N(n),target:"_blank",children:c(z,{type:"Normal",color:"Highlight.default",style:{cursor:"pointer"},children:u("header.syllabus")})})]}),c(Hn,{direction:"column",gap:10,align:"center",children:c(Yi,{selectedLecture:n})}),c(Hn,{ref:C,direction:"column",gap:10,children:c(Ki,{selectedCourseId:n.courseId,selectedProfessorId:n.professors[0]?.id??-1})}),p&&w(_i,{direction:"row",gap:12,justify:"flex-end",children:[m==="success"&&!g.includes(n.id)&&w(Gt,{onClick:()=>{M(g.includes(n.id),n.id),r&&r()},children:[c(re,{size:15,children:c(wn,{})}),c(z,{type:"NormalBold",children:u("timetable.addToWishlist")})]}),(s||m!=="success")&&!a?.some(b=>b.id===n.id)?w(Gt,{type:"selected",onClick:()=>{R(n),r&&r()},children:[c(re,{size:15,children:c(yn,{})}),c(z,{type:"NormalBold",children:u("timetable.addToTimetable")})]}):w(Gt,{type:"selected",onClick:()=>{t&&t(n.id),r&&r()},children:[c(re,{size:15,children:c(sn,{})}),c(z,{type:"NormalBold",children:u("timetable.removeFromTimetable")})]})]})]}):c(Ai,{})})},to=T.div`
    width: 100%;
    display: flex;
    flex-direction: column;
    border-radius: 8px;
    background-color: ${({theme:e})=>e.colors.Background.Block.default};
    transition: all 0.2s ease;
    transform: ${({isSelected:e})=>e?"translateY(-2px)":"none"};
    box-shadow: ${({isSelected:e})=>e?"0 4px 8px rgba(0, 0, 0, 0.15)":"none"};
    overflow: hidden;
    flex-shrink: 0;
`,no=T.div`
    width: 100%;
    display: flex;
    align-items: center;
    padding: 8px 12px;
    flex-direction: row;
    justify-content: space-between;
`,ro=T.div`
    width: 100%;
    display: flex;
    align-items: center;
    padding: 8px 12px 8px 18px;
    flex-direction: row;
    justify-content: space-between;
    background-color: ${({isHighlighted:e,theme:t})=>e?t.colors.Background.Block.dark:t.colors.Background.Block.default};
    cursor: pointer;
`,Yn=T.div`
    width: 95%;
    height: 1px;
    background-color: ${({theme:e})=>e.colors.Line.dark};
    align-self: center;
`,io=({course:e,selectedLecture:t,hoveredLecture:n,isInWish:r,isWishlist:i,currentTimetableId:o,timetableLectures:s,isAddTimetablePending:a,setHoveredLecture:d,setSelectedLecture:f,handleLikeClick:u,handleAddToTimetable:h,t:m})=>{const{status:p}=Et(),A=We(),g=je("tablet"),y=e.lectures[0]?.courseId??-1,E=t!=null&&t.courseId!==y?.3:1;return w(to,{isSelected:t?.courseId===y,style:{opacity:E},children:[w(no,{children:[w(L,{direction:"row",gap:6,style:{opacity:e.completed?.3:1},children:[c(z,{type:"NormalBold",color:"Text.default",children:e.name}),c(z,{type:"Normal",color:"Text.default",children:e.code})]}),e.completed?c(z,{type:"Normal",color:"Text.default",children:m("common.completedCourse")}):c(z,{type:"Normal",color:"Highlight.default",children:e.type})]}),c(Yn,{}),e.lectures.map((x,D)=>{const C=r.includes(x.id),N=n?.some(R=>R.id===x.id)===!0;return w(se.Fragment,{children:[w(ro,{"data-lecture-id":x.id,onMouseEnter:()=>{g||d([x])},onMouseLeave:()=>{g||d(null)},onClick:()=>{if(x.id===t?.id){f(null);return}f(x)},isHighlighted:t?.id===x.id||N,children:[w(L,{direction:"column",gap:0,children:[g&&N&&w(z,{type:"Small",color:"Text.placeholder",children:[x.department.name," / ",x.type]}),w(L,{direction:"row",gap:6,style:{opacity:e.completed?.3:1},children:[w(z,{type:"NormalBold",color:"Text.default",children:[x.classNo," ",x.subtitle]}),c(z,{type:"Normal",color:"Text.default",children:Rr(x.professors)})]}),g&&N&&w(z,{type:"Small",color:"Text.placeholder",children:[x.classes[0]?.buildingName," ",x.classes[0]?.roomName," /"," ",x.limitPeople]})]}),w(L,{direction:"row",gap:6,onClick:R=>R.stopPropagation(),children:[!g&&p==="success"&&(C||i?c(re,{size:15,color:A.colors.Highlight.default,onClick:()=>u(C,x.id),children:c(wn,{})}):c(re,{size:15,color:A.colors.Text.default,onClick:()=>u(C,x.id),children:c(Dr,{})})),(!g||n?.some(R=>R.id===x.id))&&c("span",{title:o==null&&p==="success"?m("timetable.myTimeTableLectureAddWarning"):"",style:{opacity:o==null&&p==="success"||s.some(R=>bt(R.classes,x.classes))?.3:1,cursor:a?"wait":"pointer"},children:c(re,{size:g?30:15,color:A.colors.Text.default,onClick:()=>h(x),children:c(yn,{})})})]})]}),D!==e.lectures.length-1&&c(Yn,{})]},x.id)})]})},oo=l.memo(io,(e,t)=>{if(e.course!==t.course||e.isInWish!==t.isInWish||e.isWishlist!==t.isWishlist||e.currentTimetableId!==t.currentTimetableId||e.timetableLectures!==t.timetableLectures||e.isAddTimetablePending!==t.isAddTimetablePending||e.selectedLecture!==t.selectedLecture)return!1;const n=e.hoveredLecture,r=t.hoveredLecture;if(n===r)return!0;const i=e.course.lectures.map(a=>a.id),o=n?.some(a=>i.includes(a.id))??!1,s=r?.some(a=>i.includes(a.id))??!1;return!o&&!s}),ao=T(L)`
    width: 100%;
    height: 100%;
    overflow: hidden;
`,so=T(L)`
    border-radius: 6px;
    border: 1px solid ${({theme:e})=>e.colors.Line.divider};
    max-height: 100%;
`,lo=T(z)`
    width: 100%;
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
`,co=T(L)`
    height: 36px;
`,uo=T(L)`
    height: fit-content;
    overflow-y: auto;
    position: relative;

    scrollbar-width: none;

    &::-webkit-scrollbar {
        display: none;
    }

    /* 상단/하단 페이드 오버레이: 자식 배경에 가려지지 않도록 컨테이너 위에 표시 */
    ${W.tablet} {
        &::before,
        &::after {
            width: 100%;
            content: "";
            position: sticky;
            left: 0;
            right: 0;
            min-height: 40%;
            pointer-events: none; /* 클릭을 막지 않도록 */
            z-index: 1;
        }
        &::before {
            top: 0;
            /* 현재 배경색 기준으로 페이드 */
            background: linear-gradient(
                to bottom,
                ${({theme:e})=>e.colors.Background.Section.default} 0%,
                rgba(0, 0, 0, 0) 100%
            );
        }
        &::after {
            bottom: 0;
            background: linear-gradient(
                to top,
                ${({theme:e})=>e.colors.Background.Section.default} 0%,
                rgba(0, 0, 0, 0) 100%
            );
        }
    }
`,ho=T(L)`
    width: 100%;
`,fo=T(L)`
    height: 100%;
    flex-grow: 1;

    ${W.tablet} {
        padding-right: 4px;
    }
`,po=T.div`
    width: 0;
    height: 0;
    border-top: 7px solid transparent;
    border-bottom: 7px solid transparent;
    border-right: 10px solid ${({theme:e})=>e.colors.Text.default};
    top: 50%;
    right: 0;
    position: sticky;
    transform: translateY(-50%);
`,go=T.div`
    display: flex;
    align-items: center;
    padding: 8px 12px;
    flex-direction: row;
    gap: 8px;
    border-radius: 6px;
    background-color: ${({isSelected:e,theme:t})=>e?t.colors.Background.Button.highlightDark:t.colors.Background.Button.highlight};
    cursor: pointer;
    &:hover {
        background-color: ${({theme:e})=>e.colors.Background.Button.highlightDark};
    }
`,Xt=50,Vn=({timetableLectures:e,year:t,semester:n,setNonLoginTimetable:r,hoveredLecture:i,setHoveredLecture:o,selectedLecture:s,setSelectedLecture:a,timeFilter:d,setTimeFilter:f,currentTimetableId:u})=>{const{t:h}=Ie(),m=We(),{user:p,status:A}=Et(),g=bn(),{ref:y,inView:E}=Cr({threshold:0}),[x,D]=l.useState(!1),C=je("tablet"),N=l.useCallback(v=>{if(!v)return v;const I=new Map;return v.courses.forEach(P=>{const G=I.get(P.id);if(!G){I.set(P.id,{...P,lectures:[...P.lectures]});return}const _=new Set(G.lectures.map(de=>de.id)),fe=[...G.lectures];P.lectures.forEach(de=>{_.has(de.id)||(_.add(de.id),fe.push(de))}),I.set(P.id,{...G,lectures:fe})}),{...v,courses:Array.from(I.values())}},[]),{query:R,setParams:M,data:b}=Sr("GET","/lectures",{infinites:["courses"],limit:Xt,enabled:x,gcTime:0,select:N,iterate:v=>{let I=0;return v.courses.forEach(P=>{I+=P.lectures.length}),I<Xt?0:I}}),{mutation:S,requestFunction:k}=ue("PATCH",`/timetables/${u}`,{onSuccess:()=>{g.invalidateQueries({queryKey:[`/timetables/${u}`]})}}),[O,F]=l.useState({courses:[]}),[Q,X]=l.useState([]),[K,Se]=l.useState(0),J=l.useRef(null),ee=l.useRef(null),H=l.useRef(null),[te,ce]=l.useState(!1),{query:q,setParams:V}=ue("GET",`/users/${p?.id}/wishlist`,{enabled:A==="success"&&t!=-1}),{requestFunction:ie}=ue("PATCH",`/users/${p?.id}/wishlist`,{onSuccess:()=>{g.invalidateQueries({queryKey:[`/users/${p?.id}/wishlist`]})}}),xe=v=>{if(Ci(v)){alert(h("common.search.empty"));return}ce(!1);const I={year:t,semester:n,...v,order:["code","popular","studentCount"][K]??"code",offset:0,limit:Xt,day:v.time?.day??void 0,begin:v.time?.begin??void 0,end:v.time?.end??void 0};M(I),D(!0),Oe("Search Lectures",{year:t,semester:n,keyword:v.keyword??"",department:v.department??"",type:v.type??"",level:v.level??""})};l.useEffect(()=>{ce(!1),M(v=>({...v,order:["code","popular","studentCount"][K]??"code",offset:0})),D(!0)},[K]),l.useEffect(()=>{F({courses:[]}),t!==-1&&V({year:t,semester:n})},[t,n]),l.useEffect(()=>{E&&R.hasNextPage&&!R.isFetchingNextPage&&R.fetchNextPage()},[E]),l.useEffect(()=>{b!==void 0&&(F(b),ce(!1)),R.hasNextPage||D(!1)},[b]),l.useEffect(()=>{q.data!==void 0&&F(te?q.data:b??{courses:[]})},[te]),l.useEffect(()=>{q.data!==void 0&&(X(q.data.courses.flatMap(v=>v.lectures).map(v=>v.id)),te&&F(q.data))},[q.data]),l.useEffect(()=>{const v=I=>{J.current&&!J.current.contains(I.target)&&ee.current&&ee.current.contains(I.target)&&a(null)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const oe=se.useMemo(()=>O.courses.flatMap(v=>v.lectures),[O.courses]),B=l.useCallback(()=>{if(!C||!H.current)return;const I=H.current.getBoundingClientRect(),P=I.top+I.height/2,G=document.elementFromPoint(I.left+50,P);if(!G)return;const _=G.closest("[data-lecture-id]");if(_){const fe=parseInt(_.getAttribute("data-lecture-id")||"",10),de=oe.find(Dt=>Dt.id===fe);de&&o([de])}},[C,oe,o,a]);l.useEffect(()=>{if(!C||!H.current)return;const v=H.current;return v.addEventListener("scroll",B),()=>{v.removeEventListener("scroll",B)}},[C,B]),l.useEffect(()=>{if(!C||O.courses.length===0)return;let v;const I=requestAnimationFrame(()=>{v=requestAnimationFrame(()=>{B()})});return()=>{cancelAnimationFrame(I),cancelAnimationFrame(v)}},[C,O.courses,B]);const U=async(v,I)=>{if(A==="idle")return;const P=v?"delete":"add";Oe("Update Wishlist",{action:P,lectureId:I}),X(v?G=>G.filter(_=>_!==I):G=>[...G,I]);try{ie({lectureId:I,mode:P})}catch(G){console.error("Failed to update wishlist:",G),X(v?_=>[..._,I]:_=>_.filter(fe=>fe!==I))}},Y=async v=>{if(A==="success"){if(!u){console.warn("No timetable selected");return}if(e.some(I=>bt(I.classes,v.classes))){alert(h("timetable.addLectureConflict"));return}k({action:"add",lectureId:v.id}),Oe("Add Lecture to Timetable",{lectureId:v.id,lectureCode:v.code,courseName:v.name,timetableId:u})}else{if(e.some(I=>bt(I.classes,v.classes))){alert(h("timetable.addLectureConflict"));return}r(I=>[...I,v]),Oe("Add Lecture to Timetable",{lectureId:v.id,lectureCode:v.code,courseName:v.name,timetableId:null,isGuest:!0})}};return w(ao,{direction:"column",justify:"stretch",align:"stretch",gap:8,ref:ee,children:[c(so,{direction:"row",justify:"stretch",gap:0,children:c(Si,{options:["type","department","level","term","time"],timeFilter:d,setTimeFilter:f,onSearch:xe})}),w(L,{direction:"row",gap:0,justify:A==="success"?"space-between":"flex-end",align:"center",children:[A==="success"&&w(go,{isSelected:te,onClick:()=>{ce(v=>!v)},style:{paddingBlock:10},children:[c(re,{size:15,color:m.colors.Highlight.default,children:te?c(wn,{}):c(Dr,{})}),c(z,{type:"Normal",color:"Highlight.default",children:h("common.wishlist")})]}),O.courses.length!==0&&c(co,{direction:"row",gap:0,children:c(Ii,{options:[h("dictionary.sortOptions.code"),h("dictionary.sortOptions.popularity"),h("dictionary.sortOptions.studentCount")],setSelectedOption:Se,selectedOption:K})})]}),O.courses.length!==0?c(uo,{direction:"column",gap:0,ref:H,children:w(ho,{direction:"row",gap:0,children:[w(fo,{direction:"column",gap:12,ref:J,children:[O.courses.map(v=>c(oo,{course:v,selectedLecture:s,hoveredLecture:i,isInWish:Q,isWishlist:te,currentTimetableId:u,timetableLectures:e,isAddTimetablePending:S.isPending,setHoveredLecture:o,setSelectedLecture:a,handleLikeClick:U,handleAddToTimetable:Y,t:h},v.id)),!te&&R.hasNextPage&&c(cn,{ref:y})]}),C&&c(po,{})]})}):c(lo,{type:"Bigger",color:"Text.placeholder",children:h("dictionary.noResults")})]})};function mo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Ut=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ot(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function En(e){return"nodeType"in e}function he(e){var t,n;return e?ot(e)?e:En(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Tn(e){const{Document:t}=he(e);return e instanceof t}function Tt(e){return ot(e)?!1:e instanceof he(e).HTMLElement}function Ar(e){return e instanceof he(e).SVGElement}function at(e){return e?ot(e)?e.document:En(e)?Tn(e)?e:Tt(e)||Ar(e)?e.ownerDocument:document:document:document}const Ae=Ut?l.useLayoutEffect:l.useEffect;function Sn(e){const t=l.useRef(e);return Ae(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function vo(){const e=l.useRef(null),t=l.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function yt(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return Ae(()=>{n.current!==e&&(n.current=e)},t),n}function St(e,t){const n=l.useRef();return l.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Lt(e){const t=Sn(e),n=l.useRef(null),r=l.useCallback(i=>{i!==n.current&&t?.(i,n.current),n.current=i},[]);return[n,r]}function dn(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let Kt={};function Ct(e,t){return l.useMemo(()=>{if(t)return t;const n=Kt[e]==null?0:Kt[e]+1;return Kt[e]=n,e+"-"+n},[e,t])}function Ir(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>{const a=Object.entries(s);for(const[d,f]of a){const u=o[d];u!=null&&(o[d]=u+e*f)}return o},{...t})}}const et=Ir(1),kt=Ir(-1);function bo(e){return"clientX"in e&&"clientY"in e}function Cn(e){if(!e)return!1;const{KeyboardEvent:t}=he(e.target);return t&&e instanceof t}function yo(e){if(!e)return!1;const{TouchEvent:t}=he(e.target);return t&&e instanceof t}function un(e){if(yo(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return bo(e)?{x:e.clientX,y:e.clientY}:null}const Ot=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ot.Translate.toString(e),Ot.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Gn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function wo(e){return e.matches(Gn)?e:e.querySelector(Gn)}const xo={display:"none"};function Eo(e){let{id:t,value:n}=e;return se.createElement("div",{id:t,style:xo},n)}function To(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function So(){const[e,t]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Nr=l.createContext(null);function Co(e){const t=l.useContext(Nr);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Do(){const[e]=l.useState(()=>new Set),t=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:i,event:o}=r;e.forEach(s=>{var a;return(a=s[i])==null?void 0:a.call(s,o)})},[e]),t]}const Ro={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ao={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Io(e){let{announcements:t=Ao,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Ro}=e;const{announce:o,announcement:s}=So(),a=Ct("DndLiveRegion"),[d,f]=l.useState(!1);if(l.useEffect(()=>{f(!0)},[]),Co(l.useMemo(()=>({onDragStart(h){let{active:m}=h;o(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:p}=h;t.onDragMove&&o(t.onDragMove({active:m,over:p}))},onDragOver(h){let{active:m,over:p}=h;o(t.onDragOver({active:m,over:p}))},onDragEnd(h){let{active:m,over:p}=h;o(t.onDragEnd({active:m,over:p}))},onDragCancel(h){let{active:m,over:p}=h;o(t.onDragCancel({active:m,over:p}))}}),[o,t])),!d)return null;const u=se.createElement(se.Fragment,null,se.createElement(Eo,{id:r,value:i.draggable}),se.createElement(To,{id:a,announcement:s}));return n?ft.createPortal(u,n):u}var Z;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Z||(Z={}));function Bt(){}function Xn(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function No(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Te=Object.freeze({x:0,y:0});function Mo(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Lo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ko(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Oo(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Kn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Bo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Kn(t,t.left,t.top),o=[];for(const s of r){const{id:a}=s,d=n.get(a);if(d){const f=Mo(Kn(d),i);o.push({id:a,data:{droppableContainer:s,value:f}})}}return o.sort(Lo)};function zo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),s=i-r,a=o-n;if(r<i&&n<o){const d=t.width*t.height,f=e.width*e.height,u=s*a,h=u/(d+f-u);return Number(h.toFixed(4))}return 0}const Po=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:s}=o,a=n.get(s);if(a){const d=zo(a,t);d>0&&i.push({id:s,data:{droppableContainer:o,value:d}})}}return i.sort(ko)};function Uo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Mr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Te}function Fo(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((s,a)=>({...s,top:s.top+e*a.y,bottom:s.bottom+e*a.y,left:s.left+e*a.x,right:s.right+e*a.x}),{...n})}}const $o=Fo(1);function jo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Wo(e,t,n){const r=jo(t);if(!r)return e;const{scaleX:i,scaleY:o,x:s,y:a}=r,d=e.left-s-(1-i)*parseFloat(n),f=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,h=o?e.height/o:e.height;return{width:u,height:h,top:f,right:d+u,bottom:f+h,left:d}}const Ho={ignoreTransform:!1};function st(e,t){t===void 0&&(t=Ho);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:u}=he(e).getComputedStyle(e);f&&(n=Wo(n,f,u))}const{top:r,left:i,width:o,height:s,bottom:a,right:d}=n;return{top:r,left:i,width:o,height:s,bottom:a,right:d}}function Qn(e){return st(e,{ignoreTransform:!0})}function qo(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Yo(e,t){return t===void 0&&(t=he(e).getComputedStyle(e)),t.position==="fixed"}function Vo(e,t){t===void 0&&(t=he(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function Dn(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Tn(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Tt(i)||Ar(i)||n.includes(i))return n;const o=he(e).getComputedStyle(i);return i!==e&&Vo(i,o)&&n.push(i),Yo(i,o)?n:r(i.parentNode)}return e?r(e):n}function Lr(e){const[t]=Dn(e,1);return t??null}function Qt(e){return!Ut||!e?null:ot(e)?e:En(e)?Tn(e)||e===at(e).scrollingElement?window:Tt(e)?e:null:null}function kr(e){return ot(e)?e.scrollX:e.scrollLeft}function Or(e){return ot(e)?e.scrollY:e.scrollTop}function hn(e){return{x:kr(e),y:Or(e)}}var ne;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ne||(ne={}));function Br(e){return!Ut||!e?!1:e===document.scrollingElement}function zr(e){const t={x:0,y:0},n=Br(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:s,isRight:a,maxScroll:r,minScroll:t}}const Go={x:.2,y:.2};function Xo(e,t,n,r,i){let{top:o,left:s,right:a,bottom:d}=n;r===void 0&&(r=10),i===void 0&&(i=Go);const{isTop:f,isBottom:u,isLeft:h,isRight:m}=zr(e),p={x:0,y:0},A={x:0,y:0},g={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+g.height?(p.y=ne.Backward,A.y=r*Math.abs((t.top+g.height-o)/g.height)):!u&&d>=t.bottom-g.height&&(p.y=ne.Forward,A.y=r*Math.abs((t.bottom-g.height-d)/g.height)),!m&&a>=t.right-g.width?(p.x=ne.Forward,A.x=r*Math.abs((t.right-g.width-a)/g.width)):!h&&s<=t.left+g.width&&(p.x=ne.Backward,A.x=r*Math.abs((t.left+g.width-s)/g.width)),{direction:p,speed:A}}function Ko(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Pr(e){return e.reduce((t,n)=>et(t,hn(n)),Te)}function Qo(e){return e.reduce((t,n)=>t+kr(n),0)}function Jo(e){return e.reduce((t,n)=>t+Or(n),0)}function _o(e,t){if(t===void 0&&(t=st),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);Lr(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Zo=[["x",["left","right"],Qo],["y",["top","bottom"],Jo]];class Rn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Dn(n),i=Pr(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,s,a]of Zo)for(const d of s)Object.defineProperty(this,d,{get:()=>{const f=a(r),u=i[o]-f;return this.rect[d]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function ea(e){const{EventTarget:t}=he(e);return e instanceof t?e:at(e)}function Jt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var be;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(be||(be={}));function Jn(e){e.preventDefault()}function ta(e){e.stopPropagation()}var j;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(j||(j={}));const Ur={start:[j.Space,j.Enter],cancel:[j.Esc],end:[j.Space,j.Enter,j.Tab]},na=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case j.Right:return{...n,x:n.x+25};case j.Left:return{...n,x:n.x-25};case j.Down:return{...n,y:n.y+25};case j.Up:return{...n,y:n.y-25}}};class Fr{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new gt(at(n)),this.windowListeners=new gt(he(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(be.Resize,this.handleCancel),this.windowListeners.add(be.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(be.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&_o(r),n(Te)}handleKeyDown(t){if(Cn(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=Ur,coordinateGetter:s=na,scrollBehavior:a="smooth"}=i,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:f}=r.current,u=f?{x:f.left,y:f.top}:Te;this.referenceCoordinates||(this.referenceCoordinates=u);const h=s(t,{active:n,context:r.current,currentCoordinates:u});if(h){const m=kt(h,u),p={x:0,y:0},{scrollableAncestors:A}=r.current;for(const g of A){const y=t.code,{isTop:E,isRight:x,isLeft:D,isBottom:C,maxScroll:N,minScroll:R}=zr(g),M=Ko(g),b={x:Math.min(y===j.Right?M.right-M.width/2:M.right,Math.max(y===j.Right?M.left:M.left+M.width/2,h.x)),y:Math.min(y===j.Down?M.bottom-M.height/2:M.bottom,Math.max(y===j.Down?M.top:M.top+M.height/2,h.y))},S=y===j.Right&&!x||y===j.Left&&!D,k=y===j.Down&&!C||y===j.Up&&!E;if(S&&b.x!==h.x){const O=g.scrollLeft+m.x,F=y===j.Right&&O<=N.x||y===j.Left&&O>=R.x;if(F&&!m.y){g.scrollTo({left:O,behavior:a});return}F?p.x=g.scrollLeft-O:p.x=y===j.Right?g.scrollLeft-N.x:g.scrollLeft-R.x,p.x&&g.scrollBy({left:-p.x,behavior:a});break}else if(k&&b.y!==h.y){const O=g.scrollTop+m.y,F=y===j.Down&&O<=N.y||y===j.Up&&O>=R.y;if(F&&!m.x){g.scrollTo({top:O,behavior:a});return}F?p.y=g.scrollTop-O:p.y=y===j.Down?g.scrollTop-N.y:g.scrollTop-R.y,p.y&&g.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,et(kt(h,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Fr.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Ur,onActivation:i}=t,{active:o}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function _n(e){return!!(e&&"distance"in e)}function Zn(e){return!!(e&&"delay"in e)}class An{constructor(t,n,r){var i;r===void 0&&(r=ea(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:s}=o;this.props=t,this.events=n,this.document=at(s),this.documentListeners=new gt(this.document),this.listeners=new gt(r),this.windowListeners=new gt(he(s)),this.initialCoordinates=(i=un(o))!=null?i:Te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(be.Resize,this.handleCancel),this.windowListeners.add(be.DragStart,Jn),this.windowListeners.add(be.VisibilityChange,this.handleCancel),this.windowListeners.add(be.ContextMenu,Jn),this.documentListeners.add(be.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Zn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(_n(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(be.Click,ta,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(be.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!i)return;const d=(n=un(t))!=null?n:Te,f=kt(i,d);if(!r&&a){if(_n(a)){if(a.tolerance!=null&&Jt(f,a.tolerance))return this.handleCancel();if(Jt(f,a.distance))return this.handleStart()}if(Zn(a)&&Jt(f,a.tolerance))return this.handleCancel();this.handlePending(a,f);return}t.cancelable&&t.preventDefault(),s(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===j.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ra={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class In extends An{constructor(t){const{event:n}=t,r=at(n.target);super(t,ra,r)}}In.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const ia={move:{name:"mousemove"},end:{name:"mouseup"}};var fn;(function(e){e[e.RightClick=2]="RightClick"})(fn||(fn={}));class oa extends An{constructor(t){super(t,ia,at(t.event.target))}}oa.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===fn.RightClick?!1:(r?.({event:n}),!0)}}];const _t={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $r extends An{constructor(t){super(t,_t)}static setup(){return window.addEventListener(_t.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(_t.move.name,t)};function t(){}}}$r.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var mt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(mt||(mt={}));var zt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(zt||(zt={}));function aa(e){let{acceleration:t,activator:n=mt.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:s=5,order:a=zt.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:u,delta:h,threshold:m}=e;const p=la({delta:h,disabled:!o}),[A,g]=vo(),y=l.useRef({x:0,y:0}),E=l.useRef({x:0,y:0}),x=l.useMemo(()=>{switch(n){case mt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case mt.DraggableRect:return i}},[n,i,d]),D=l.useRef(null),C=l.useCallback(()=>{const R=D.current;if(!R)return;const M=y.current.x*E.current.x,b=y.current.y*E.current.y;R.scrollBy(M,b)},[]),N=l.useMemo(()=>a===zt.TreeOrder?[...f].reverse():f,[a,f]);l.useEffect(()=>{if(!o||!f.length||!x){g();return}for(const R of N){if(r?.(R)===!1)continue;const M=f.indexOf(R),b=u[M];if(!b)continue;const{direction:S,speed:k}=Xo(R,b,x,t,m);for(const O of["x","y"])p[O][S[O]]||(k[O]=0,S[O]=0);if(k.x>0||k.y>0){g(),D.current=R,A(C,s),y.current=k,E.current=S;return}}y.current={x:0,y:0},E.current={x:0,y:0},g()},[t,C,r,g,o,s,JSON.stringify(x),JSON.stringify(p),A,f,N,u,JSON.stringify(m)])}const sa={x:{[ne.Backward]:!1,[ne.Forward]:!1},y:{[ne.Backward]:!1,[ne.Forward]:!1}};function la(e){let{delta:t,disabled:n}=e;const r=dn(t);return St(i=>{if(n||!r||!i)return sa;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ne.Backward]:i.x[ne.Backward]||o.x===-1,[ne.Forward]:i.x[ne.Forward]||o.x===1},y:{[ne.Backward]:i.y[ne.Backward]||o.y===-1,[ne.Forward]:i.y[ne.Forward]||o.y===1}}},[n,t,r])}function ca(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return St(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function da(e,t){return l.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...o]},[]),[e,t])}var wt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(wt||(wt={}));var pn;(function(e){e.Optimized="optimized"})(pn||(pn={}));const er=new Map;function ua(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,s]=l.useState(null),{frequency:a,measure:d,strategy:f}=i,u=l.useRef(e),h=y(),m=yt(h),p=l.useCallback(function(E){E===void 0&&(E=[]),!m.current&&s(x=>x===null?E:x.concat(E.filter(D=>!x.includes(D))))},[m]),A=l.useRef(null),g=St(E=>{if(h&&!n)return er;if(!E||E===er||u.current!==e||o!=null){const x=new Map;for(let D of e){if(!D)continue;if(o&&o.length>0&&!o.includes(D.id)&&D.rect.current){x.set(D.id,D.rect.current);continue}const C=D.node.current,N=C?new Rn(d(C),C):null;D.rect.current=N,N&&x.set(D.id,N)}return x}return E},[e,o,n,h,d]);return l.useEffect(()=>{u.current=e},[e]),l.useEffect(()=>{h||p()},[n,h]),l.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),l.useEffect(()=>{h||typeof a!="number"||A.current!==null||(A.current=setTimeout(()=>{p(),A.current=null},a))},[a,h,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:o!=null};function y(){switch(f){case wt.Always:return!1;case wt.BeforeDragging:return n;default:return!n}}}function jr(e,t){return St(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ha(e,t){return jr(e,t)}function fa(e){let{callback:t,disabled:n}=e;const r=Sn(t),i=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return l.useEffect(()=>()=>i?.disconnect(),[i]),i}function Ft(e){let{callback:t,disabled:n}=e;const r=Sn(t),i=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return l.useEffect(()=>()=>i?.disconnect(),[i]),i}function pa(e){return new Rn(st(e),e)}function tr(e,t,n){t===void 0&&(t=pa);const[r,i]=l.useState(null);function o(){i(d=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=d??n)!=null?f:null}const u=t(e);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const s=fa({callback(d){if(e)for(const f of d){const{type:u,target:h}=f;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){o();break}}}}),a=Ft({callback:o});return Ae(()=>{o(),e?(a?.observe(e),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[e]),r}function ga(e){const t=jr(e);return Mr(e,t)}const nr=[];function ma(e){const t=l.useRef(e),n=St(r=>e?r&&r!==nr&&e&&t.current&&e.parentNode===t.current.parentNode?r:Dn(e):nr,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function va(e){const[t,n]=l.useState(null),r=l.useRef(e),i=l.useCallback(o=>{const s=Qt(o.target);s&&n(a=>a?(a.set(s,hn(s)),new Map(a)):null)},[]);return l.useEffect(()=>{const o=r.current;if(e!==o){s(o);const a=e.map(d=>{const f=Qt(d);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,hn(f)]):null}).filter(d=>d!=null);n(a.length?new Map(a):null),r.current=e}return()=>{s(e),s(o)};function s(a){a.forEach(d=>{const f=Qt(d);f?.removeEventListener("scroll",i)})}},[i,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,s)=>et(o,s),Te):Pr(e):Te,[e,t])}function rr(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const r=e!==Te;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?kt(e,n.current):Te}function ba(e){l.useEffect(()=>{if(!Ut)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function ya(e,t){return l.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=s=>{o(s,t)},n},{}),[e,t])}function Wr(e){return l.useMemo(()=>e?qo(e):null,[e])}const ir=[];function wa(e,t){t===void 0&&(t=st);const[n]=e,r=Wr(n?he(n):null),[i,o]=l.useState(ir);function s(){o(()=>e.length?e.map(d=>Br(d)?r:new Rn(t(d),d)):ir)}const a=Ft({callback:s});return Ae(()=>{a?.disconnect(),s(),e.forEach(d=>a?.observe(d))},[e]),i}function xa(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Tt(t)?t:e}function Ea(e){let{measure:t}=e;const[n,r]=l.useState(null),i=l.useCallback(f=>{for(const{target:u}of f)if(Tt(u)){r(h=>{const m=t(u);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),o=Ft({callback:i}),s=l.useCallback(f=>{const u=xa(f);o?.disconnect(),u&&o?.observe(u),r(u?t(u):null)},[t,o]),[a,d]=Lt(s);return l.useMemo(()=>({nodeRef:a,rect:n,setRef:d}),[n,a,d])}const Ta=[{sensor:In,options:{}},{sensor:Fr,options:{}}],Sa={current:{}},Mt={draggable:{measure:Qn},droppable:{measure:Qn,strategy:wt.WhileDragging,frequency:pn.Optimized},dragOverlay:{measure:st}};class vt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ca={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Mt,measureDroppableContainers:Bt,windowRect:null,measuringScheduled:!1},Da={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bt,draggableNodes:new Map,over:null,measureDroppableContainers:Bt},$t=l.createContext(Da),Hr=l.createContext(Ca);function Ra(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vt}}}function Aa(e,t){switch(t.type){case Z.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Z.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Z.DragEnd:case Z.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Z.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new vt(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Z.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new vt(e.droppable.containers);return s.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:s}}}case Z.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new vt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Ia(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=l.useContext($t),o=dn(r),s=dn(n?.id);return l.useEffect(()=>{if(!t&&!r&&o&&s!=null){if(!Cn(o)||document.activeElement===o.target)return;const a=i.get(s);if(!a)return;const{activatorNode:d,node:f}=a;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const u of[d.current,f.current]){if(!u)continue;const h=wo(u);if(h){h.focus();break}}})}},[r,t,i,s,o]),null}function Na(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function Ma(e){return l.useMemo(()=>({draggable:{...Mt.draggable,...e?.draggable},droppable:{...Mt.droppable,...e?.droppable},dragOverlay:{...Mt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function La(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=l.useRef(!1),{x:s,y:a}=typeof i=="boolean"?{x:i,y:i}:i;Ae(()=>{if(!s&&!a||!t){o.current=!1;return}if(o.current||!r)return;const f=t?.node.current;if(!f||f.isConnected===!1)return;const u=n(f),h=Mr(u,r);if(s||(h.x=0),a||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=Lr(f);m&&m.scrollBy({top:h.y,left:h.x})}},[t,s,a,r,n])}const qr=l.createContext({...Te,scaleX:1,scaleY:1});var $e;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})($e||($e={}));const ka=l.memo(function(t){var n,r,i,o;let{id:s,accessibility:a,autoScroll:d=!0,children:f,sensors:u=Ta,collisionDetection:h=Po,measuring:m,modifiers:p,...A}=t;const g=l.useReducer(Aa,void 0,Ra),[y,E]=g,[x,D]=Do(),[C,N]=l.useState($e.Uninitialized),R=C===$e.Initialized,{draggable:{active:M,nodes:b,translate:S},droppable:{containers:k}}=y,O=M!=null?b.get(M):null,F=l.useRef({initial:null,translated:null}),Q=l.useMemo(()=>{var le;return M!=null?{id:M,data:(le=O?.data)!=null?le:Sa,rect:F}:null},[M,O]),X=l.useRef(null),[K,Se]=l.useState(null),[J,ee]=l.useState(null),H=yt(A,Object.values(A)),te=Ct("DndDescribedBy",s),ce=l.useMemo(()=>k.getEnabled(),[k]),q=Ma(m),{droppableRects:V,measureDroppableContainers:ie,measuringScheduled:xe}=ua(ce,{dragging:R,dependencies:[S.x,S.y],config:q.droppable}),oe=ca(b,M),B=l.useMemo(()=>J?un(J):null,[J]),U=pi(),Y=ha(oe,q.draggable.measure);La({activeNode:M!=null?b.get(M):null,config:U.layoutShiftCompensation,initialRect:Y,measure:q.draggable.measure});const v=tr(oe,q.draggable.measure,Y),I=tr(oe?oe.parentElement:null),P=l.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:b,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),G=k.getNodeFor((n=P.current.over)==null?void 0:n.id),_=Ea({measure:q.dragOverlay.measure}),fe=(r=_.nodeRef.current)!=null?r:oe,de=R?(i=_.rect)!=null?i:v:null,Dt=!!(_.nodeRef.current&&_.rect),On=ga(Dt?null:v),Ht=Wr(fe?he(fe):null),Be=ma(R?G??oe:null),Rt=wa(Be),At=Na(p,{transform:{x:S.x-On.x,y:S.y-On.y,scaleX:1,scaleY:1},activatorEvent:J,active:Q,activeNodeRect:v,containerNodeRect:I,draggingNodeRect:de,over:P.current.over,overlayNodeRect:_.rect,scrollableAncestors:Be,scrollableAncestorRects:Rt,windowRect:Ht}),Bn=B?et(B,S):null,zn=va(Be),si=rr(zn),li=rr(zn,[v]),He=et(At,si),qe=de?$o(de,At):null,lt=Q&&qe?h({active:Q,collisionRect:qe,droppableRects:V,droppableContainers:ce,pointerCoordinates:Bn}):null,Pn=Oo(lt,"id"),[ze,Un]=l.useState(null),ci=Dt?At:et(At,li),di=Uo(ci,(o=ze?.rect)!=null?o:null,v),qt=l.useRef(null),Fn=l.useCallback((le,pe)=>{let{sensor:ge,options:Pe}=pe;if(X.current==null)return;const ve=b.get(X.current);if(!ve)return;const me=le.nativeEvent,Ce=new ge({active:X.current,activeNode:ve,event:me,options:Pe,context:P,onAbort(ae){if(!b.get(ae))return;const{onDragAbort:De}=H.current,Ne={id:ae};De?.(Ne),x({type:"onDragAbort",event:Ne})},onPending(ae,Ue,De,Ne){if(!b.get(ae))return;const{onDragPending:dt}=H.current,Fe={id:ae,constraint:Ue,initialCoordinates:De,offset:Ne};dt?.(Fe),x({type:"onDragPending",event:Fe})},onStart(ae){const Ue=X.current;if(Ue==null)return;const De=b.get(Ue);if(!De)return;const{onDragStart:Ne}=H.current,ct={activatorEvent:me,active:{id:Ue,data:De.data,rect:F}};ft.unstable_batchedUpdates(()=>{Ne?.(ct),N($e.Initializing),E({type:Z.DragStart,initialCoordinates:ae,active:Ue}),x({type:"onDragStart",event:ct}),Se(qt.current),ee(me)})},onMove(ae){E({type:Z.DragMove,coordinates:ae})},onEnd:Ye(Z.DragEnd),onCancel:Ye(Z.DragCancel)});qt.current=Ce;function Ye(ae){return async function(){const{active:De,collisions:Ne,over:ct,scrollAdjustedTranslate:dt}=P.current;let Fe=null;if(De&&dt){const{cancelDrop:ut}=H.current;Fe={activatorEvent:me,active:De,collisions:Ne,delta:dt,over:ct},ae===Z.DragEnd&&typeof ut=="function"&&await Promise.resolve(ut(Fe))&&(ae=Z.DragCancel)}X.current=null,ft.unstable_batchedUpdates(()=>{E({type:ae}),N($e.Uninitialized),Un(null),Se(null),ee(null),qt.current=null;const ut=ae===Z.DragEnd?"onDragEnd":"onDragCancel";if(Fe){const Yt=H.current[ut];Yt?.(Fe),x({type:ut,event:Fe})}})}}},[b]),ui=l.useCallback((le,pe)=>(ge,Pe)=>{const ve=ge.nativeEvent,me=b.get(Pe);if(X.current!==null||!me||ve.dndKit||ve.defaultPrevented)return;const Ce={active:me};le(ge,pe.options,Ce)===!0&&(ve.dndKit={capturedBy:pe.sensor},X.current=Pe,Fn(ge,pe))},[b,Fn]),$n=da(u,ui);ba(u),Ae(()=>{v&&C===$e.Initializing&&N($e.Initialized)},[v,C]),l.useEffect(()=>{const{onDragMove:le}=H.current,{active:pe,activatorEvent:ge,collisions:Pe,over:ve}=P.current;if(!pe||!ge)return;const me={active:pe,activatorEvent:ge,collisions:Pe,delta:{x:He.x,y:He.y},over:ve};ft.unstable_batchedUpdates(()=>{le?.(me),x({type:"onDragMove",event:me})})},[He.x,He.y]),l.useEffect(()=>{const{active:le,activatorEvent:pe,collisions:ge,droppableContainers:Pe,scrollAdjustedTranslate:ve}=P.current;if(!le||X.current==null||!pe||!ve)return;const{onDragOver:me}=H.current,Ce=Pe.get(Pn),Ye=Ce&&Ce.rect.current?{id:Ce.id,rect:Ce.rect.current,data:Ce.data,disabled:Ce.disabled}:null,ae={active:le,activatorEvent:pe,collisions:ge,delta:{x:ve.x,y:ve.y},over:Ye};ft.unstable_batchedUpdates(()=>{Un(Ye),me?.(ae),x({type:"onDragOver",event:ae})})},[Pn]),Ae(()=>{P.current={activatorEvent:J,active:Q,activeNode:oe,collisionRect:qe,collisions:lt,droppableRects:V,draggableNodes:b,draggingNode:fe,draggingNodeRect:de,droppableContainers:k,over:ze,scrollableAncestors:Be,scrollAdjustedTranslate:He},F.current={initial:de,translated:qe}},[Q,oe,lt,qe,b,fe,de,V,k,ze,Be,He]),aa({...U,delta:S,draggingRect:qe,pointerCoordinates:Bn,scrollableAncestors:Be,scrollableAncestorRects:Rt});const hi=l.useMemo(()=>({active:Q,activeNode:oe,activeNodeRect:v,activatorEvent:J,collisions:lt,containerNodeRect:I,dragOverlay:_,draggableNodes:b,droppableContainers:k,droppableRects:V,over:ze,measureDroppableContainers:ie,scrollableAncestors:Be,scrollableAncestorRects:Rt,measuringConfiguration:q,measuringScheduled:xe,windowRect:Ht}),[Q,oe,v,J,lt,I,_,b,k,V,ze,ie,Be,Rt,q,xe,Ht]),fi=l.useMemo(()=>({activatorEvent:J,activators:$n,active:Q,activeNodeRect:v,ariaDescribedById:{draggable:te},dispatch:E,draggableNodes:b,over:ze,measureDroppableContainers:ie}),[J,$n,Q,v,E,te,b,ze,ie]);return se.createElement(Nr.Provider,{value:D},se.createElement($t.Provider,{value:fi},se.createElement(Hr.Provider,{value:hi},se.createElement(qr.Provider,{value:di},f)),se.createElement(Ia,{disabled:a?.restoreFocus===!1})),se.createElement(Io,{...a,hiddenTextDescribedById:te}));function pi(){const le=K?.autoScrollEnabled===!1,pe=typeof d=="object"?d.enabled===!1:d===!1,ge=R&&!le&&!pe;return typeof d=="object"?{...d,enabled:ge}:{enabled:ge}}}),Oa=l.createContext(null),or="button",Ba="Draggable";function za(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=Ct(Ba),{activators:s,activatorEvent:a,active:d,activeNodeRect:f,ariaDescribedById:u,draggableNodes:h,over:m}=l.useContext($t),{role:p=or,roleDescription:A="draggable",tabIndex:g=0}=i??{},y=d?.id===t,E=l.useContext(y?qr:Oa),[x,D]=Lt(),[C,N]=Lt(),R=ya(s,t),M=yt(n);Ae(()=>(h.set(t,{id:t,key:o,node:x,activatorNode:C,data:M}),()=>{const S=h.get(t);S&&S.key===o&&h.delete(t)}),[h,t]);const b=l.useMemo(()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":y&&p===or?!0:void 0,"aria-roledescription":A,"aria-describedby":u.draggable}),[r,p,g,y,A,u.draggable]);return{active:d,activatorEvent:a,activeNodeRect:f,attributes:b,isDragging:y,listeners:r?void 0:R,node:x,over:m,setNodeRef:D,setActivatorNodeRef:N,transform:E}}function Pa(){return l.useContext(Hr)}const Ua="Droppable",Fa={timeout:25};function $a(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=Ct(Ua),{active:s,dispatch:a,over:d,measureDroppableContainers:f}=l.useContext($t),u=l.useRef({disabled:n}),h=l.useRef(!1),m=l.useRef(null),p=l.useRef(null),{disabled:A,updateMeasurementsFor:g,timeout:y}={...Fa,...i},E=yt(g??r),x=l.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{f(Array.isArray(E.current)?E.current:[E.current]),p.current=null},y)},[y]),D=Ft({callback:x,disabled:A||!s}),C=l.useCallback((b,S)=>{D&&(S&&(D.unobserve(S),h.current=!1),b&&D.observe(b))},[D]),[N,R]=Lt(C),M=yt(t);return l.useEffect(()=>{!D||!N.current||(D.disconnect(),h.current=!1,D.observe(N.current))},[N,D]),l.useEffect(()=>(a({type:Z.RegisterDroppable,element:{id:r,key:o,disabled:n,node:N,rect:m,data:M}}),()=>a({type:Z.UnregisterDroppable,key:o,id:r})),[r]),l.useEffect(()=>{n!==u.current.disabled&&(a({type:Z.SetDroppableDisabled,id:r,key:o,disabled:n}),u.current.disabled=n)},[r,o,n,a]),{active:s,rect:m,isOver:d?.id===r,node:N,over:d,setNodeRef:R}}const ja=e=>{let{transform:t}=e;return{...t,y:0}};function Wa(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const Ha=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return!n||!t?r:Wa(r,n,t)};function Nn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function qa(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function It(e){return e!==null&&e>=0}function Ya(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Va(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Nt={scaleX:1,scaleY:1},Ga=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:i,overIndex:o,index:s}=e;const a=(t=n[i])!=null?t:r;if(!a)return null;const d=Xa(n,s,i);if(s===i){const f=n[o];return f?{x:i<o?f.left+f.width-(a.left+a.width):f.left-a.left,y:0,...Nt}:null}return s>i&&s<=o?{x:-a.width-d,y:0,...Nt}:s<i&&s>=o?{x:a.width+d,y:0,...Nt}:{x:0,y:0,...Nt}};function Xa(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return!r||!i&&!o?0:n<t?i?r.left-(i.left+i.width):o.left-(r.left+r.width):o?o.left-(r.left+r.width):r.left-(i.left+i.width)}const Yr=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=Nn(t,r,n),s=t[i],a=o[i];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},Vr="Sortable",Gr=se.createContext({activeIndex:-1,containerId:Vr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Yr,disabled:{draggable:!1,droppable:!1}});function Ka(e){let{children:t,id:n,items:r,strategy:i=Yr,disabled:o=!1}=e;const{active:s,dragOverlay:a,droppableRects:d,over:f,measureDroppableContainers:u}=Pa(),h=Ct(Vr,n),m=a.rect!==null,p=l.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),A=s!=null,g=s?p.indexOf(s.id):-1,y=f?p.indexOf(f.id):-1,E=l.useRef(p),x=!Ya(p,E.current),D=y!==-1&&g===-1||x,C=Va(o);Ae(()=>{x&&A&&u(p)},[x,p,A,u]),l.useEffect(()=>{E.current=p},[p]);const N=l.useMemo(()=>({activeIndex:g,containerId:h,disabled:C,disableTransforms:D,items:p,overIndex:y,useDragOverlay:m,sortedRects:qa(p,d),strategy:i}),[g,h,C.draggable,C.droppable,D,p,y,d,m,i]);return se.createElement(Gr.Provider,{value:N},t)}const Qa=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Nn(n,r,i).indexOf(t)},Ja=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:s,previousItems:a,previousContainerId:d,transition:f}=e;return!f||!r||a!==o&&i===s?!1:n?!0:s!==i&&t===d},_a={duration:200,easing:"ease"},Xr="transform",Za=Ot.Transition.toString({property:Xr,duration:0,easing:"linear"}),es={roleDescription:"sortable"};function ts(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,s]=l.useState(null),a=l.useRef(n);return Ae(()=>{if(!t&&n!==a.current&&r.current){const d=i.current;if(d){const f=st(r.current,{ignoreTransform:!0}),u={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(u.x||u.y)&&s(u)}}n!==a.current&&(a.current=n)},[t,n,r,i]),l.useEffect(()=>{o&&s(null)},[o]),o}function ns(e){let{animateLayoutChanges:t=Ja,attributes:n,disabled:r,data:i,getNewIndex:o=Qa,id:s,strategy:a,resizeObserverConfig:d,transition:f=_a}=e;const{items:u,containerId:h,activeIndex:m,disabled:p,disableTransforms:A,sortedRects:g,overIndex:y,useDragOverlay:E,strategy:x}=l.useContext(Gr),D=rs(r,p),C=u.indexOf(s),N=l.useMemo(()=>({sortable:{containerId:h,index:C,items:u},...i}),[h,i,C,u]),R=l.useMemo(()=>u.slice(u.indexOf(s)),[u,s]),{rect:M,node:b,isOver:S,setNodeRef:k}=$a({id:s,data:N,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...d}}),{active:O,activatorEvent:F,activeNodeRect:Q,attributes:X,setNodeRef:K,listeners:Se,isDragging:J,over:ee,setActivatorNodeRef:H,transform:te}=za({id:s,data:N,attributes:{...es,...n},disabled:D.draggable}),ce=mo(k,K),q=!!O,V=q&&!A&&It(m)&&It(y),ie=!E&&J,xe=ie&&V?te:null,B=V?xe??(a??x)({rects:g,activeNodeRect:Q,activeIndex:m,overIndex:y,index:C}):null,U=It(m)&&It(y)?o({id:s,items:u,activeIndex:m,overIndex:y}):C,Y=O?.id,v=l.useRef({activeId:Y,items:u,newIndex:U,containerId:h}),I=u!==v.current.items,P=t({active:O,containerId:h,isDragging:J,isSorting:q,id:s,index:C,items:u,newIndex:v.current.newIndex,previousItems:v.current.items,previousContainerId:v.current.containerId,transition:f,wasDragging:v.current.activeId!=null}),G=ts({disabled:!P,index:C,node:b,rect:M});return l.useEffect(()=>{q&&v.current.newIndex!==U&&(v.current.newIndex=U),h!==v.current.containerId&&(v.current.containerId=h),u!==v.current.items&&(v.current.items=u)},[q,U,h,u]),l.useEffect(()=>{if(Y===v.current.activeId)return;if(Y!=null&&v.current.activeId==null){v.current.activeId=Y;return}const fe=setTimeout(()=>{v.current.activeId=Y},50);return()=>clearTimeout(fe)},[Y]),{active:O,activeIndex:m,attributes:X,data:N,rect:M,index:C,newIndex:U,items:u,isOver:S,isSorting:q,isDragging:J,listeners:Se,node:b,overIndex:y,over:ee,setNodeRef:ce,setActivatorNodeRef:H,setDroppableNodeRef:k,setDraggableNodeRef:K,transform:G??B,transition:_()};function _(){if(G||I&&v.current.newIndex===C)return Za;if(!(ie&&!Cn(F)||!f)&&(q||P))return Ot.Transition.toString({...f,property:Xr})}}function rs(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}j.Down,j.Right,j.Up,j.Left;const is=T(L)`
    width: 150px;
    height: 32px;
    background-color: ${({theme:e})=>e.colors.Background.Section.default};
    border-radius: 6px;
    padding: 3px 10px;
    flex-shrink: 0;
`;function os({year:e,semester:t,setYear:n,setSemester:r,setCurrentTimetableId:i}){const o=We(),{query:s}=ue("GET","/semesters");l.useEffect(()=>{const h=s.data?.semesters;if(h&&h.length>0){const m=h[h.length-1];m&&(n(m.year),r(m.semester))}},[s.data]);const{isFirstSemester:a,isLastSemester:d}=l.useMemo(()=>{if(!s.data)return{isFirstSemester:!1,isLastSemester:!1};const h=s.data.semesters,m=h[0],p=h[h.length-1];return!m||!p?{isFirstSemester:!0,isLastSemester:!0}:{isFirstSemester:e===m.year&&t===m.semester,isLastSemester:e===p.year&&t===p.semester}},[s.data,e,t]),f=()=>{a||(t===Ve.SPRING?(r(Ve.FALL),n(e-1)):r(Ve.SPRING),i(null))},u=()=>{d||(t===Ve.FALL?(r(Ve.SPRING),n(e+1)):r(Ve.FALL),i(null))};return w(is,{direction:"row",gap:0,justify:"space-between",align:"center",children:[c(nt,{onClick:a?void 0:f,styles:{padding:2.5},children:c(re,{size:20,color:a?o.colors.Text.disable:o.colors.Highlight.default,onClick:a?void 0:()=>{},children:c(Li,{})})}),c(z,{color:"Highlight.default",children:e}),c(z,{color:"Highlight.default",children:ln(t)}),c(nt,{onClick:d?void 0:u,styles:{padding:2.5},children:c(re,{size:20,color:d?o.colors.Text.disable:o.colors.Highlight.default,onClick:d?void 0:()=>{},children:c(ki,{})})})]})}const Kr=T.div`
    display: inline-flex;
    padding: 5px 12px;
    justify-content: center;
    align-items: center;
    border-top-right-radius: 12px;
    border-top-left-radius: 12px;
    font-size: 14px;
    line-height: 17.5px;
    font-weight: 400;
`,as=T(Kr)`
    color: ${({theme:e})=>e.colors.Text.lighter};
    background-color: ${({theme:e})=>e.colors.Background.Tab.dark};
    cursor: pointer;

    &:hover {
        background-color: ${({theme:e})=>e.colors.Background.Tab.darker};
    }
`,ss=T(Kr)`
    color: ${({theme:e})=>e.colors.Highlight.default};
    background-color: ${({theme:e})=>e.colors.Background.Tab.default};
    cursor: pointer;
`,ls={default:as,selected:ss},cs=T.div`
    width: 100%;
    height: 100%;
    justify-content: center;
    align-items: center;
    gap: 6px;
    display: inline-flex;
    white-space: nowrap;
`,ds=e=>c(cs,{children:e}),gn=({type:e="default",children:t=void 0,buttonRef:n,...r})=>{const i=ls[e],o=()=>ds(t);return c(i,{ref:n,...r,onClick:r.onClick,children:c(o,{})})},us=T(L)`
    width: 100%;
    max-width: 890px;

    ${W.laptop} {
        max-width: 565px;
    }

    ${W.tablet} {
        max-width: 100%;
    }
`,hs=T(L)`
    overflow-x: auto;
    scrollbar-width: none;

    &::-webkit-scrollbar {
        display: none;
    }
`,fs=T(z)`
    outline: none;
    user-select: none;
`,ps=({timetable:e,isSelected:t,onClick:n,onCopy:r,onDelete:i,onNameChange:o,isDragging:s})=>{const a=We(),{attributes:d,listeners:f,setNodeRef:u,transform:h,transition:m}=ns({id:e.id}),A={transform:(g=>{if(!g)return"";const{x:y,y:E}=g;return`translate3d(${y}px, ${E}px, 0)`})(h),transition:m,touchAction:"none",opacity:s?.5:1};return c("div",{ref:u,style:A,...d,...f,children:w(gn,{type:t?"selected":"default",onClick:n,children:[c(fs,{onClick:g=>{t&&(g.stopPropagation(),g.currentTarget.contentEditable="true",g.currentTarget.focus())},onBlur:g=>{const y=g.currentTarget.textContent||"";g.currentTarget.contentEditable="false",o(e.id,y)},onKeyDown:g=>{g.key==="Enter"&&(g.preventDefault(),g.currentTarget.blur())},contentEditable:!1,suppressContentEditableWarning:!0,type:"Normal",color:t?"Highlight.default":"Text.lighter",style:{paddingTop:4,paddingBottom:3.5},children:e.name?e.name:"No Title"}),w(L,{direction:"row",gap:0,align:"center",children:[t&&c(nt,{onClick:r,styles:{padding:5},children:c(re,{size:15,onClick:()=>{},color:t?a.colors.Highlight.default:a.colors.Text.lighter,children:c(xn,{})})}),c(nt,{onClick:i,styles:{padding:3.75},children:c(re,{size:17.5,onClick:()=>{},color:t?a.colors.Highlight.default:a.colors.Text.lighter,children:c(sn,{})})})]})]})})},ar=({timeTableLectures:e,currentTimetableId:t,setCurrentTimetableId:n,setCurrentTimetableName:r,year:i,semester:o,setYear:s,setSemester:a})=>{const{t:d}=Ie(),{status:f}=Et(),u=We(),{query:h,setParams:m}=ue("GET","/timetables"),{requestFunction:p}=ue("POST","/timetables",{onSuccess:b=>{h.refetch(),n(b.id)}}),{requestFunction:A}=ue("DELETE","/timetables",{onMutate:b=>{t===b.id&&n(null)},onSuccess:()=>{h.refetch()}}),{requestFunction:g}=ue("PATCH","/timetables",{onSuccess:()=>{h.refetch()}}),[y,E]=l.useState([]),[x,D]=l.useState(null),C=No(Xn(In,{activationConstraint:{distance:8}}),Xn($r,{activationConstraint:{delay:500,tolerance:5}}));l.useEffect(()=>{let b=h.data?.timetables??[];b=b.filter(S=>S.year===i&&S.semester===o),E(b.slice().sort((S,k)=>S.timeTableOrder-k.timeTableOrder)),t!=null&&h.data?.timetables.forEach(S=>{S.id===t&&r(S.name)})},[h.data,i,o]),l.useEffect(()=>{f==="success"&&i!==-1&&o>0&&m({year:i,semester:o})},[i,o,f]),l.useEffect(()=>{r(t==null?d("timetable.myTimetable"):y.find(b=>b.id===t)?.name||"")},[t]);const N=b=>{D(b.active.id)},R=b=>{const{active:S,over:k}=b;if(D(null),k&&S.id!==k.id){const O=y.findIndex(K=>K.id===S.id),F=y.findIndex(K=>K.id===k.id),Q=Nn(y,O,F);E(Q);const X=S.id;g({id:X,order:F})}},M=b=>{if(b.deltaY===0)return;const S=b.currentTarget;S.scrollLeft=S.scrollLeft+b.deltaY};return w(us,{direction:"row",justify:"space-between",align:"stretch",flex:"0 1 auto",gap:4,style:{overflowX:"hidden"},children:[w(L,{direction:"row",gap:3,flex:"0 1 auto",style:{overflowX:"auto"},children:[w(gn,{type:t==null?"selected":"default",onClick:()=>{n(null)},children:[c(z,{type:"Normal",color:t===null?"Highlight.default":"Text.lighter",style:{paddingTop:4,paddingBottom:3.5},children:d("timetable.myTimetable")}),t===null&&f==="success"&&c(nt,{onClick:b=>{b.stopPropagation(),p({year:i,semester:o,lectureIds:e.map(S=>S.id)})},styles:{padding:5},children:c(re,{size:15,color:u.colors.Highlight.default,onClick:()=>{},children:c(xn,{})})})]},"my-timetable"),f==="success"&&w(hs,{direction:"row",gap:3,flex:"1 1 auto",onWheel:M,children:[c(ka,{sensors:C,collisionDetection:Bo,onDragStart:N,onDragEnd:R,modifiers:[ja,Ha],children:c(Ka,{items:y.map(b=>b.id),strategy:Ga,children:y.map(b=>c(ps,{timetable:b,isSelected:t===b.id,isDragging:x===b.id,onClick:()=>{n(b.id)},onCopy:S=>{S.stopPropagation(),p({year:i,semester:o,lectureIds:e.map(k=>k.id)})},onDelete:S=>{S.stopPropagation(),A({id:b.id})},onNameChange:(S,k)=>{E(O=>O.map(F=>F.id===S?{...F,name:k}:F)),g({id:S,name:k})}},b.id))})}),c(gn,{onClick:()=>{p({year:i,semester:o,lectureIds:[]})},children:c(nt,{onClick:b=>{},styles:{padding:3.75},children:c(re,{size:17.5,color:u.colors.Text.default,onClick:()=>{},children:c(yn,{})})})})]})]}),c(L,{direction:"row",gap:0,align:"center",children:c(os,{year:i,semester:o,setYear:s,setSemester:a,setCurrentTimetableId:n})})]})},gs=T.div`
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4px 16px;

    ${W.tablet} {
        grid-template-columns: 1fr 1fr 1fr;
        gap: 4px 8px;
    }
`,Xe=T.div`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
    padding-left: 16px;
    color: ${({theme:e})=>e.colors.Text.default};

    &:hover {
        color: ${({theme:e})=>e.colors.Highlight.default};
    }

    ${W.tablet} {
        padding-left: 0;
    }
`,Ke=T.span`
    font-size: 14px;
    font-weight: 700;
    white-space: nowrap;

    ${W.mobile} {
        font-size: 12px;
    }
`,Qe=T.span`
    font-size: 14px;
    font-weight: 400;
    padding-left: 8px;
    white-space: nowrap;

    ${W.mobile} {
        font-size: 12px;
    }
`,Je=T.span`
    font-size: 14px;
    font-weight: 400;
    padding-left: 2px;
    color: ${({theme:e})=>e.colors.Highlight.default};

    ${W.mobile} {
        display: none;
    }
`;function ms({hover:e,setHover:t,timetableLectures:n}){const{t:r}=Ie(),{lecturesByType:i,creditsByType:o}=l.useMemo(()=>{const d={basicRequired:0,basicElective:0,majorRequired:0,majorElective:0,humanitiesSocial:0,etc:0},f={basicRequired:[],basicElective:[],majorRequired:[],majorElective:[],humanitiesSocial:[],etc:[]};return n.forEach(u=>{u.type.includes("기초필수")?(d.basicRequired+=u.credit,f.basicRequired.push(u)):u.type.includes("기초선택")?(d.basicElective+=u.credit,f.basicElective.push(u)):u.type.includes("전공필수")?(d.majorRequired+=u.credit,f.majorRequired.push(u)):u.type.includes("전공선택")?(d.majorElective+=u.credit,f.majorElective.push(u)):u.type.includes("인문")?(d.humanitiesSocial+=u.credit,f.humanitiesSocial.push(u)):(d.etc+=u.credit,d.etc+=u.creditAU,f.etc.push(u))}),{lecturesByType:f,creditsByType:d}},[n]);function s(d){for(const f of["basicRequired","basicElective","majorRequired","majorElective","humanitiesSocial","etc"])if(d.type.includes(r(`common.type.${f}`)))return f;return"etc"}function a(d,f){if(!e||e.length==0||e?.length>1)return"";const u=e[0];return d.map(m=>m.id).includes(u.id)?`(${u.creditAU?u.creditAU:u.credit})`:f===s(u)?`(+${u.creditAU?u.creditAU:u.credit})`:""}return w(gs,{children:[w(Xe,{onMouseEnter:()=>t(i.basicRequired),onMouseLeave:()=>t(null),children:[c(Ke,{children:r("common.type.basicRequiredShort")}),c(Qe,{children:o.basicRequired}),c(Je,{children:a(i.basicRequired,"basicRequired")})]}),w(Xe,{onMouseEnter:()=>t(i.basicElective),onMouseLeave:()=>t(null),children:[c(Ke,{children:r("common.type.basicElectiveShort")}),c(Qe,{children:o.basicElective}),c(Je,{children:a(i.basicElective,"basicElective")})]}),w(Xe,{onMouseEnter:()=>t(i.majorRequired),onMouseLeave:()=>t(null),children:[c(Ke,{children:r("common.type.majorRequiredShort")}),c(Qe,{children:o.majorRequired}),c(Je,{children:a(i.majorRequired,"majorRequired")})]}),w(Xe,{onMouseEnter:()=>t(i.majorElective),onMouseLeave:()=>t(null),children:[c(Ke,{children:r("common.type.majorElectiveShort")}),c(Qe,{children:o.majorElective}),c(Je,{children:a(i.majorElective,"majorElective")})]}),w(Xe,{onMouseEnter:()=>t(i.humanitiesSocial),onMouseLeave:()=>t(null),children:[c(Ke,{children:r("common.type.humanitiesSocialElectiveShort")}),c(Qe,{children:o.humanitiesSocial}),c(Je,{children:a(i.humanitiesSocial,"humanitiesSocial")})]}),w(Xe,{onMouseEnter:()=>t(i.etc),onMouseLeave:()=>t(null),children:[c(Ke,{children:r("common.type.etcShort")}),c(Qe,{children:o.etc}),c(Je,{children:a(i.etc,"etc")})]})]})}const vs=T.div`
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 48px;

    ${W.mobile} {
        gap: 20px;
    }
`,sr=T.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    color: ${({theme:e,highlighted:t})=>t?e.colors.Highlight.default:e.colors.Text.default};

    &:hover {
        color: ${({theme:e})=>e.colors.Highlight.default};
    }
`,lr=T.span`
    font-size: 20px;
    font-weight: 300;
`,cr=T.span`
    font-size: 10px;
    font-weight: 400;
`,bs=T.div`
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 48px;

    ${W.mobile} {
        gap: 20px;
    }
`,Zt=T.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
`,en=T.span`
    font-size: 20px;
    font-weight: 300;
    color: ${({theme:e})=>e.colors.Text.default};
`,tn=T.span`
    font-size: 10px;
    font-weight: 400;
    color: ${({theme:e})=>e.colors.Text.dark};
`;function ys({timetableLectures:e,hover:t,setHover:n}){const{t:r}=Ie(),i=l.useMemo(()=>{let o=e.reduce((h,m)=>h+m.credit,0),s=e.reduce((h,m)=>h+m.creditAU,0);if(t&&t.length==1){const h=t[0];e.some(m=>m.id===h.id)||(o+=h.credit,s+=h.creditAU)}let a=0,d=0,f=0,u=e.length;return e.forEach(h=>{a+=h.averageGrade,d+=h.averageLoad,f+=h.averageSpeech,h.averageGrade===0&&h.averageLoad===0&&h.averageSpeech===0&&(u-=1)}),a=a/u,d=d/u,f=f/u,{totalCredits:o,totalAU:s,avgGrade:a,avgLoad:d,avgSpeech:f}},[e,t]);return w(tt,{children:[w(vs,{children:[w(sr,{onMouseEnter:()=>n(e.filter(o=>o.credit>0)),onMouseLeave:()=>n(null),highlighted:t!==null&&t.some(o=>o.credit>0),children:[c(lr,{children:i.totalCredits}),c(cr,{children:r("common.credit")})]}),w(sr,{onMouseEnter:()=>n(e.filter(o=>o.creditAU>0)),onMouseLeave:()=>n(null),highlighted:t!==null&&t.some(o=>o.creditAU>0),children:[c(lr,{children:i.totalAU}),c(cr,{children:"AU"})]})]}),w(bs,{children:[w(Zt,{children:[c(en,{children:Ze(i.avgGrade/3)}),c(tn,{children:r("common.grade")})]}),w(Zt,{children:[c(en,{children:Ze(i.avgLoad/3)}),c(tn,{children:r("common.load")})]}),w(Zt,{children:[c(en,{children:Ze(i.avgSpeech/3)}),c(tn,{children:r("common.speech")})]})]})]})}const ws=T(L)`
    overflow-y: auto;
    min-height: 0;
`,xs=T.div`
    display: flex;
    flex-direction: row;
    gap: 8px;
    align-items: flex-start;
`,Es=T.span`
    font-size: 14px;
    font-weight: 400;
    color: ${({color:e,theme:t})=>e||t.colors.Text.default};
    min-width: 16px;
`,Ts=T(L)`
    color: ${({highlighted:e,theme:t})=>e?t.colors.Highlight.default:t.colors.Text.default};

    &:hover {
        color: ${({theme:e})=>e.colors.Highlight.default};
    }
`,Ss=[{day:Re.Mon,color:"#E54C65"},{day:Re.Tue,color:"#F5A623"},{day:Re.Wed,color:"#7ED321"},{day:Re.Thu,color:"#4A90D9"},{day:Re.Fri,color:"#9B59B6"}];function Cs({timetableLectures:e,hover:t,setHover:n}){const{t:r}=Ie(),i=l.useMemo(()=>{const o={[Re.Mon]:[],[Re.Tue]:[],[Re.Wed]:[],[Re.Thu]:[],[Re.Fri]:[]};if(e.forEach(s=>{s.examTimes.forEach(a=>{if(a==null)return;const d=a.day;o[d]&&o[d].push({lectureName:s.name,lectureId:s.id,time:a.str.split(" ").slice(1).join(" ")})})}),t&&t.length==1){const s=t[0];e.some(a=>a.id===s.id)||s.examTimes.forEach(a=>{if(a==null)return;const d=a.day;o[d]&&o[d].push({lectureName:s.name,lectureId:s.id,time:a.str})})}return o},[e,t]);return w(ws,{direction:"column",gap:15,style:{width:"100%"},flex:"1 1 0",children:[c(z,{type:"NormalBold",color:"Text.default",children:r("timetable.examTimetable")}),Ss.map(({day:o,color:s})=>{const a=i[o];return!a||a.length===0?null:w(xs,{children:[c(Es,{color:s,onMouseEnter:()=>{n(e.filter(d=>d.examTimes.some(f=>f?.day===o)))},onMouseLeave:()=>n(null),children:yi(o,!0)}),c(L,{direction:"column",gap:2,children:a.sort((d,f)=>d.time.localeCompare(f.time)).map((d,f)=>w(Ts,{direction:"column",gap:0,highlighted:t?.some(u=>u.id===d.lectureId),onMouseEnter:()=>n(e.filter(u=>u.id===d.lectureId)),onMouseLeave:()=>n(null),children:[c(z,{type:"NormalBold",children:d.lectureName}),c(z,{type:"Normal",children:d.time})]},f))})]},o)})]})}const Ds=e=>[e?.red?.[1],e?.red?.[2],e?.orange?.[1],e?.orange?.[2],e?.yellow?.[1],e?.yellow?.[2],e?.green?.[1],e?.green?.[2],e?.green?.[3],e?.blue?.[1],e?.blue?.[2],e?.purple?.[1],e?.purple?.[2],e?.pink?.[1],e?.pink?.[2]].map(t=>t??"#CCCCCC"),Rs=T.div`
    width: 100%;
    height: 220px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;

    &::before {
        content: "";
        position: absolute;
        width: 100%;
        height: 100%;
        background-image: url("/campus_map.png");
        background-size: cover;
        background-position: center;
        opacity: 0.8;
    }
`,As=T.div`
    display: flex;
    gap: 4px;
    align-items: center;
    background-color: ${({theme:e})=>e.colors.Background.Section.default};
    left: ${({left:e})=>e}%;
    top: ${({top:e})=>e}%;
    position: absolute;
    font-size: 10px;
    color: ${({theme:e,highlighted:t})=>t?e.colors.Highlight.default:e.colors.Text.default};
    border-radius: 4px;
    padding: 2px 4px;
`,Is=T.div`
    width: 0;
    height: 0;
    border-left: 3px solid transparent;
    border-right: 3px solid transparent;
    border-top: 6px solid ${({theme:e})=>e.colors.Background.Section.default};
    position: absolute;
    top: 17px;
`,Ns=T.div`
    background-color: ${({theme:e,courseId:t,highlighted:n})=>n?e.colors.Highlight.default:(()=>{const r=Ds(e.colors?.Tile?.TimeTable?.default);return r[t%r.length]})()};
    width: 10px;
    height: 10px;
    border-radius: 100%;
`,Ms=new Map([["E2",{left:52,top:70}],["E3",{left:59,top:64}],["E6",{left:60,top:52}],["E7",{left:69,top:50}],["E11",{left:45,top:47}],["E16",{left:45,top:38}],["N1",{left:80,top:28}],["N3",{left:45,top:34}],["N4",{left:54,top:30}],["N5",{left:66,top:28}],["N7",{left:25,top:30}],["N22",{left:71,top:24}],["N24",{left:68,top:20}],["N25",{left:51,top:25}],["N27",{left:49,top:13}],["W1",{left:26,top:73}],["W8",{left:27,top:44}],["W16",{left:35,top:76}]]);function Ls({timetableLectures:e,hover:t,setHover:n}){return c(Rs,{children:Array.from(Ms).map(([r,{left:i,top:o}])=>{const s=e.filter(a=>a.classes.some(d=>d.buildingCode.includes(r)));return t?.forEach(a=>{e.includes(a)||a.classes.some(d=>d.buildingCode.includes(r))&&s.push(a)}),s.length===0?null:w(As,{left:i,top:o,onMouseEnter:()=>{n(s)},onMouseLeave:()=>{n(null)},highlighted:t?.some(a=>s.includes(a))??!1,children:[c(Is,{}),r,s.map(a=>c(Ns,{courseId:a.courseId,highlighted:t?.includes(a)??!1},a.id))]},r)})})}var ht={},dr;function ks(){return dr||(dr=1,ht.createCanvas=function(e,t){return Object.assign(document.createElement("canvas"),{width:e,height:t})},ht.createImageData=function(e,t,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,t);default:return new ImageData(e,t,n)}},ht.loadImage=function(e,t){return new Promise(function(n,r){const i=Object.assign(document.createElement("img"),t);function o(){i.onload=null,i.onerror=null}i.onload=function(){o(),n(i)},i.onerror=function(){o(),r(new Error('Failed to load the image "'+e+'"'))},i.src=e})}),ht}var ur=ks(),Mn=(e=>(e.DAILY="DAILY",e.HOURLY="HOURLY",e.MINUTELY="MINUTELY",e.MONTHLY="MONTHLY",e.SECONDLY="SECONDLY",e.WEEKLY="WEEKLY",e.YEARLY="YEARLY",e))(Mn||{}),mn=(e=>(e.FR="FR",e.MO="MO",e.SA="SA",e.SU="SU",e.TH="TH",e.TU="TU",e.WE="WE",e))(mn||{});function we(e,t,n){if(Array.isArray(t))e.x=t.map(r=>{if(Array.isArray(r))return r;if(typeof r.key!="string"||typeof r.value!="string")throw new Error("Either key or value is not a string!");if(r.key.substr(0,2)!=="X-")throw new Error("Key has to start with `X-`!");return[r.key,r.value]});else if(typeof t=="object")e.x=Object.entries(t).map(([r,i])=>{if(typeof r!="string"||typeof i!="string")throw new Error("Either key or value is not a string!");if(r.substr(0,2)!=="X-")throw new Error("Key has to start with `X-`!");return[r,i]});else if(typeof t=="string"&&typeof n=="string"){if(t.substr(0,2)!=="X-")throw new Error("Key has to start with `X-`!");e.x.push([t,n])}else return e.x.map(r=>({key:r[0],value:r[1]}))}function Me(e,t){if(e instanceof Date&&isNaN(e.getTime())||typeof e=="string"&&isNaN(new Date(e).getTime()))throw new Error(`\`${t}\` has to be a valid date!`);if(e instanceof Date||typeof e=="string"||jt(e)&&e.isValid===!0||(Wt(e)||Bs(e))&&e.isValid())return e;throw new Error(`\`${t}\` has to be a valid date!`)}function ye(e,t){let n=Object.values(e),r=String(t).toUpperCase();if(!r||!n.includes(r))throw new Error(`Input must be one of the following: ${n.join(", ")}`);return r}function xt(e,t){let n=null;if(typeof t=="string"){let r=t.match(/^(.+) ?<([^>]+)>$/);r?n={email:r[2].trim(),name:r[1].trim()}:t.includes("@")&&(n={email:t.trim(),name:t.trim()})}else typeof t=="object"&&(n={email:t.email,mailto:t.mailto,name:t.name,sentBy:t.sentBy});if(!n&&typeof t=="string")throw new Error("`"+e+"` isn't formated correctly. See https://sebbo2002.github.io/ical-generator/develop/reference/interfaces/ICalOrganizer.html");if(!n)throw new Error("`"+e+"` needs to be a valid formed string or an object. See https://sebbo2002.github.io/ical-generator/develop/reference/interfaces/ICalOrganizer.html");if(!n.name)throw new Error("`"+e+".name` is empty!");if(!n.email)throw new Error("`"+e+".email` is empty!");return n}function $(e,t){return String(e).replace(t?/[\\"]/g:/[\\;,]/g,function(n){return"\\"+n}).replace(/(?:\r\n|\r|\n)/g,"\\n")}function Os(e){return e.split(`\r
`).map(function(t){let n="",r=0;for(let i=0;i<t.length;i++){let o=t.charAt(i);o>="\uD800"&&o<="\uDBFF"&&(o+=t.charAt(++i));let s=new TextEncoder().encode(o).length;r+=s,r>74&&(n+=`\r
 `,r=s),n+=o}return n}).join(`\r
`)}function Ee(e,t,n,r){if(e?.startsWith("/")&&(e=e.substr(1)),typeof t=="string"||t instanceof Date){let i=Ps(t)?t.withTimeZone(e):new Date(t),o=i.getUTCFullYear()+String(i.getUTCMonth()+1).padStart(2,"0")+i.getUTCDate().toString().padStart(2,"0");return e&&(o=i.getFullYear()+String(i.getMonth()+1).padStart(2,"0")+i.getDate().toString().padStart(2,"0")),n?o:e?(o+="T"+i.getHours().toString().padStart(2,"0")+i.getMinutes().toString().padStart(2,"0")+i.getSeconds().toString().padStart(2,"0"),o):(o+="T"+i.getUTCHours().toString().padStart(2,"0")+i.getUTCMinutes().toString().padStart(2,"0")+i.getUTCSeconds().toString().padStart(2,"0")+(r?"":"Z"),o)}else if(Wt(t)){let i=e?hr(t)&&!t.tz()?t.clone().tz(e):t:r||n&&hr(t)&&t.tz()?t:t.utc();return i.format("YYYYMMDD")+(n?"":"T"+i.format("HHmmss")+(r||e?"":"Z"))}else if(jt(t)){let i=e?t.setZone(e):r||n&&t.zone.type!=="system"?t:t.setZone("utc");return i.toFormat("yyyyLLdd")+(n?"":"T"+i.toFormat("HHmmss")+(r||e?"":"Z"))}else{let i=t;if(e)i=typeof t.tz=="function"?t.tz(e):t;else if(!r)if(typeof t.utc=="function")i=t.utc();else throw new Error("Unable to convert dayjs object to UTC value: UTC plugin is not available!");return i.format("YYYYMMDD")+(n?"":"T"+i.format("HHmmss")+(r||e?"":"Z"))}}function nn(e,t,n,r){let i="",o=r?.floating||!1;return r?.timezone&&(i=";TZID="+r.timezone,o=!0),t+i+":"+Ee(e,n,!1,o)}function Ln(e){let t=e.x.map(([n,r])=>n.toUpperCase()+":"+$(r,!1)).join(`\r
`);return t.length?t+`\r
`:""}function Bs(e){return typeof e=="object"&&e!==null&&!(e instanceof Date)&&!Wt(e)&&!jt(e)}function jt(e){return typeof e=="object"&&e!==null&&"toJSDate"in e&&typeof e.toJSDate=="function"}function Wt(e){return e!=null&&e._isAMomentObject!=null}function zs(e){return e!==null&&typeof e=="object"&&"asSeconds"in e&&typeof e.asSeconds=="function"}function hr(e){return Wt(e)&&"tz"in e&&typeof e.tz=="function"}function rn(e){return e!==null&&typeof e=="object"&&"between"in e&&typeof e.between=="function"&&typeof e.toString=="function"}function Ps(e){return e instanceof Date&&"internal"in e&&e.internal instanceof Date&&"withTimeZone"in e&&typeof e.withTimeZone=="function"&&"tzComponents"in e&&typeof e.tzComponents=="function"}function fr(e){return typeof e=="string"||e instanceof Date?new Date(e):jt(e)?e.toJSDate():e.toDate()}function _e(e){let t="";return e<0&&(t="-",e*=-1),t+="P",e>=86400&&(t+=Math.floor(e/86400)+"D",e%=86400),!e&&t.length>1||(t+="T",e>=3600&&(t+=Math.floor(e/3600)+"H",e%=3600),e>=60&&(t+=Math.floor(e/60)+"M",e%=60),e>0?t+=e+"S":t.length<=2&&(t+="0S")),t}function Le(e){return e?typeof e=="string"?e:e.toJSON():null}var Qr=(e=>(e.CHAIR="CHAIR",e.NON="NON-PARTICIPANT",e.OPT="OPT-PARTICIPANT",e.REQ="REQ-PARTICIPANT",e))(Qr||{}),Jr=(e=>(e.CLIENT="CLIENT",e.NONE="NONE",e.SERVER="SERVER",e))(Jr||{}),_r=(e=>(e.ACCEPTED="ACCEPTED",e.DECLINED="DECLINED",e.DELEGATED="DELEGATED",e.NEEDSACTION="NEEDS-ACTION",e.TENTATIVE="TENTATIVE",e))(_r||{}),Zr=(e=>(e.GROUP="GROUP",e.INDIVIDUAL="INDIVIDUAL",e.RESOURCE="RESOURCE",e.ROOM="ROOM",e.UNKNOWN="UNKNOWN",e))(Zr||{}),Pt=class ke{data;parent;constructor(t,n){if(this.data={delegatedFrom:null,delegatedTo:null,email:"",mailto:null,name:null,role:"REQ-PARTICIPANT",rsvp:null,scheduleAgent:null,sentBy:null,status:null,type:null,x:[]},this.parent=n,!this.parent)throw new Error("`event` option required!");if(!t.email)throw new Error("No value for `email` in ICalAttendee given!");t.name!==void 0&&this.name(t.name),t.email!==void 0&&this.email(t.email),t.mailto!==void 0&&this.mailto(t.mailto),t.sentBy!==void 0&&this.sentBy(t.sentBy),t.status!==void 0&&this.status(t.status),t.role!==void 0&&this.role(t.role),t.rsvp!==void 0&&this.rsvp(t.rsvp),t.type!==void 0&&this.type(t.type),t.delegatedTo!==void 0&&this.delegatedTo(t.delegatedTo),t.delegatedFrom!==void 0&&this.delegatedFrom(t.delegatedFrom),t.delegatesTo&&this.delegatesTo(t.delegatesTo),t.delegatesFrom&&this.delegatesFrom(t.delegatesFrom),t.scheduleAgent!==void 0&&this.scheduleAgent(t.scheduleAgent),t.x!==void 0&&this.x(t.x)}delegatedFrom(t){return t===void 0?this.data.delegatedFrom:(t?typeof t=="string"?this.data.delegatedFrom=new ke(xt("delegatedFrom",t),this.parent):t instanceof ke?this.data.delegatedFrom=t:this.data.delegatedFrom=new ke(t,this.parent):this.data.delegatedFrom=null,this)}delegatedTo(t){return t===void 0?this.data.delegatedTo:t?(typeof t=="string"?this.data.delegatedTo=new ke(xt("delegatedTo",t),this.parent):t instanceof ke?this.data.delegatedTo=t:this.data.delegatedTo=new ke(t,this.parent),this.data.status="DELEGATED",this):(this.data.delegatedTo=null,this.data.status==="DELEGATED"&&(this.data.status=null),this)}delegatesFrom(t){let n=t instanceof ke?t:this.parent.createAttendee(t);return this.delegatedFrom(n),n.delegatedTo(this),n}delegatesTo(t){let n=t instanceof ke?t:this.parent.createAttendee(t);return this.delegatedTo(n),n.delegatedFrom(this),n}email(t){return t?(this.data.email=t,this):this.data.email}mailto(t){return t===void 0?this.data.mailto:(this.data.mailto=t||null,this)}name(t){return t===void 0?this.data.name:(this.data.name=t||null,this)}role(t){return t===void 0?this.data.role:(this.data.role=ye(Qr,t),this)}rsvp(t){return t===void 0?this.data.rsvp:t===null?(this.data.rsvp=null,this):(this.data.rsvp=!!t,this)}scheduleAgent(t){return t===void 0?this.data.scheduleAgent:t?typeof t=="string"&&t.toUpperCase().startsWith("X-")?(this.data.scheduleAgent=t,this):(this.data.scheduleAgent=ye(Jr,t),this):(this.data.scheduleAgent=null,this)}sentBy(t){return t?(this.data.sentBy=t,this):this.data.sentBy}status(t){return t===void 0?this.data.status:t?(this.data.status=ye(_r,t),this):(this.data.status=null,this)}toJSON(){return Object.assign({},this.data,{delegatedFrom:this.data.delegatedFrom?.email()||null,delegatedTo:this.data.delegatedTo?.email()||null,x:this.x()})}toString(){let t="ATTENDEE";if(!this.data.email)throw new Error("No value for `email` in ICalAttendee given!");return t+=";ROLE="+this.data.role,this.data.type&&(t+=";CUTYPE="+this.data.type),this.data.status&&(t+=";PARTSTAT="+this.data.status),this.data.rsvp!==null&&(t+=";RSVP="+this.data.rsvp.toString().toUpperCase()),this.data.sentBy!==null&&(t+=';SENT-BY="mailto:'+this.data.sentBy+'"'),this.data.delegatedTo&&(t+=';DELEGATED-TO="'+this.data.delegatedTo.email()+'"'),this.data.delegatedFrom&&(t+=';DELEGATED-FROM="'+this.data.delegatedFrom.email()+'"'),this.data.name&&(t+=';CN="'+$(this.data.name,!0)+'"'),this.data.email&&this.data.mailto&&(t+=";EMAIL="+$(this.data.email,!1)),this.data.scheduleAgent&&(t+=";SCHEDULE-AGENT="+this.data.scheduleAgent),this.data.x.length&&(t+=";"+this.data.x.map(([n,r])=>n.toUpperCase()+"="+$(r,!1)).join(";")),t+=":MAILTO:"+$(this.data.mailto||this.data.email,!1)+`\r
`,t}type(t){return t===void 0?this.data.type:t?(this.data.type=ye(Zr,t),this):(this.data.type=null,this)}x(t,n){if(t===void 0)return we(this.data);if(typeof t=="string"&&typeof n=="string")we(this.data,t,n);else if(typeof t=="object")we(this.data,t);else throw new Error("Either key or value is not a string!");return this}},kn=(e=>(e.audio="audio",e.display="display",e.email="email",e))(kn||{}),Us={end:"END",start:"START"},pr=class{data;event;constructor(e,t){if(this.data={attach:null,attendees:[],description:null,interval:null,relatesTo:null,repeat:null,summary:null,trigger:-600,type:"display",x:[]},this.event=t,!t)throw new Error("`event` option required!");e.type!==void 0&&this.type(e.type),"trigger"in e&&e.trigger!==void 0&&this.trigger(e.trigger),"triggerBefore"in e&&e.triggerBefore!==void 0&&this.triggerBefore(e.triggerBefore),"triggerAfter"in e&&e.triggerAfter!==void 0&&this.triggerAfter(e.triggerAfter),e.repeat&&this.repeat(e.repeat),e.attach!==void 0&&this.attach(e.attach),e.description!==void 0&&this.description(e.description),e.summary!==void 0&&this.summary(e.summary),e.attendees!==void 0&&this.attendees(e.attendees),e.x!==void 0&&this.x(e.x)}attach(e){if(e===void 0)return this.data.attach;if(!e)return this.data.attach=null,this;let t=null;if(typeof e=="string")t={mime:null,uri:e};else if(typeof e=="object")t={mime:e.mime||null,uri:e.uri};else throw new Error("`attachment` needs to be a valid formed string or an object. See https://sebbo2002.github.io/ical-generator/develop/reference/classes/ICalAlarm.html#attach");if(!t.uri)throw new Error("`attach.uri` is empty!");return this.data.attach={mime:t.mime,uri:t.uri},this}attendees(e){return e?(e.forEach(t=>this.createAttendee(t)),this):this.data.attendees}createAttendee(e){if(e instanceof Pt)return this.data.attendees.push(e),e;typeof e=="string"&&(e=xt("data",e));let t=new Pt(e,this);return this.data.attendees.push(t),t}description(e){return e===void 0?this.data.description:e?(this.data.description=e,this):(this.data.description=null,this)}relatesTo(e){if(e===void 0)return this.data.relatesTo;if(!e)return this.data.relatesTo=null,this;if(!Object.values(Us).includes(e))throw new Error("`relatesTo` is not correct, must be either `START` or `END`!");return this.data.relatesTo=e,this}repeat(e){if(e===void 0)return this.data.repeat;if(!e)return this.data.repeat=null,this;if(typeof e!="object")throw new Error("`repeat` is not correct, must be an object!");if(typeof e.times!="number"||!isFinite(e.times))throw new Error("`repeat.times` is not correct, must be numeric!");if(typeof e.interval!="number"||!isFinite(e.interval))throw new Error("`repeat.interval` is not correct, must be numeric!");return this.data.repeat=e,this}summary(e){return e===void 0?this.data.summary:e?(this.data.summary=e,this):(this.data.summary=null,this)}toJSON(){let e=this.trigger();return Object.assign({},this.data,{trigger:typeof e=="number"?e:Le(e),x:this.x()})}toString(){let e=`BEGIN:VALARM\r
`;if(e+="ACTION:"+this.data.type.toUpperCase()+`\r
`,typeof this.data.trigger=="number"&&this.data.relatesTo===null?this.data.trigger>0?e+="TRIGGER;RELATED=END:"+_e(this.data.trigger)+`\r
`:e+="TRIGGER:"+_e(this.data.trigger)+`\r
`:typeof this.data.trigger=="number"?e+="TRIGGER;RELATED="+this.data.relatesTo?.toUpperCase()+":"+_e(this.data.trigger)+`\r
`:e+="TRIGGER;VALUE=DATE-TIME:"+Ee(this.event.timezone(),this.data.trigger)+`\r
`,this.data.repeat){if(!this.data.repeat.times)throw new Error("No value for `repeat.times` in ICalAlarm given, but required for `interval`!");if(!this.data.repeat.interval)throw new Error("No value for `repeat.interval` in ICalAlarm given, but required for `repeat`!");e+="REPEAT:"+this.data.repeat.times+`\r
`,e+="DURATION:"+_e(this.data.repeat.interval)+`\r
`}return this.data.type==="audio"&&this.data.attach&&this.data.attach.mime?e+="ATTACH;FMTTYPE="+$(this.data.attach.mime,!1)+":"+$(this.data.attach.uri,!1)+`\r
`:this.data.type==="audio"&&this.data.attach?e+="ATTACH;VALUE=URI:"+$(this.data.attach.uri,!1)+`\r
`:this.data.type==="audio"&&(e+=`ATTACH;VALUE=URI:Basso\r
`),this.data.type!=="audio"&&this.data.description?e+="DESCRIPTION:"+$(this.data.description,!1)+`\r
`:this.data.type!=="audio"&&(e+="DESCRIPTION:"+$(this.event.summary(),!1)+`\r
`),this.data.type==="email"&&this.data.summary?e+="SUMMARY:"+$(this.data.summary,!1)+`\r
`:this.data.type==="email"&&(e+="SUMMARY:"+$(this.event.summary(),!1)+`\r
`),this.data.type==="email"&&this.data.attendees.forEach(t=>{e+=t.toString()}),e+=Ln(this.data),e+=`END:VALARM\r
`,e}trigger(e){if(e===void 0&&typeof this.data.trigger=="number")return-1*this.data.trigger;if(e===void 0)return this.data.trigger;if(typeof e=="number"&&isFinite(e))this.data.trigger=-1*e;else{if(!e||typeof e=="number")throw new Error("`trigger` is not correct, must be a finite number or a supported date!");this.data.trigger=Me(e,"trigger")}return this}triggerAfter(e){return e===void 0?this.data.trigger:this.trigger(typeof e=="number"?-1*e:e)}triggerBefore(e){return e===void 0?this.trigger():this.trigger(e)}type(e){if(e===void 0)return this.data.type;if(!e||!Object.keys(kn).includes(e))throw new Error("`type` is not correct, must be either `display` or `audio`!");return this.data.type=e,this}x(e,t){if(e===void 0)return we(this.data);if(typeof e=="string"&&typeof t=="string")we(this.data,e,t);else if(typeof e=="object")we(this.data,e);else throw new Error("Either key or value is not a string!");return this}},gr=class{data;constructor(e){if(this.data={name:""},!e.name)throw new Error("No value for `name` in ICalCategory given!");this.name(e.name)}name(e){return e===void 0?this.data.name:(this.data.name=e,this)}toJSON(){return Object.assign({},this.data)}toString(){return $(this.data.name,!1)}},ei=(e=>(e.BUSY="BUSY",e.FREE="FREE",e.OOF="OOF",e.TENTATIVE="TENTATIVE",e))(ei||{}),ti=(e=>(e.CONFIDENTIAL="CONFIDENTIAL",e.PRIVATE="PRIVATE",e.PUBLIC="PUBLIC",e))(ti||{}),ni=(e=>(e.CANCELLED="CANCELLED",e.CONFIRMED="CONFIRMED",e.TENTATIVE="TENTATIVE",e))(ni||{}),ri=(e=>(e.OPAQUE="OPAQUE",e.TRANSPARENT="TRANSPARENT",e))(ri||{}),mr=class{calendar;data;constructor(e,t){if(this.data={alarms:[],allDay:!1,attachments:[],attendees:[],busystatus:null,categories:[],class:null,created:null,description:null,end:null,floating:!1,id:crypto.randomUUID(),lastModified:null,location:null,organizer:null,priority:null,recurrenceId:null,repeating:null,sequence:0,stamp:new Date,start:new Date,status:null,summary:"",timezone:null,transparency:null,url:null,x:[]},this.calendar=t,!t)throw new Error("`calendar` option required!");e.id&&this.id(e.id),e.sequence!==void 0&&this.sequence(e.sequence),e.start&&this.start(e.start),e.end!==void 0&&this.end(e.end),e.recurrenceId!==void 0&&this.recurrenceId(e.recurrenceId),e.timezone!==void 0&&this.timezone(e.timezone),e.stamp!==void 0&&this.stamp(e.stamp),e.allDay!==void 0&&this.allDay(e.allDay),e.floating!==void 0&&this.floating(e.floating),e.repeating!==void 0&&this.repeating(e.repeating),e.summary!==void 0&&this.summary(e.summary),e.location!==void 0&&this.location(e.location),e.description!==void 0&&this.description(e.description),e.organizer!==void 0&&this.organizer(e.organizer),e.attendees!==void 0&&this.attendees(e.attendees),e.alarms!==void 0&&this.alarms(e.alarms),e.categories!==void 0&&this.categories(e.categories),e.status!==void 0&&this.status(e.status),e.busystatus!==void 0&&this.busystatus(e.busystatus),e.priority!==void 0&&this.priority(e.priority),e.url!==void 0&&this.url(e.url),e.attachments!==void 0&&this.attachments(e.attachments),e.transparency!==void 0&&this.transparency(e.transparency),e.created!==void 0&&this.created(e.created),e.lastModified!==void 0&&this.lastModified(e.lastModified),e.class!==void 0&&this.class(e.class),e.x!==void 0&&this.x(e.x)}alarms(e){return e?(e.forEach(t=>this.createAlarm(t)),this):this.data.alarms}allDay(e){return e===void 0?this.data.allDay:(this.data.allDay=!!e,this)}attachments(e){return e?(e.forEach(t=>this.createAttachment(t)),this):this.data.attachments}attendees(e){return e?(e.forEach(t=>this.createAttendee(t)),this):this.data.attendees}busystatus(e){return e===void 0?this.data.busystatus:e===null?(this.data.busystatus=null,this):(this.data.busystatus=ye(ei,e),this)}categories(e){return e?(e.forEach(t=>this.createCategory(t)),this):this.data.categories}class(e){return e===void 0?this.data.class:e===null?(this.data.class=null,this):(this.data.class=ye(ti,e),this)}createAlarm(e){let t=e instanceof pr?e:new pr(e,this);return this.data.alarms.push(t),t}createAttachment(e){return this.data.attachments.push(e),this}createAttendee(e){if(e instanceof Pt)return this.data.attendees.push(e),e;typeof e=="string"&&(e=xt("data",e));let t=new Pt(e,this);return this.data.attendees.push(t),t}createCategory(e){let t=e instanceof gr?e:new gr(e);return this.data.categories.push(t),t}created(e){return e===void 0?this.data.created:e===null?(this.data.created=null,this):(this.data.created=Me(e,"created"),this)}description(e){return e===void 0?this.data.description:e===null?(this.data.description=null,this):(typeof e=="string"?this.data.description={plain:e}:this.data.description=e,this)}end(e){return e===void 0?(this.swapStartAndEndIfRequired(),this.data.end):e===null?(this.data.end=null,this):(this.data.end=Me(e,"end"),this)}floating(e){return e===void 0?this.data.floating:(this.data.floating=!!e,this.data.floating&&(this.data.timezone=null),this)}id(e){return e===void 0?this.data.id:(this.data.id=String(e),this)}lastModified(e){return e===void 0?this.data.lastModified:e===null?(this.data.lastModified=null,this):(this.data.lastModified=Me(e,"lastModified"),this)}location(e){if(e===void 0)return this.data.location;if(typeof e=="string")return this.data.location={title:e},this;if(e&&("title"in e&&!e.title||e?.geo&&(typeof e.geo.lat!="number"||!isFinite(e.geo.lat)||typeof e.geo.lon!="number"||!isFinite(e.geo.lon))||!("title"in e)&&!e?.geo))throw new Error("`location` isn't formatted correctly. See https://sebbo2002.github.io/ical-generator/develop/reference/classes/ICalEvent.html#location");return this.data.location=e||null,this}organizer(e){return e===void 0?this.data.organizer:e===null?(this.data.organizer=null,this):(this.data.organizer=xt("organizer",e),this)}priority(e){if(e===void 0)return this.data.priority;if(e===null)return this.data.priority=null,this;if(e<0||e>9)throw new Error("`priority` is invalid, musst be 0 ≤ priority ≤ 9.");return this.data.priority=Math.round(e),this}recurrenceId(e){return e===void 0?this.data.recurrenceId:e===null?(this.data.recurrenceId=null,this):(this.data.recurrenceId=Me(e,"recurrenceId"),this)}repeating(e){if(e===void 0)return this.data.repeating;if(!e)return this.data.repeating=null,this;if(rn(e)||typeof e=="string")return this.data.repeating=e,this;if(this.data.repeating={freq:ye(Mn,e.freq)},e.count){if(!isFinite(e.count))throw new Error("`repeating.count` must be a finite number!");this.data.repeating.count=e.count}if(e.interval){if(!isFinite(e.interval))throw new Error("`repeating.interval` must be a finite number!");this.data.repeating.interval=e.interval}if(e.until!==void 0&&(this.data.repeating.until=Me(e.until,"repeating.until")),e.byDay){let t=Array.isArray(e.byDay)?e.byDay:[e.byDay];this.data.repeating.byDay=t.map(n=>ye(mn,n))}if(e.byMonth){let t=Array.isArray(e.byMonth)?e.byMonth:[e.byMonth];this.data.repeating.byMonth=t.map(n=>{if(typeof n!="number"||n<1||n>12)throw new Error("`repeating.byMonth` contains invalid value `"+n+"`!");return n})}if(e.byMonthDay){let t=Array.isArray(e.byMonthDay)?e.byMonthDay:[e.byMonthDay];this.data.repeating.byMonthDay=t.map(n=>{if(typeof n!="number"||n<-31||n>31||n===0)throw new Error("`repeating.byMonthDay` contains invalid value `"+n+"`!");return n})}if(e.bySetPos){if(!this.data.repeating.byDay)throw"`repeating.bySetPos` must be used along with `repeating.byDay`!";let t=Array.isArray(e.bySetPos)?e.bySetPos:[e.bySetPos];this.data.repeating.bySetPos=t.map(n=>{if(typeof n!="number"||n<-366||n>366||n===0)throw"`repeating.bySetPos` contains invalid value `"+n+"`!";return n})}if(e.exclude){let t=Array.isArray(e.exclude)?e.exclude:[e.exclude];this.data.repeating.exclude=t.map((n,r)=>Me(n,`repeating.exclude[${r}]`))}return e.startOfWeek&&(this.data.repeating.startOfWeek=ye(mn,e.startOfWeek)),this}sequence(e){if(e===void 0)return this.data.sequence;let t=parseInt(String(e),10);if(isNaN(t))throw new Error("`sequence` must be a number!");return this.data.sequence=e,this}stamp(e){return e===void 0?this.data.stamp:(this.data.stamp=Me(e,"stamp"),this)}start(e){return e===void 0?(this.swapStartAndEndIfRequired(),this.data.start):(this.data.start=Me(e,"start"),this)}status(e){return e===void 0?this.data.status:e===null?(this.data.status=null,this):(this.data.status=ye(ni,e),this)}summary(e){return e===void 0?this.data.summary:(this.data.summary=e?String(e):"",this)}timestamp(e){return e===void 0?this.stamp():this.stamp(e)}timezone(e){return e===void 0&&this.data.timezone!==null?this.data.timezone:e===void 0?this.calendar.timezone():(this.data.timezone=e&&e!=="UTC"?e.toString():null,this.data.timezone&&(this.data.floating=!1),this)}toJSON(){let e=null;return rn(this.data.repeating)||typeof this.data.repeating=="string"?e=this.data.repeating.toString():this.data.repeating&&(e=Object.assign({},this.data.repeating,{exclude:this.data.repeating.exclude?.map(t=>Le(t)),until:Le(this.data.repeating.until)||void 0})),this.swapStartAndEndIfRequired(),Object.assign({},this.data,{created:Le(this.data.created)||null,end:Le(this.data.end)||null,lastModified:Le(this.data.lastModified)||null,recurrenceId:Le(this.data.recurrenceId)||null,repeating:e,stamp:Le(this.data.stamp)||null,start:Le(this.data.start)||null,x:this.x()})}toString(){let e="";if(e+=`BEGIN:VEVENT\r
`,e+="UID:"+this.data.id+`\r
`,e+="SEQUENCE:"+this.data.sequence+`\r
`,this.swapStartAndEndIfRequired(),e+="DTSTAMP:"+Ee(this.calendar.timezone(),this.data.stamp)+`\r
`,this.data.allDay?(e+="DTSTART;VALUE=DATE:"+Ee(this.timezone(),this.data.start,!0)+`\r
`,this.data.end&&(e+="DTEND;VALUE=DATE:"+Ee(this.timezone(),this.data.end,!0)+`\r
`),e+=`X-MICROSOFT-CDO-ALLDAYEVENT:TRUE\r
`,e+=`X-MICROSOFT-MSNCALENDAR-ALLDAYEVENT:TRUE\r
`):(e+=nn(this.timezone(),"DTSTART",this.data.start,this.data)+`\r
`,this.data.end&&(e+=nn(this.timezone(),"DTEND",this.data.end,this.data)+`\r
`)),rn(this.data.repeating)||typeof this.data.repeating=="string"){let t=this.data.repeating.toString().replace(/\r\n/g,`
`).split(`
`).filter(n=>n&&!n.startsWith("DTSTART:")).join(`\r
`);!t.includes(`\r
`)&&!t.startsWith("RRULE:")&&(t="RRULE:"+t),e+=t.trim()+`\r
`}else this.data.repeating&&(e+="RRULE:FREQ="+this.data.repeating.freq,this.data.repeating.count&&(e+=";COUNT="+this.data.repeating.count),this.data.repeating.interval&&(e+=";INTERVAL="+this.data.repeating.interval),this.data.repeating.until&&(e+=";UNTIL="+Ee(this.calendar.timezone(),this.data.repeating.until,!1,this.floating())),this.data.repeating.byDay&&(e+=";BYDAY="+this.data.repeating.byDay.join(",")),this.data.repeating.byMonth&&(e+=";BYMONTH="+this.data.repeating.byMonth.join(",")),this.data.repeating.byMonthDay&&(e+=";BYMONTHDAY="+this.data.repeating.byMonthDay.join(",")),this.data.repeating.bySetPos&&(e+=";BYSETPOS="+this.data.repeating.bySetPos.join(",")),this.data.repeating.startOfWeek&&(e+=";WKST="+this.data.repeating.startOfWeek),e+=`\r
`,this.data.repeating.exclude&&(this.data.allDay?e+="EXDATE;VALUE=DATE:"+this.data.repeating.exclude.map(t=>Ee(this.calendar.timezone(),t,!0)).join(",")+`\r
`:(e+="EXDATE",this.timezone()?e+=";TZID="+this.timezone()+":"+this.data.repeating.exclude.map(t=>Ee(this.timezone(),t,!1,!0)).join(",")+`\r
`:e+=":"+this.data.repeating.exclude.map(t=>Ee(this.timezone(),t,!1,this.floating())).join(",")+`\r
`)));return this.data.recurrenceId&&(e+=nn(this.timezone(),"RECURRENCE-ID",this.data.recurrenceId,this.data)+`\r
`),e+="SUMMARY:"+$(this.data.summary,!1)+`\r
`,this.data.transparency&&(e+="TRANSP:"+$(this.data.transparency,!1)+`\r
`),this.data.location&&"title"in this.data.location&&this.data.location.title&&(e+="LOCATION:"+$(this.data.location.title+(this.data.location.address?`
`+this.data.location.address:""),!1)+`\r
`,this.data.location.radius&&this.data.location.geo&&(e+="X-APPLE-STRUCTURED-LOCATION;VALUE=URI;"+(this.data.location.address?"X-ADDRESS="+$(this.data.location.address,!1)+";":"")+"X-APPLE-RADIUS="+$(this.data.location.radius,!1)+";X-TITLE="+$(this.data.location.title,!1)+":geo:"+$(this.data.location.geo?.lat,!1)+","+$(this.data.location.geo?.lon,!1)+`\r
`)),this.data.location?.geo?.lat&&this.data.location.geo.lon&&(e+="GEO:"+$(this.data.location.geo.lat,!1)+";"+$(this.data.location.geo.lon,!1)+`\r
`),this.data.description&&(e+="DESCRIPTION:"+$(this.data.description.plain,!1)+`\r
`,this.data.description.html&&(e+="X-ALT-DESC;FMTTYPE=text/html:"+$(this.data.description.html,!1)+`\r
`)),this.data.organizer&&(e+='ORGANIZER;CN="'+$(this.data.organizer.name,!0)+'"',this.data.organizer.sentBy&&(e+=';SENT-BY="mailto:'+$(this.data.organizer.sentBy,!0)+'"'),this.data.organizer.email&&this.data.organizer.mailto&&(e+=";EMAIL="+$(this.data.organizer.email,!1)),e+=":",this.data.organizer.email&&(e+="mailto:"+$(this.data.organizer.mailto||this.data.organizer.email,!1)),e+=`\r
`),this.data.attendees.forEach(function(t){e+=t.toString()}),this.data.alarms.forEach(function(t){e+=t.toString()}),this.data.categories.length>0&&(e+="CATEGORIES:"+this.data.categories.map(t=>t.toString()).join()+`\r
`),this.data.url&&(e+="URL;VALUE=URI:"+$(this.data.url,!1)+`\r
`),this.data.attachments.length>0&&this.data.attachments.forEach(t=>{e+="ATTACH:"+$(t,!1)+`\r
`}),this.data.status&&(e+="STATUS:"+this.data.status.toUpperCase()+`\r
`),this.data.busystatus&&(e+="X-MICROSOFT-CDO-BUSYSTATUS:"+this.data.busystatus.toUpperCase()+`\r
`),this.data.priority!==null&&(e+="PRIORITY:"+this.data.priority+`\r
`),e+=Ln(this.data),this.data.created&&(e+="CREATED:"+Ee(this.calendar.timezone(),this.data.created)+`\r
`),this.data.lastModified&&(e+="LAST-MODIFIED:"+Ee(this.calendar.timezone(),this.data.lastModified)+`\r
`),this.data.class&&(e+="CLASS:"+this.data.class.toUpperCase()+`\r
`),e+=`END:VEVENT\r
`,e}transparency(e){return e===void 0?this.data.transparency:e?(this.data.transparency=ye(ri,e),this):(this.data.transparency=null,this)}uid(e){return e===void 0?this.id():this.id(e)}url(e){return e===void 0?this.data.url:(this.data.url=e?String(e):null,this)}x(e,t){return e===void 0?we(this.data):(typeof e=="string"&&typeof t=="string"&&we(this.data,e,t),typeof e=="object"&&we(this.data,e),this)}swapStartAndEndIfRequired(){if(this.data.start&&this.data.end&&fr(this.data.start).getTime()>fr(this.data.end).getTime()){let e=this.data.start;this.data.start=this.data.end,this.data.end=e}}},ii=(e=>(e.ADD="ADD",e.CANCEL="CANCEL",e.COUNTER="COUNTER",e.DECLINECOUNTER="DECLINECOUNTER",e.PUBLISH="PUBLISH",e.REFRESH="REFRESH",e.REPLY="REPLY",e.REQUEST="REQUEST",e))(ii||{}),Fs=class{data;constructor(e={}){this.data={description:null,events:[],method:null,name:null,prodId:"//sebbo.net//ical-generator//EN",scale:null,source:null,timezone:null,ttl:null,url:null,x:[]},e.prodId!==void 0&&this.prodId(e.prodId),e.method!==void 0&&this.method(e.method),e.name!==void 0&&this.name(e.name),e.description!==void 0&&this.description(e.description),e.timezone!==void 0&&this.timezone(e.timezone),e.source!==void 0&&this.source(e.source),e.url!==void 0&&this.url(e.url),e.scale!==void 0&&this.scale(e.scale),e.ttl!==void 0&&this.ttl(e.ttl),e.events!==void 0&&this.events(e.events),e.x!==void 0&&this.x(e.x)}clear(){return this.data.events=[],this}createEvent(e){let t=e instanceof mr?e:new mr(e,this);return this.data.events.push(t),t}description(e){return e===void 0?this.data.description:(this.data.description=e?String(e):null,this)}events(e){return e?(e.forEach(t=>this.createEvent(t)),this):this.data.events}length(){return this.data.events.length}method(e){return e===void 0?this.data.method:e?(this.data.method=ye(ii,e),this):(this.data.method=null,this)}name(e){return e===void 0?this.data.name:(this.data.name=e?String(e):null,this)}prodId(e){if(!e)return this.data.prodId;if(typeof e=="string")return this.data.prodId=e,this;if(typeof e!="object")throw new Error("`prodid` needs to be a string or an object!");if(!e.company)throw new Error("`prodid.company` is a mandatory item!");if(!e.product)throw new Error("`prodid.product` is a mandatory item!");let t=(e.language||"EN").toUpperCase();return this.data.prodId="//"+e.company+"//"+e.product+"//"+t,this}scale(e){return e===void 0?this.data.scale:(e===null?this.data.scale=null:this.data.scale=e.toUpperCase(),this)}source(e){return e===void 0?this.data.source:(this.data.source=e||null,this)}timezone(e){return e===void 0?this.data.timezone?.name||null:(e==="UTC"?this.data.timezone=null:typeof e=="string"?this.data.timezone={name:e}:e===null?this.data.timezone=null:this.data.timezone=e,this)}toJSON(){return Object.assign({},this.data,{events:this.data.events.map(e=>e.toJSON()),timezone:this.timezone(),x:this.x()})}toString(){let e="";return e=`BEGIN:VCALENDAR\r
VERSION:2.0\r
`,e+="PRODID:-"+this.data.prodId+`\r
`,this.data.url&&(e+="URL:"+this.data.url+`\r
`),this.data.source&&(e+="SOURCE;VALUE=URI:"+this.data.source+`\r
`),this.data.scale&&(e+="CALSCALE:"+this.data.scale+`\r
`),this.data.method&&(e+="METHOD:"+this.data.method+`\r
`),this.data.name&&(e+="NAME:"+this.data.name+`\r
`,e+="X-WR-CALNAME:"+this.data.name+`\r
`),this.data.description&&(e+="X-WR-CALDESC:"+this.data.description+`\r
`),this.data.timezone?.generator&&[...new Set([this.timezone(),...this.data.events.map(t=>t.timezone())])].filter(t=>t!==null&&!t.startsWith("/")).forEach(t=>{if(!this.data.timezone?.generator)return;let n=this.data.timezone.generator(t);n&&(e+=n.replace(/\r\n/g,`
`).replace(/\n/g,`\r
`).trim()+`\r
`)}),this.data.timezone?.name&&(e+="TIMEZONE-ID:"+this.data.timezone.name+`\r
`,e+="X-WR-TIMEZONE:"+this.data.timezone.name+`\r
`),this.data.ttl&&(e+="REFRESH-INTERVAL;VALUE=DURATION:"+_e(this.data.ttl)+`\r
`,e+="X-PUBLISHED-TTL:"+_e(this.data.ttl)+`\r
`),this.data.events.forEach(t=>e+=t.toString()),e+=Ln(this.data),e+="END:VCALENDAR",Os(e)}ttl(e){return e===void 0?this.data.ttl:(zs(e)?this.data.ttl=e.asSeconds():e&&e>0?this.data.ttl=e:this.data.ttl=null,this)}url(e){return e===void 0?this.data.url:(this.data.url=e||null,this)}x(e,t){if(e===void 0)return we(this.data);if(typeof e=="string"&&typeof t=="string")we(this.data,e,t);else if(typeof e=="object")we(this.data,e);else throw new Error("Either key or value is not a string!");return this}};function $s(e){return new Fs(e)}var js=$s;function Ws(e){const{ctx:t,x:n,y:r,width:i,height:o,radius:s,color:a}=e;t.fillStyle=a,t.beginPath(),t.moveTo(n+s,r),t.lineTo(n+i-s,r),t.quadraticCurveTo(n+i,r,n+i,r+s),t.lineTo(n+i,r+o-s),t.quadraticCurveTo(n+i,r+o,n+i-s,r+o),t.lineTo(n+s,r+o),t.quadraticCurveTo(n,r+o,n,r+o-s),t.lineTo(n,r+s),t.quadraticCurveTo(n,r,n+s,r),t.closePath(),t.fill()}function on(e,t,n,r){const o=document.createElement("canvas").getContext("2d");if(!o)return[];o.font=`${r}px '${n}'`;let s="";const a=[];for(const d of e){const f=s+d;o.measureText(f).width>t&&s!==""?(a.push(s),s=d):s=f}return s&&a.push(s),a}function oi(e){const{ctx:t,x:n,y:r,text:i,font:o,fontSize:s,color:a,align:d="left"}=e;t.fillStyle=a,t.font=`${s}px '${o}'`,t.textAlign=d||"left",t.fillText(i,n,r)}function Hs(e){const{ctx:t,x:n,y:r,width:i,height:o,title:s,professor:a,location:d,font:f,fontSize:u}=e,h=on(s,i,f,u),m=on(a,i,f,u),p=on(d,i,f,u);let A=0;const g=[...h,...p,...m].slice(0,3);A=g.reduce((x,D,C)=>D===""?x+2:x+u,0);let E=(o-A)/2+u-7;g.forEach((x,D)=>{x!==""?(oi({ctx:t,x:n,y:r+E,text:x,font:f,fontSize:u,color:`rgba(0, 0, 0, ${D<h.length?.8:.5})`}),E+=u+5):E+=2})}async function ai(e){const{timetableName:t,lectures:n,timetableType:r,semesterName:i,semesterFontSize:o,tileFontSize:s}=e,a=["#F2CECE","#F4B3AE","#F2BCA0","#F0D3AB","#F1E1A9","#f4f2b3","#dbf4be","#beedd7","#b7e2de","#c9eaf4","#B4D3ED","#B9C5ED","#CCC6ED","#D8C1F0","#EBCAEF","#f4badb"],d=`Image_template_${r}.png`,f=new Image;f.src=d,await new Promise((p,A)=>{f.onload=p,f.onerror=A});const u=await ur.loadImage(d),h=ur.createCanvas(u.width,u.height),m=h.getContext("2d");m.drawImage(u,0,0),oi({ctx:m,x:r==="5days"?952:1302,y:78,text:i+" "+t,font:"NotoSansKR",fontSize:o,color:"#CCCCCC",align:"right"});for(const p of n){const A=a[p.courseId%16]||"#F2CECE";for(const g of p.classes){const{day:y,begin:E,end:x}=g,[D,C,N,R]=[178*y+76,E*4/3-486,171,(x-E)*4/3-7];Ws({ctx:m,x:D,y:C,width:N,height:R,radius:4,color:A}),Hs({ctx:m,x:D+12,y:C+8,width:N-24,height:R-16,title:p.name,professor:Ri(p.professors)||"",location:g.buildingCode+" "+g.roomName||"",font:"NotoSansKR",fontSize:s})}}return h}async function qs(e){const n=(await ai(e)).toDataURL("image/png"),r=document.createElement("a");r.href=n,r.download=`${e.timetableName}.png`,r.click(),URL.revokeObjectURL(n)}async function Ys(e){const n=(await ai(e)).toDataURL("image/png"),i=await(await fetch(n)).blob();if(!navigator.clipboard?.write)return;const o=new ClipboardItem({"image/png":i});await navigator.clipboard.write([o])}function Vs(e){const{name:t,lectures:n,semesterObject:r}=e,i=js({name:t,prodId:"//SPARCS//OTL Plus",timezone:"Asia/Seoul"});for(const d of n)for(const f of d.classes){const u=f.buildingCode+" "+f.roomName,h=new Date(r.beginning),m=(f.day+1)%7,p=new Date(h),A=p.getDay(),g=(m+7-A)%7;p.setDate(p.getDate()+g);const y=Math.floor(f.begin/60),E=f.begin%60,x=Math.floor(f.end/60),D=f.end%60,C=new Date(p);C.setHours(y,E,0,0);const N=new Date(p);N.setHours(x,D,0,0),i.createEvent({start:C,end:N,summary:d.name,location:u,repeating:{freq:Mn.WEEKLY,until:new Date(r.end)},timezone:"Asia/Seoul"}).alarms([{type:kn.display,trigger:900}])}const o=new Blob([i.toString()],{type:"text/calendar;charset=utf-8"}),s=URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download=`${t}.ics`,a.click(),URL.revokeObjectURL(s)}const Gs=T(L)`
    width: 100%;

    ${W.laptop} {
        height: 56px;
        flex-wrap: wrap;
        align-items: center;
    }

    ${W.tablet} {
        height: auto;
        flex-wrap: nowrap;
        align-items: flex-start;
    }
`,an=T.button`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px 0;
    color: ${({theme:e})=>e.colors.Highlight.default};
    font-size: 13px;

    &:hover {
        text-decoration: underline;
    }
`;function vn({timetableName:e,timetableLectures:t,year:n,semester:r}){const{t:i}=Ie(),o=We(),s=je("tablet"),{query:a}=ue("GET","/semesters"),[d,f]=l.useState("idle"),u=l.useMemo(()=>a?a.data?.semesters.find(h=>h.year===n&&h.semester===r):null,[a.data,n,r]);return l.useEffect(()=>{if(d.startsWith("success")){const h=setTimeout(()=>{f("idle")},500);return()=>clearTimeout(h)}},[d]),w(Gs,{direction:s?"row":"column",gap:8,children:[w(an,{onClick:()=>{d==="idle"&&(Ys({timetableName:e,lectures:t,timetableType:"5days",semesterName:n+" "+ln(r),semesterFontSize:30,tileFontSize:20}),f("successCopyImage"))},children:[c(re,{size:16,color:o.colors.Highlight.default,onClick:()=>{},children:d=="successCopyImage"?c(Vt,{}):c(xn,{})}),!s&&c("span",{children:i("timetable.copyImage")})]}),w(an,{onClick:()=>{d==="idle"&&(qs({timetableName:e,lectures:t,timetableType:"5days",semesterName:n+" "+ln(r),semesterFontSize:30,tileFontSize:20}),f("successDownloadImage"))},children:[c(re,{size:16,color:o.colors.Highlight.default,onClick:()=>{},children:d=="successDownloadImage"?c(Vt,{}):c(Mi,{})}),!s&&c("span",{children:i("timetable.exportImage")})]}),w(an,{onClick:()=>{if(d==="idle"){if(!u)return;Vs({name:e,lectures:t,semesterObject:{beginning:new Date(u.beginning),end:new Date(u.end)}}),f("successDownloadCalendar")}},children:[c(re,{size:16,color:o.colors.Highlight.default,children:d=="successDownloadCalendar"?c(Vt,{}):c(Ni,{})}),!s&&c("span",{children:i("timetable.exportICal")})]})]})}const Xs=T.div`
    display: flex;
    flex-direction: column;
    width: 264px;
    height: 100%;
    gap: 12px;
    overflow-y: auto;

    scrollbar-width: none;
    &::-webkit-scrollbar {
        display: none;
    }

    ${W.laptop} {
        flex-direction: row;
        justify-content: space-around;
        align-items: center;
        width: 100%;
    }
`;function vr({timetableName:e,timetableLectures:t,hover:n,setHover:r,year:i,semester:o}){const s=je("laptop");return w(Xs,{children:[!s&&c(Ls,{timetableLectures:t,hover:n,setHover:r}),c(ms,{hover:n,setHover:r,timetableLectures:t}),!s&&c(pt,{direction:"row"}),c(ys,{timetableLectures:t,hover:n,setHover:r}),!s&&c(pt,{direction:"row"}),!s&&c(Cs,{timetableLectures:t,hover:n,setHover:r}),!s&&c(pt,{direction:"row"}),!s&&c(vn,{timetableName:e,timetableLectures:t,year:i,semester:o})]})}const Ks=T(L)`
    min-height: 0;
    padding: 0 20px 12px 20px;

    ${W.tablet} {
        padding: 8px;
    }

    ${W.mobile} {
        padding: 0 8px 8px 8px;
    }
`,br=T(L)`
    background-color: ${({theme:e})=>e.colors.Background.Section.default};
    padding: 16px;
    border-radius: 12px;
    align-self: stretch; /* 부모 Flex의 align-items: stretch에 맞춰 세로 길이 맞춤 */

    ${W.desktop} {
        background-color: transparent;
        padding: 0;
        border-radius: 0;
    }

    ${W.tablet} {
        flex: 1 1 0;
        min-height: 0;
        height: 100%;
    }
`,yr=T(L)`
    border-radius: 12px;
    width: fit-content;
    align-self: stretch; /* 부모 Flex의 align-items: stretch에 맞춰 세로 길이 맞춤 */

    ${W.laptop} {
        max-width: none;
    }

    ${W.tablet} {
        width: 100%;
        max-width: none;
        flex: 1 0 0;
    }
`,wr=T(L)`
    background-color: ${({theme:e})=>e.colors.Background.Section.default};
    border-top-right-radius: 12px;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
    padding: 16px;
    flex: 1;
    min-height: 0;

    ${W.laptop} {
        background-color: transparent;
        padding: 0;
        border-radius: 0;
    }
`,Qs=T.div`
    width: 380px;
    height: 100%;
    display: flex;

    ${W.desktop} {
        background-color: ${({theme:e})=>e.colors.Background.Section.default};
        padding: 16px;
        border-radius: 12px;
    }

    ${W.laptop} {
        width: 300px;
    }
`,xr=T.div`
    width: 300px;
    height: 100%;
    display: flex;

    scrollbar-width: none;
    &::-webkit-scrollbar {
        display: none;
    }

    ${W.desktop} {
        width: 380px;
        background-color: ${({theme:e})=>e.colors.Background.Section.default};
        padding: 16px;
        border-radius: 12px;
    }

    ${W.laptop} {
        width: 300px;
    }

    ${W.tablet} {
        width: 100%;
    }
`,Js=T.div`
    ${W.laptop} {
        height: 100px;
        background-color: ${({theme:e})=>e.colors.Background.Section.default};
        padding: 22px;
        border-radius: 12px;
        width: 100%;
    }
`,Er=T(L)`
    flex: 1;
    min-height: 0;

    ${W.laptop} {
        background-color: ${({theme:e})=>e.colors.Background.Section.default};
        padding: 16px;
        border-radius: 0 12px 12px 12px;
    }
`,Tr=T.div`
    ${W.laptop} {
        height: 100px;
        background-color: ${({theme:e})=>e.colors.Background.Section.default};
        padding: 16px;
        border-radius: 12px;
    }

    ${W.tablet} {
        height: auto;
        padding: 8px;
    }
`,_s=T(L)`
    background-color: ${({theme:e})=>e.colors.Background.Section.default};
    padding: 8px;
    border-radius: 12px;
    white-space: nowrap;
`,wl=mi(function(){const{status:t}=Et(),n=bn(),r=We(),i=je("tablet"),o=je("laptop"),s=je("desktop");l.useEffect(()=>{Oe("Page View",{page:"Timetable"})},[]);const a=l.useRef(null),d=l.useRef(null),f=l.useRef(null),[u,h]=l.useState(null),[m,p]=l.useState(null),[A,g]=l.useState(null),[y,E]=l.useState(null),[x,D]=l.useState(""),[C,N]=l.useState(-1),[R,M]=l.useState(1),[b,S]=l.useState(0),[k,O]=l.useState(0),[F,Q]=l.useState(!1),[X,K]=l.useState([]),{query:Se}=ue("GET",`/timetables/${y}`,{enabled:y!==null&&t==="success"}),{query:J,setParams:ee}=ue("GET","/timetables/my-timetable",{enabled:y===null&&t==="success"}),H=t!=="success"?X:y===null?J.data?.lectures??[]:Se.data?.lectures??[],{requestFunction:te}=ue("PATCH",`/timetables/${y}`,{onSuccess:()=>{n.invalidateQueries({queryKey:[`/timetables/${y}`]}).then(()=>{p(null),h(null)})}}),ce=l.useCallback(V=>{K(ie=>ie.filter(xe=>xe.id!==V)),p(null),h(null)},[]),q=l.useCallback(V=>{te({action:"delete",lectureId:V}),Oe("Remove Lecture from Timetable",{lectureId:V,timetableId:y})},[te,y]);return l.useEffect(()=>{h(null),p(null)},[F]),l.useEffect(()=>{function V(){d.current&&(S(d.current.offsetWidth),O(d.current.offsetHeight))}return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[F]),l.useEffect(()=>{const V=ie=>{a.current&&!a.current.contains(ie.target)&&d.current&&!d.current.contains(ie.target)&&f.current&&f.current.contains(ie.target)&&p(null)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]),l.useEffect(()=>{p(null),h(null),C!==-1&&ee({year:C,semester:R}),K([])},[C,R]),l.useEffect(()=>{p(null),h(null)},[y]),l.useEffect(()=>{A!==null&&i&&Q(!0)},[A]),c(Ks,{direction:i?"column":"row",align:"stretch",justify:"center",gap:i?8:12,flex:"1 0 0",ref:f,children:i?w(tt,{children:[w(yr,{direction:"column",gap:0,align:"stretch",justify:"stretch",style:F?{flex:"1 1 0",minHeight:0}:void 0,children:[c(ar,{timeTableLectures:H,currentTimetableId:y,setCurrentTimetableId:E,setCurrentTimetableName:D,year:C,semester:R,setYear:N,setSemester:M}),c(wr,{direction:"column",gap:12,align:"stretch",justify:"flex-start",flex:"1 0 0",children:c(Er,{direction:"column",gap:0,ref:d,children:c(Wn,{cellWidth:(b-60)/5,fullHeight:k-60,lectureSummary:H,setTimeFilter:g,hover:u,setHover:h,selected:m,setSelected:p,removeFunction:t==="success"?y===null?void 0:q:ce})})})]}),c(Tr,{children:c(vr,{timetableName:x,timetableLectures:H,hover:u,setHover:h,year:C,semester:R})}),w(_s,{direction:"row",gap:0,children:[c(vn,{timetableName:x,timetableLectures:H,year:C,semester:R}),w(L,{direction:"row",gap:4,align:"center",style:{height:"100%"},onClick:()=>{Q(!F)},children:[c(re,{size:16,color:r.colors.Highlight.default,children:c(vi,{})}),c(z,{type:"Normal",color:"Highlight.default",children:F?"검색 닫기":"과목 검색하기"})]})]}),F&&c(br,{direction:"row",align:"flex-start",gap:12,ref:a,children:c(xr,{children:c(Vn,{timetableLectures:H,year:C,semester:R,setNonLoginTimetable:K,hoveredLecture:u,selectedLecture:m,setSelectedLecture:p,setHoveredLecture:h,timeFilter:A,setTimeFilter:g,currentTimetableId:y})})}),m&&c(bi,{isOpen:!!m,onClose:()=>{},fullScreen:!0,header:!1,children:c(qn,{setNonLoginTimetable:K,handleRemoveFromTimetable:t==="success"?y===null?void 0:q:ce,selectedLecture:m||(u?.length==1?u[0]:null),year:C,semester:R,onMobileModalClose:()=>{h(null),p(null)},currentTimetableId:y,timetableLectures:H})})]}):w(tt,{children:[w(br,{direction:s?"column-reverse":"row",align:"flex-start",gap:12,ref:a,children:[o&&c(Js,{children:c(vn,{timetableName:x,timetableLectures:H,year:C,semester:R})}),c(xr,{style:{overflow:"auto"},children:c(Vn,{timetableLectures:H,year:C,semester:R,setNonLoginTimetable:K,hoveredLecture:u,selectedLecture:m,setSelectedLecture:p,setHoveredLecture:h,timeFilter:A,setTimeFilter:g,currentTimetableId:y})}),!s&&c(pt,{direction:"column"}),c(Qs,{style:{overflow:"auto"},children:c(qn,{selectedLecture:m||(u?.length==1?u[0]:null),year:C,semester:R})})]}),c(L,{direction:"row",gap:0,children:w(yr,{direction:"column",gap:0,children:[c(ar,{timeTableLectures:H,currentTimetableId:y,setCurrentTimetableId:E,setCurrentTimetableName:D,year:C,semester:R,setYear:N,setSemester:M}),w(wr,{direction:o?"column":"row",gap:o?12:30,align:"stretch",justify:"flex-start",flex:"1 0 0",children:[c(Er,{direction:"column",gap:0,ref:d,children:c(Wn,{cellWidth:100,fullHeight:o?k-60:k-36,lectureSummary:H,setTimeFilter:g,hover:u,setHover:h,selected:m,setSelected:p,removeFunction:t==="success"?y===null?void 0:q:ce})}),!o&&c(pt,{direction:"column"}),c(Tr,{children:c(vr,{timetableName:x,timetableLectures:H,hover:u,setHover:h,year:C,semester:R})})]})]})})]})})});export{wl as default};
//# sourceMappingURL=timetable-DnWVSFnW.js.map

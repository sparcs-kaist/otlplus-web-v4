import{w as g,y as p,r as m}from"./chunk-UIGDSWPH-ClC-Bows.js";import{b as h,u as d,e as n}from"./index-D8A8bLid.js";import{c as w}from"./queryPersister-Dnan5egx.js";import"./env-BUMX5jFK.js";const Q=g(function(){const a=p(),s=h(),{i18n:o}=d(),r=m.useRef(!0);return m.useEffect(()=>(r.current=!0,(async()=>{const f=window.location.hash.substring(1),c=new URLSearchParams(f),i=c.get("accessToken"),u=c.get("refreshToken"),l=o.resolvedLanguage||"ko";if(i&&u){if(navigator.userAgent.includes("otl-app")){window.location.href=`org.sparcs.otl://login?accessToken=${i}&refreshToken=${u}`;return}await w(),s.removeQueries({queryKey:["/users/info"]}),s.removeQueries({queryKey:["/timetables"]}),await s.prefetchQuery({queryKey:["/users/info",null,l],queryFn:async()=>{const{data:e}=await n.get("/api/v2/users/info");return e}});try{const{data:e}=await n.get("/api/v2/semesters");if(e?.semesters?.length>0){const t=e.semesters[e.semesters.length-1];t&&await s.prefetchQuery({queryKey:["/timetables/my-timetable",{year:t.year,semester:t.semester},l],queryFn:async()=>{const{data:y}=await n.get("/api/v2/timetables/my-timetable",{params:{year:t.year,semester:t.semester}});return y}})}}catch(e){console.error("Failed to prefetch timetable:",e)}r.current&&a("/",{replace:!0})}else r.current&&a("/",{replace:!0})})(),()=>{r.current=!1}),[a,s,o.resolvedLanguage]),null});export{Q as default};
//# sourceMappingURL=login.success-3kufHpty.js.map

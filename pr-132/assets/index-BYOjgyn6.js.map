{"version":3,"file":"index-BYOjgyn6.js","sources":["../../../node_modules/.pnpm/@mui+icons-material@7.3.8_@mui+material@7.3.8_@emotion+react@11.14.0_@types+react@19.2._eea1b8ae36d0998f6630ee1e4377c145/node_modules/@mui/icons-material/esm/ChevronLeft.js","../../../node_modules/.pnpm/@mui+icons-material@7.3.8_@mui+material@7.3.8_@emotion+react@11.14.0_@types+react@19.2._eea1b8ae36d0998f6630ee1e4377c145/node_modules/@mui/icons-material/esm/ChevronRight.js","../../../app/features/main/sections/MobileReviewSlideSection/index.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), 'ChevronLeft');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'ChevronRight');","import { useEffect, useRef, useState } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport styled from \"@emotion/styled\"\nimport ChevronLeftIcon from \"@mui/icons-material/ChevronLeft\"\nimport ChevronRightIcon from \"@mui/icons-material/ChevronRight\"\n\nimport FlexWrapper from \"@/common/primitives/FlexWrapper\"\nimport Icon from \"@/common/primitives/Icon\"\nimport { IconButton } from \"@/common/primitives/IconButton\"\nimport HallOfFameFeedSection from \"@/features/main/sections/HallOfFameFeedSection\"\nimport LikedMajorFeedSection from \"@/features/main/sections/LikedMajorFeedSection\"\nimport RecentFeedSection from \"@/features/main/sections/RecentFeedSection\"\nimport useIsDevice from \"@/utils/useIsDevice\"\n\nconst MobileReviewSlideSectionWrapper = styled(FlexWrapper)`\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    touch-action: pan-y; /* Allow vertical scrolling, but handle horizontal swipes manually */\n    border-radius: 16px;\n`\n\nconst SlideTrack = styled(FlexWrapper)<{\n    index: number\n    transition: string\n    offset: number\n}>`\n    width: 500%;\n    height: 100%;\n    transition: ${({ transition }) => transition};\n    transform: translateX(\n        calc(${({ index }) => `-${index * 20}%`} + ${({ offset }) => `${offset}px`})\n    );\n`\n\nconst SlideItem = styled(FlexWrapper)`\n    width: 20%;\n`\n\nconst NavButton = styled.div<{ position: \"left\" | \"right\" }>`\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    ${({ position }) => (position === \"left\" ? \"left: 8px;\" : \"right: 8px;\")}\n    border-radius: 50%;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    z-index: 10;\n`\n\nexport default function MobileReviewSlideSection() {\n    const theme = useTheme()\n    const isMobile = useIsDevice(\"mobile\")\n\n    const [currentIndex, setCurrentIndex] = useState(1)\n    const [transition, setTransition] = useState(\"transform 0.3s ease-in-out\")\n    const [isTransitioning, setIsTransitioning] = useState(false)\n\n    // Touch handling state\n    const [touchStartX, setTouchStartX] = useState<number | null>(null)\n    const [touchCurrentX, setTouchCurrentX] = useState<number | null>(null)\n    const [dragOffset, setDragOffset] = useState(0)\n    const containerRef = useRef<HTMLDivElement>(null)\n\n    const handlePrev = () => {\n        if (isTransitioning) return\n        setIsTransitioning(true)\n        setTransition(\"transform 0.3s ease-in-out\")\n        setCurrentIndex((prev) => prev - 1)\n    }\n\n    const handleNext = () => {\n        if (isTransitioning) return\n        setIsTransitioning(true)\n        setTransition(\"transform 0.3s ease-in-out\")\n        setCurrentIndex((prev) => prev + 1)\n    }\n\n    useEffect(() => {\n        if (!isTransitioning) return\n\n        const transitionTime = 300\n\n        const timeout = setTimeout(() => {\n            if (currentIndex === 0) {\n                setTransition(\"none\")\n                setCurrentIndex(3)\n            } else if (currentIndex === 4) {\n                setTransition(\"none\")\n                setCurrentIndex(1)\n            }\n            setIsTransitioning(false)\n        }, transitionTime)\n\n        return () => clearTimeout(timeout)\n    }, [currentIndex, isTransitioning])\n\n    // Touch Event Handlers\n    const handleTouchStart = (e: React.TouchEvent) => {\n        if (isTransitioning) return\n\n        const touch = e.touches[0]\n        if (!touch) return\n        setTouchStartX(touch.clientX)\n        setTouchCurrentX(touch.clientX)\n        setTransition(\"none\") // Disable transition during drag\n    }\n\n    const handleTouchMove = (e: React.TouchEvent) => {\n        if (touchStartX === null) return\n        const touch = e.touches[0]\n        if (!touch) return\n        setTouchCurrentX(touch.clientX)\n        const currentDrag = touch.clientX - touchStartX\n        setDragOffset(currentDrag)\n    }\n\n    const handleTouchEnd = () => {\n        if (touchStartX === null || touchCurrentX === null) return\n\n        const dragDistance = touchCurrentX - touchStartX\n        const threshold = 50 // Minimum distance to trigger slide\n\n        if (Math.abs(dragDistance) > threshold) {\n            if (dragDistance > 0) {\n                handlePrev()\n            } else {\n                handleNext()\n            }\n        } else {\n            // Snap back if threshold not met\n            setTransition(\"transform 0.3s ease-in-out\")\n        }\n\n        // Reset touch state\n        setTouchStartX(null)\n        setTouchCurrentX(null)\n        setDragOffset(0)\n\n        // If we didn't trigger a slide (handlePrev/Next sets transition), ensure we restore transition for snap back\n        if (Math.abs(dragDistance) <= threshold) {\n            setTransition(\"transform 0.3s ease-in-out\")\n        }\n    }\n\n    return (\n        <MobileReviewSlideSectionWrapper\n            direction=\"column\"\n            gap={0}\n            align=\"stretch\"\n            justify=\"stretch\"\n            ref={containerRef}\n            onTouchStart={handleTouchStart}\n            onTouchMove={handleTouchMove}\n            onTouchEnd={handleTouchEnd}\n            flex={isMobile ? \"1 1 auto\" : \"1 1 0\"}\n        >\n            <SlideTrack\n                direction=\"row\"\n                gap={0}\n                align=\"stretch\"\n                justify=\"stretch\"\n                index={currentIndex}\n                transition={transition}\n                offset={dragOffset}\n            >\n                {[\n                    <HallOfFameFeedSection key=\"clone-last\" />,\n                    <RecentFeedSection key=\"recent\" />,\n                    <LikedMajorFeedSection key=\"liked\" />,\n                    <HallOfFameFeedSection key=\"hall\" />,\n                    <RecentFeedSection key=\"clone-first\" />,\n                ].map((component, idx) => (\n                    <SlideItem direction=\"row\" align=\"stretch\" gap={0} key={idx}>\n                        {component}\n                    </SlideItem>\n                ))}\n            </SlideTrack>\n\n            <NavButton position=\"left\">\n                <IconButton onClick={handlePrev}>\n                    <Icon size={20} color={theme.colors.Text.default} onClick={() => {}}>\n                        <ChevronLeftIcon />\n                    </Icon>\n                </IconButton>\n            </NavButton>\n\n            <NavButton position=\"right\">\n                <IconButton onClick={handleNext}>\n                    <Icon size={20} color={theme.colors.Text.default} onClick={() => {}}>\n                        <ChevronRightIcon />\n                    </Icon>\n                </IconButton>\n            </NavButton>\n        </MobileReviewSlideSectionWrapper>\n    )\n}\n"],"names":["ChevronLeftIcon","createSvgIcon","_jsx","ChevronRightIcon","MobileReviewSlideSectionWrapper","styled","FlexWrapper","SlideTrack","transition","index","offset","SlideItem","NavButton","position","MobileReviewSlideSection","theme","useTheme","isMobile","useIsDevice","currentIndex","setCurrentIndex","useState","setTransition","isTransitioning","setIsTransitioning","touchStartX","setTouchStartX","touchCurrentX","setTouchCurrentX","dragOffset","setDragOffset","containerRef","useRef","handlePrev","prev","handleNext","useEffect","timeout","jsxs","e","touch","currentDrag","dragDistance","threshold","jsx","HallOfFameFeedSection","RecentFeedSection","LikedMajorFeedSection","component","idx","IconButton","Icon"],"mappings":"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","x_google_ignoreList":[0,1]}
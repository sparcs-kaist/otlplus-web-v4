import{j as o,a as d}from"./emotion-react-jsx-runtime.browser.esm-D2PZwVTC.js";import{r as i,L as j}from"./chunk-UIGDSWPH-ClhI_Z4l.js";import{F as c,n as B}from"./FlexWrapper-B6Hxm4Zw.js";import{u as M,q as E}from"./useIsDevice-rrFh6MwO.js";import{T as g}from"./Typography-DeI78L6T.js";import{W as I}from"./Widget-e9ONaX_D.js";import{u as L}from"./index-HVzq0Ac8.js";import{T as b}from"./Trans-Bj5hrfsv.js";import"./env-C162p7NL.js";const v=B(j)`
    color: ${({theme:e})=>e.colors.Highlight.default};
    text-decoration: none;
    font-size: ${({theme:e})=>e.fonts.NormalBold.fontSize}px;
    font-weight: ${({theme:e})=>e.fonts.NormalBold.fontWeight};

    &:hover {
        color: ${({theme:e})=>e.colors.Highlight.dark};
    }
`;function P(){const{query:e}=M("GET","/semesters"),[u,T]=i.useState(new Date),[x,$]=i.useState(""),[f,k]=i.useState(null),[h,p]=i.useState(""),[a,y]=i.useState(null),{t:l}=L();i.useEffect(()=>{const n=setInterval(()=>T(new Date),1e3);return()=>clearInterval(n)},[]),i.useEffect(()=>{if(!e.data?.semesters)return;const n=e.data.semesters[e.data.semesters.length-1];if(!n)return;k({year:n.year,semester:n.semester});const m=Object.entries(n).filter(([t,r])=>t!=="year"&&t!=="semester"&&r!==null).map(([t,r])=>[t,new Date(r)]).sort((t,r)=>t[1].getTime()-r[1].getTime());for(const[t,r]of m)if(u.getTime()<=r.getTime()){p(t),y(r);return}const s=m[m.length-1];s&&(p(s[0]),y(s[1]))},[e.data]),i.useEffect(()=>{if(!a)return;const n=a.getTime()-u.getTime(),m=n<0,s=Math.abs(n),t=Math.floor(s/(1e3*60*60*24)),r=Math.floor(s/(1e3*60*60)%24),w=Math.floor(s/(1e3*60)%60),D=Math.floor(s/1e3%60);$(`D${m?"+":"-"}${t} ${r}${l("common.hours")} ${w}${l("common.minutes")} ${D}${l("common.seconds")}`)},[u,a]);function S(){return f?f.year.toString()+" "+E(f.semester)+" "+l(`main.schedule.contents.${h}`):l(`main.schedule.contents.${h}`)}return a?o(I,{direction:"column",align:"stretch",gap:0,padding:"23px 30px",children:d(c,{direction:"column",align:"stretch",gap:16,children:[d(c,{direction:"column",align:"center",gap:10,children:[d(c,{direction:"column",align:"stretch",gap:0,children:[o(c,{direction:"row",justify:"center",gap:0,style:{textAlign:"center"},children:o(g,{type:"BiggerBold",color:"Text.dark",children:o(b,{i18nKey:"main.schedule.title",values:{content:S()}})})}),o(c,{direction:"row",justify:"center",gap:0,style:{textAlign:"center"},children:o(g,{type:"BiggerBold",color:"Text.dark",children:x})})]}),o(c,{direction:"column",gap:0,style:{textAlign:"center"},children:d(g,{type:"Normal",color:"Text.placeholder",children:[S()," ",a.getFullYear(),".",String(a.getMonth()+1).padStart(2,"0"),".",String(a.getDate()).padStart(2,"0")]})})]}),o(c,{direction:"column",align:"flex-end",gap:0,children:o(v,{to:"https://erp.kaist.ac.kr",target:"_blank",children:l("main.schedule.link")})})]})}):null}export{P as default};
//# sourceMappingURL=index-BrUIIrci.js.map

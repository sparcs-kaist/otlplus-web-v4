{"version":3,"file":"CustomTimeTableGrid-C2BziUFV.js","sources":["../../../app/common/primitives/GridWrapper.tsx","../../../app/common/components/timetable/Tile.tsx","../../../app/common/components/timetable/CustomTimeTableGrid.tsx"],"sourcesContent":["import styled from \"@emotion/styled\"\n\nexport interface GridWrapperProps {\n    columns: string\n    rows: string\n    gap: string\n    flow: \"row\" | \"column\"\n    alignItems?: \"stretch\" | \"center\" | \"start\" | \"end\"\n    justifyItems?: \"stretch\" | \"center\" | \"start\" | \"end\"\n    alignContents?:\n        | \"stretch\"\n        | \"center\"\n        | \"start\"\n        | \"end\"\n        | \"space-between\"\n        | \"space-around\"\n        | \"space-evenly\"\n    justifyContents?:\n        | \"stretch\"\n        | \"center\"\n        | \"start\"\n        | \"end\"\n        | \"space-between\"\n        | \"space-around\"\n        | \"space-evenly\"\n    padding?: string\n}\n\nconst GridWrapper = styled.div<GridWrapperProps>`\n    width: 100%;\n    height: 100%;\n    display: grid;\n    position: relative;\n    grid-template-columns: ${({ columns }) => columns};\n    grid-template-rows: ${({ rows }) => rows};\n    gap: ${({ gap }) => gap};\n    align-items: ${({ alignItems }) => alignItems ?? \"start\"};\n    justify-items: ${({ justifyItems }) => justifyItems ?? \"start\"};\n    align-content: ${({ alignContents }) => alignContents ?? \"start\"};\n    justify-content: ${({ justifyContents }) => justifyContents ?? \"start\"};\n    grid-auto-flow: ${({ flow }) => flow};\n    padding: ${({ padding }) => padding ?? \"0px\"};\n`\n\nexport default GridWrapper\n","import { type CSSProperties, memo, useEffect } from \"react\"\n\nimport { type Theme, ThemeProvider, css } from \"@emotion/react\"\nimport styled from \"@emotion/styled\"\nimport { Close } from \"@mui/icons-material\"\n\nimport FlexWrapper from \"@/common/primitives/FlexWrapper\"\nimport Icon from \"@/common/primitives/Icon\"\nimport { IconButton } from \"@/common/primitives/IconButton\"\nimport Typography from \"@/common/primitives/Typography\"\nimport { type Lecture } from \"@/common/schemas/lecture\"\nimport lightTheme from \"@/styles/themes/light\"\n\nconst flattenTimeTableColors = (\n    timeTable: Theme[\"colors\"][\"Tile\"][\"TimeTable\"][\"default\"],\n): Array<CSSProperties[\"color\"]> => {\n    return [\n        timeTable.red[1],\n        timeTable.red[2],\n        timeTable.orange[1],\n        timeTable.orange[2],\n        timeTable.yellow[1],\n        timeTable.yellow[2],\n        timeTable.green[1],\n        timeTable.green[2],\n        timeTable.green[3],\n        timeTable.blue[1],\n        timeTable.blue[2],\n        timeTable.purple[1],\n        timeTable.purple[2],\n        timeTable.pink[1],\n        timeTable.pink[2],\n    ]\n}\n\nconst HoverTileWrapper = styled(FlexWrapper)`\n    display: none;\n    grid-column: var(--hover-day);\n    grid-row: var(--hover-start) / var(--hover-end);\n    pointer-events: none;\n\n    [data-is-dragging=\"true\"] &,\n    [data-is-dragging=\"wait\"] & {\n        display: flex;\n    }\n\n    transition: opacity 0.2s ease;\n\n    [data-is-dragging=\"wait\"] & {\n        opacity: 0.5;\n    }\n`\n\nconst HoverTileInner = styled(FlexWrapper)`\n    background: rgba(229, 76, 101, 0.4);\n    border-radius: 4px;\n`\n\nfunction HoverTile() {\n    return (\n        <HoverTileWrapper direction=\"column\" gap={0} padding=\"1px 0px\" align=\"stretch\">\n            <HoverTileInner direction=\"column\" gap={0} flex=\"1 1 auto\" />\n        </HoverTileWrapper>\n    )\n}\n\nconst MemoizedHoverTile = memo(HoverTile)\n\nexport const LECTURE_TILE_CLASSNAME = \"lecture-tile\"\n\nexport const LectureTileHoverCss = (theme: Theme) => css`\n    background: ${theme.colors.Highlight.default};\n\n    .lecture-title {\n        color: #ffffff;\n    }\n\n    .lecture-info {\n        color: rgba(255, 255, 255, 0.5);\n    }\n\n    .lecture-delete-wrapper {\n        pointer-events: auto;\n        visibility: visible;\n    }\n`\n\nconst LectureTileWrapper = styled(FlexWrapper)<{\n    rowStart: number\n    rowEnd: number\n    col: number\n    lectureId: number\n}>`\n    grid-column: ${({ col }) => col};\n    grid-row: ${({ rowStart, rowEnd }) => `${rowStart} / ${rowEnd}`};\n    overflow: hidden;\n    pointer-events: none;\n\n    [data-selected-lecture=\"${({ lectureId }) => lectureId}\"] & {\n        transform: translateY(-2px);\n        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\n    }\n`\n\nconst LectureTileInner = styled(FlexWrapper)<{\n    courseId: number\n    lectureId: number\n}>`\n    background: ${({ theme, courseId }) =>\n        () => {\n            const flat = flattenTimeTableColors(theme.colors.Tile.TimeTable.default)\n            return flat[courseId % flat.length]\n        }};\n    border-radius: 2px;\n    overflow: hidden;\n    pointer-events: none;\n\n    [data-ghost=\"true\"] & {\n        opacity: 0.8;\n    }\n\n    [data-interaction=\"true\"] & {\n        pointer-events: auto;\n        cursor: pointer;\n        &:hover {\n            ${({ theme }) => LectureTileHoverCss(theme)}\n        }\n    }\n\n    transition: opacity 0.2s ease;\n\n    opacity: 0.5;\n\n    [data-selected-lecture=\"\"] & {\n        opacity: 1;\n    }\n\n    [data-is-dragging=\"true\"] & {\n        pointer-events: none;\n    }\n\n    .timetable-grid-wrapper:not(:hover)\n        [data-hovered-lectures~=\"${({ lectureId }) => lectureId}\"]\n        &,\n    [data-selected-lecture=\"${({ lectureId }) => lectureId}\"] & {\n        ${({ theme }) => LectureTileHoverCss(theme)}\n    }\n\n    [data-selected-lecture=\"${({ lectureId }) => lectureId}\"] & {\n        opacity: 1;\n    }\n`\n\nconst LectureDeleteWrapper = styled(FlexWrapper)`\n    pointer-events: none;\n    visibility: hidden;\n\n    [data-lecture-deletable=\"false\"] & {\n        pointer-events: none !important;\n        visibility: hidden !important;\n    }\n`\n\ninterface LectureTileProps {\n    lecture: Lecture\n    classIdx: number\n    deleteLecture?: () => void\n}\n\nfunction LectureTile({ lecture, classIdx, deleteLecture }: LectureTileProps) {\n    const cls = lecture.classes[classIdx]\n\n    if (cls == null) return null\n\n    return (\n        <LectureTileWrapper\n            direction=\"column\"\n            gap={0}\n            padding=\"1px 0px\"\n            justify=\"stretch\"\n            align=\"stretch\"\n            col={cls.day + 1}\n            rowStart={cls.begin / 30 - 14}\n            rowEnd={cls.end / 30 - 14}\n            lectureId={lecture.id}\n        >\n            <LectureTileInner\n                direction=\"row\"\n                gap={0}\n                flex=\"1 1 auto\"\n                align=\"stretch\"\n                justify=\"stretch\"\n                padding=\"2px\"\n                courseId={lecture.courseId}\n                lectureId={lecture.id}\n                className={LECTURE_TILE_CLASSNAME}\n            >\n                <FlexWrapper\n                    direction=\"column\"\n                    justify=\"center\"\n                    flex=\"1 1 auto\"\n                    gap={0}\n                    padding=\"4px 0px 4px 4px\"\n                >\n                    <FlexWrapper\n                        direction=\"column\"\n                        gap={0}\n                        align=\"flex-start\"\n                        style={{ overflow: \"hidden\" }}\n                    >\n                        <ThemeProvider theme={lightTheme}>\n                            <Typography\n                                type=\"Small\"\n                                color=\"Text.dark\"\n                                className=\"lecture-title\"\n                            >\n                                {lecture.name}\n                                {lecture.subtitle}\n                            </Typography>\n                            <Typography\n                                type=\"Small\"\n                                color=\"Text.lighter\"\n                                className=\"lecture-info\"\n                            >\n                                {lecture.professors\n                                    .map((professor) => professor.name)\n                                    .join(\", \")}\n                            </Typography>\n                            <Typography\n                                type=\"Small\"\n                                color=\"Text.lighter\"\n                                className=\"lecture-info\"\n                            >\n                                {`(${cls.buildingCode}) ${cls.roomName}`}\n                            </Typography>\n                        </ThemeProvider>\n                    </FlexWrapper>\n                </FlexWrapper>\n\n                <LectureDeleteWrapper\n                    direction=\"column\"\n                    flex=\"0 1 0\"\n                    gap={0}\n                    align=\"flex-end\"\n                    justify=\"flex-start\"\n                    className=\"lecture-delete-wrapper\"\n                >\n                    <IconButton styles={{ padding: 3 }} onClick={deleteLecture}>\n                        <Icon\n                            size={12}\n                            onClick={() => {}}\n                            style={{\n                                color: \"rgba(255, 255, 255, 0.6)\",\n                                opacity: deleteLecture ? 1 : 0,\n                                pointerEvents: deleteLecture ? \"auto\" : \"none\",\n                            }}\n                        >\n                            <Close />\n                        </Icon>\n                    </IconButton>\n                </LectureDeleteWrapper>\n            </LectureTileInner>\n        </LectureTileWrapper>\n    )\n}\n\nconst MemoizedLectureTile = memo(LectureTile, (prevProps, nextProps) => {\n    return (\n        prevProps.lecture === nextProps.lecture &&\n        prevProps.classIdx === nextProps.classIdx\n    )\n})\n\nconst OverlapTileWrapper = styled(FlexWrapper)<{\n    day: number\n    begin: number\n    end: number\n}>`\n    grid-column: ${({ day }) => day + 1};\n    grid-row: ${({ begin, end }) => `${begin + 2} / ${end + 2}`};\n    pointer-events: none;\n    backdrop-filter: grayscale(100%);\n`\n\nconst OverlapTileInner = styled(FlexWrapper)`\n    border-radius: 2px;\n`\n\ninterface OverlapTileProps {\n    day: number\n    begin: number\n    end: number\n}\n\nfunction OverlapTile({ day, begin, end }: OverlapTileProps) {\n    return (\n        <OverlapTileWrapper\n            direction=\"column\"\n            gap={0}\n            day={day}\n            begin={begin}\n            end={end}\n            align=\"stretch\"\n            justify=\"stretch\"\n        >\n            <OverlapTileInner direction=\"column\" gap={0} flex=\"1 1 auto\" />\n        </OverlapTileWrapper>\n    )\n}\n\nexport { MemoizedHoverTile as HoverTile, MemoizedLectureTile as LectureTile, OverlapTile }\n","import { Fragment, memo, useCallback, useEffect, useRef, useState } from \"react\"\n\nimport styled from \"@emotion/styled\"\nimport { useTranslation } from \"react-i18next\"\n\nimport { WeekdayEnum } from \"@/common/enum/weekdayEnum\"\nimport FlexWrapper from \"@/common/primitives/FlexWrapper\"\nimport GridWrapper from \"@/common/primitives/GridWrapper\"\nimport Typography from \"@/common/primitives/Typography\"\nimport { type Lecture } from \"@/common/schemas/lecture\"\nimport { type TimeBlock } from \"@/common/schemas/timeblock\"\n\nimport {\n    HoverTile,\n    LECTURE_TILE_CLASSNAME,\n    LectureTile,\n    LectureTileHoverCss,\n    OverlapTile,\n} from \"./Tile\"\n\nconst TIME_BEGIN = 8\nconst TIME_END = 24\n\nconst TIMES24 = Array.from(\n    { length: TIME_END - TIME_BEGIN + 1 },\n    (_, i) => TIME_BEGIN + i,\n)\n\nconst TIMES = TIMES24.map((time) => (time % 12 || 12).toString())\n\nconst SLOT_COUNT = (TIMES.length - 1) * 2\n\nconst DAYS = [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\"]\n\nconst HEADER_HEIGHT = 20\nconst HEADER_CALIBRATION = 0.8\nconst ROW_GAP = 5\nconst LINE_HEIGHT = 1\n\nconst BackgroundGrid = styled(GridWrapper)`\n    z-index: 1;\n`\n\nconst OverlayGrid = styled(GridWrapper)`\n    position: absolute;\n    z-index: 2;\n    pointer-events: none;\n\n    --hover-day: 0;\n    --hover-start: 0;\n    --hover-end: 0;\n`\n\nconst BackgroundGridBlock = styled(FlexWrapper)`\n    box-sizing: border-box;\n    touch-action: none;\n\n    &.half {\n        border-top: ${LINE_HEIGHT}px dashed ${({ theme }) => theme.colors.Line.block};\n    }\n\n    &.hour {\n        border-top: ${LINE_HEIGHT}px solid ${({ theme }) => theme.colors.Line.block};\n    }\n\n    &.last {\n        border-bottom: ${LINE_HEIGHT}px solid ${({ theme }) => theme.colors.Line.darker};\n    }\n\n    &.bold {\n        border-color: ${({ theme }) => theme.colors.Line.darker};\n    }\n\n    user-select: none;\n\n    [data-need-time-filter=\"true\"] & {\n        pointer-events: auto;\n        cursor: pointer;\n\n        @media (hover: hover) {\n            :hover div {\n                background: rgba(229, 76, 101, 0.2);\n            }\n        }\n    }\n\n    [data-need-time-filter=\"true\"][data-is-dragging=\"true\"] & {\n        :hover div {\n            background: none;\n        }\n\n        cursor: ns-resize;\n    }\n`\n\ninterface BackgroundGridBlockProps {\n    dayIdx: number\n    timeIdx: number\n    [key: string]: any\n}\n\nconst MemoizedBackgroundGridBlock = memo(\n    ({ dayIdx, timeIdx, ...rest }: BackgroundGridBlockProps) => {\n        return (\n            <BackgroundGridBlock\n                direction=\"column\"\n                gap={0}\n                padding=\"1px\"\n                align=\"stretch\"\n                justify=\"stretch\"\n                {...rest}\n            >\n                <FlexWrapper\n                    direction=\"column\"\n                    gap={0}\n                    flex=\"1 1 auto\"\n                    style={{ borderRadius: \"4px\", pointerEvents: \"none\" }}\n                />\n            </BackgroundGridBlock>\n        )\n    },\n)\n\nconst LectureTileWrapper = styled.div<{ lectureId: number }>`\n    display: contents;\n\n    &:has(.${LECTURE_TILE_CLASSNAME}:hover) .${LECTURE_TILE_CLASSNAME} {\n        ${({ theme }) => LectureTileHoverCss(theme)}\n    }\n`\n\ninterface LectureTilesProps {\n    lecture: Lecture\n    handleLectureTileHover?: (lecture: Lecture) => void\n    handleLectureTileSelect?: (lecture: Lecture) => void\n    deleteLecture?: (lecture: Lecture) => void\n    isGhost?: boolean\n}\n\nconst MemoizedLectureTiles = memo(\n    ({\n        lecture,\n        handleLectureTileHover,\n        handleLectureTileSelect,\n        deleteLecture,\n        isGhost = false,\n    }: LectureTilesProps) => {\n        const handleMouseEnter = useCallback(() => {\n            handleLectureTileHover?.(lecture)\n        }, [handleLectureTileHover, lecture])\n\n        const handleMouseClick = useCallback(() => {\n            handleLectureTileSelect?.(lecture)\n        }, [handleLectureTileSelect, lecture])\n\n        const deleteLectureCallback = useCallback(() => {\n            deleteLecture?.(lecture)\n        }, [deleteLecture, lecture])\n\n        return (\n            <LectureTileWrapper\n                lectureId={lecture.id}\n                onPointerEnter={handleMouseEnter}\n                onPointerDown={handleMouseClick}\n                onTouchMove={handleMouseEnter}\n                {...(isGhost ? { \"data-ghost\": true } : {})}\n            >\n                {lecture.classes.map((_, classIdx) => (\n                    <LectureTile\n                        key={`${classIdx}-lecture`}\n                        lecture={lecture}\n                        classIdx={classIdx}\n                        deleteLecture={deleteLecture ? deleteLectureCallback : undefined}\n                    />\n                ))}\n            </LectureTileWrapper>\n        )\n    },\n    (prevProps, nextProps) => {\n        return (\n            prevProps.lecture === nextProps.lecture &&\n            prevProps.handleLectureTileHover === nextProps.handleLectureTileHover &&\n            prevProps.handleLectureTileSelect === nextProps.handleLectureTileSelect &&\n            prevProps.deleteLecture === nextProps.deleteLecture\n        )\n    },\n)\n\ninterface OverlapTileProps {\n    overlaps: {\n        day: WeekdayEnum\n        begin: number\n        end: number\n    }[]\n}\n\nconst OverlapTileWrapper = styled.div`\n    display: contents;\n    z-index: 4;\n`\n\nconst MemoizedOverlapTiles = memo(({ overlaps }: OverlapTileProps) => {\n    return (\n        <OverlapTileWrapper>\n            {overlaps.map((overlap, idx) => (\n                <OverlapTile key={idx} {...overlap} />\n            ))}\n        </OverlapTileWrapper>\n    )\n})\n\ninterface CustomTimeTableGridProps {\n    lectures: Lecture[]\n    cellWidth?: string\n    needTimeFilter?: boolean\n    timeFilter?: TimeBlock | null\n    setTimeFilter?: React.Dispatch<React.SetStateAction<TimeBlock | null>>\n    needLectureInteraction?: boolean\n    needLectureDeletable?: boolean\n    deleteLecture?: (lectureId: number) => void\n    hoveredLectures?: Lecture[]\n    setHoveredLectures?: React.Dispatch<React.SetStateAction<Lecture[]>>\n    selectedLecture?: Lecture | null\n    setSelectedLecture?: React.Dispatch<React.SetStateAction<Lecture | null>>\n}\n\nfunction CustomTimeTableGrid({\n    lectures,\n    cellWidth,\n    needTimeFilter = true,\n    timeFilter,\n    setTimeFilter,\n    needLectureInteraction = true,\n    needLectureDeletable = true,\n    deleteLecture,\n    hoveredLectures = [],\n    setHoveredLectures,\n    selectedLecture = null,\n    setSelectedLecture,\n}: CustomTimeTableGridProps) {\n    const { t } = useTranslation()\n\n    const backgroundRef = useRef<HTMLDivElement>(null)\n    const overlayRef = useRef<HTMLDivElement>(null)\n\n    const draggingRef = useRef<boolean>(false)\n    const anchorRef = useRef<number | null>(null)\n\n    const timeRef = useRef<[number, number] | null>(null)\n    const dayRef = useRef<number | null>(null)\n\n    const [ghostLecture, setGhostLecture] = useState<Lecture | null>(null)\n    const [overlaps, setOverlaps] = useState<\n        {\n            day: WeekdayEnum\n            begin: number\n            end: number\n        }[]\n    >([])\n\n    const handlePointerDown = useCallback((x: number, y: number) => {\n        const target = document.elementFromPoint(x, y)\n        if (target == null || !target.classList.contains(\"background-grid-block\")) return\n        const timeIdx = parseInt(target.getAttribute(\"data-time-idx\") || \"\", 10)\n        const dayIdx = parseInt(target.getAttribute(\"data-day-idx\") || \"\", 10)\n        if (timeIdx == null || dayIdx == null) return\n        const startRow = timeIdx + 2\n        overlayRef.current?.style.setProperty(\"--hover-day\", (dayIdx + 1).toString())\n        overlayRef.current?.style.setProperty(\"--hover-start\", startRow.toString())\n        overlayRef.current?.style.setProperty(\"--hover-end\", (startRow + 1).toString())\n        overlayRef.current?.setAttribute(\"data-is-dragging\", \"true\")\n        backgroundRef.current?.setAttribute(\"data-is-dragging\", \"true\")\n        draggingRef.current = true\n\n        timeRef.current = [timeIdx, timeIdx + 1]\n        dayRef.current = dayIdx\n        anchorRef.current = timeIdx\n    }, [])\n\n    const handlePointerMove = useCallback((x: number, y: number) => {\n        const target = document.elementFromPoint(x, y)\n        if (target == null || !target.classList.contains(\"background-grid-block\")) return\n        const timeIdx = parseInt(target.getAttribute(\"data-time-idx\") || \"\", 10)\n        if (timeIdx == null) return\n        const start = anchorRef.current == null ? timeIdx : anchorRef.current\n        const end = timeIdx\n        const minIdx = Math.min(start, end)\n        const maxIdx = Math.max(start, end)\n        const rowStart = minIdx + 2\n        const rowEnd = maxIdx + 3\n        overlayRef.current?.style.setProperty(\"--hover-start\", rowStart.toString())\n        overlayRef.current?.style.setProperty(\"--hover-end\", rowEnd.toString())\n        timeRef.current = [minIdx, maxIdx + 1]\n    }, [])\n\n    const handlePointerLeave = useCallback(() => {\n        if (timeRef.current && dayRef.current !== null)\n            setTimeFilter?.({\n                day: dayRef.current,\n                begin: (TIME_BEGIN + timeRef.current[0] * 0.5) * 60,\n                end: (TIME_BEGIN + timeRef.current[1] * 0.5) * 60,\n            })\n\n        if (timeRef.current && timeRef.current[1] - timeRef.current[0] > 1) {\n            overlayRef.current?.setAttribute(\"data-is-dragging\", \"wait\")\n            backgroundRef.current?.setAttribute(\"data-is-dragging\", \"wait\")\n        } else if (\n            (timeRef.current && timeRef.current[1] - timeRef.current[0] <= 1) ||\n            !timeFilter\n        ) {\n            overlayRef.current?.setAttribute(\"data-is-dragging\", \"false\")\n            backgroundRef.current?.setAttribute(\"data-is-dragging\", \"false\")\n            setTimeFilter?.(null)\n        }\n\n        draggingRef.current = false\n        timeRef.current = null\n        dayRef.current = null\n        anchorRef.current = null\n    }, [timeFilter, setTimeFilter])\n\n    useEffect(() => {\n        if (!timeFilter) {\n            overlayRef.current?.setAttribute(\"data-is-dragging\", \"false\")\n            backgroundRef.current?.setAttribute(\"data-is-dragging\", \"false\")\n        }\n    }, [timeFilter])\n\n    const handleMouseDown = useCallback(\n        (e: React.PointerEvent<HTMLDivElement>) => {\n            if (draggingRef.current || !needTimeFilter) return\n            handlePointerDown(e.clientX, e.clientY)\n        },\n        [needTimeFilter],\n    )\n\n    const handleMouseMove = useCallback(\n        (e: React.PointerEvent<HTMLDivElement>) => {\n            if (!draggingRef.current || anchorRef.current === null) return\n            handlePointerMove(e.clientX, e.clientY)\n        },\n        [handlePointerMove],\n    )\n\n    const handleTouchMove = useCallback(\n        (e: React.TouchEvent<HTMLDivElement>) => {\n            if (!draggingRef.current || anchorRef.current === null) return\n            const touch = e.touches[0]\n            if (touch == null) return\n            handlePointerMove(touch.clientX, touch.clientY)\n        },\n        [handlePointerMove],\n    )\n\n    const handleLectureTileHoverCallBack = useCallback(\n        (lecture: Lecture) => {\n            if (!needLectureInteraction) return\n\n            setHoveredLectures?.([lecture])\n        },\n        [setHoveredLectures, needLectureInteraction],\n    )\n\n    const handleLectureTileSelectCallback = useCallback(\n        (lecture: Lecture) => {\n            if (!needLectureInteraction) return\n\n            setSelectedLecture?.((prev) => {\n                return prev?.id === lecture.id ? null : lecture\n            })\n        },\n        [setSelectedLecture, needLectureInteraction],\n    )\n\n    const clearHoveredLecturesCallback = useCallback(() => {\n        setHoveredLectures?.([])\n        overlayRef.current?.setAttribute(\"data-is-hovering\", \"false\")\n    }, [setHoveredLectures])\n\n    const deleteLectureCallback = useCallback(\n        (lecture: Lecture) => {\n            if (needLectureInteraction && needLectureDeletable)\n                deleteLecture?.(lecture.id)\n        },\n        [needLectureDeletable, deleteLecture],\n    )\n\n    useEffect(() => {\n        if (!needLectureInteraction) return\n\n        const hoveredIds = hoveredLectures.map((lec) => lec.id).join(\" \")\n\n        overlayRef.current?.setAttribute(\"data-hovered-lectures\", hoveredIds)\n    }, [hoveredLectures, needLectureInteraction, lectures])\n\n    useEffect(() => {\n        if (!needLectureInteraction) return\n\n        const selectedId = selectedLecture ? selectedLecture.id.toString() : \"\"\n\n        if (selectedId !== \"\")\n            overlayRef.current?.setAttribute(\"data-selected-lecture\", selectedId)\n        else overlayRef.current?.setAttribute(\"data-selected-lecture\", \"\")\n    }, [selectedLecture, needLectureInteraction, lectures])\n\n    useEffect(() => {\n        if (!needLectureInteraction) return\n\n        if (\n            hoveredLectures[0] &&\n            !lectures.some((lec) => lec.id === hoveredLectures[0]?.id)\n        ) {\n            setGhostLecture(hoveredLectures[0])\n        } else if (\n            selectedLecture &&\n            !lectures.some((lec) => lec.id === selectedLecture.id)\n        ) {\n            setGhostLecture(selectedLecture)\n        } else {\n            setGhostLecture(null)\n        }\n    }, [hoveredLectures, selectedLecture, lectures])\n\n    useEffect(() => {\n        if (!needLectureInteraction) return\n\n        const intervals: typeof overlaps = []\n\n        if (ghostLecture) {\n            ghostLecture.classes.forEach((gClass) => {\n                lectures.forEach((lecture) => {\n                    lecture.classes.forEach((lClass) => {\n                        if (gClass.day === lClass.day) {\n                            const gStart = gClass.begin\n                            const gEnd = gClass.end\n                            const lStart = lClass.begin\n                            const lEnd = lClass.end\n\n                            const overlapStart = Math.max(gStart, lStart)\n                            const overlapEnd = Math.min(gEnd, lEnd)\n\n                            if (overlapStart < overlapEnd) {\n                                intervals.push({\n                                    day: gClass.day,\n                                    begin: (overlapStart / 60 - TIME_BEGIN) * 2,\n                                    end: (overlapEnd / 60 - TIME_BEGIN) * 2,\n                                })\n                            }\n                        }\n                    })\n                })\n            })\n        }\n\n        setOverlaps(ghostLecture ? intervals : [])\n    }, [ghostLecture, lectures, needLectureInteraction])\n\n    return (\n        <FlexWrapper\n            direction=\"row\"\n            gap={ROW_GAP * 2}\n            align=\"stretch\"\n            justify=\"stretch\"\n            flex=\"1 1 auto\"\n            style={{ userSelect: \"none\" }}\n        >\n            <FlexWrapper\n                direction=\"column\"\n                gap={0}\n                align=\"stretch\"\n                padding={`${HEADER_HEIGHT * HEADER_CALIBRATION}px 0 0 0`}\n            >\n                <FlexWrapper\n                    direction=\"column\"\n                    gap={0}\n                    align=\"end\"\n                    justify=\"space-between\"\n                    flex=\"1 1 auto\"\n                    style={{ fontSize: \"8px\" }}\n                >\n                    {TIMES.map((time, idx) => (\n                        <Typography key={idx} color=\"Text.dark\">\n                            {time}\n                        </Typography>\n                    ))}\n                </FlexWrapper>\n            </FlexWrapper>\n            <FlexWrapper\n                direction=\"column\"\n                gap={0}\n                align=\"stretch\"\n                justify=\"stretch\"\n                flex=\"1 1 auto\"\n                padding={`0 0 ${HEADER_HEIGHT * (1 - HEADER_CALIBRATION)}px 0`}\n                className=\"timetable-grid-wrapper\"\n            >\n                <BackgroundGrid\n                    columns={`repeat(${DAYS.length}, ${cellWidth || \"1fr\"})`}\n                    rows={`${HEADER_HEIGHT}px repeat(${SLOT_COUNT}, 1fr)`}\n                    flow=\"column\"\n                    gap={`0px ${ROW_GAP}px`}\n                    alignItems=\"stretch\"\n                    justifyItems=\"stretch\"\n                    ref={backgroundRef}\n                    data-is-dragging=\"false\"\n                    data-need-time-filter={needTimeFilter}\n                    {...(needTimeFilter\n                        ? {\n                              onPointerDown: handleMouseDown,\n                              onPointerMove: handleMouseMove,\n                              onPointerUp: handlePointerLeave,\n                              onPointerLeave: handlePointerLeave,\n                              onTouchMove: handleTouchMove,\n                              onTouchEnd: handlePointerLeave,\n                          }\n                        : {})}\n                >\n                    {DAYS.map((day, dayIdx) => (\n                        <Fragment key={day}>\n                            <FlexWrapper direction=\"column\" gap={0} align=\"center\">\n                                <Typography type=\"Small\" color=\"Text.dark\">\n                                    {t(`common.days.${day}`)}\n                                </Typography>\n                            </FlexWrapper>\n\n                            {Array.from({ length: SLOT_COUNT }).map((_, timeIdx) => (\n                                <MemoizedBackgroundGridBlock\n                                    key={`${day}-${timeIdx}-memo`}\n                                    dayIdx={dayIdx}\n                                    timeIdx={timeIdx}\n                                    className={[\n                                        \"background-grid-block\",\n                                        timeIdx % 2 === 0 ? \"hour\" : \"half\",\n                                        timeIdx === SLOT_COUNT - 1 ? \"last\" : \"\",\n                                        timeIdx % 2 == 0 &&\n                                        (TIMES24[Math.floor(timeIdx / 2)] || 0) % 6 === 0\n                                            ? \"bold\"\n                                            : \"\",\n                                    ].join(\" \")}\n                                    data-day-idx={dayIdx}\n                                    data-time-idx={timeIdx}\n                                />\n                            ))}\n                        </Fragment>\n                    ))}\n                </BackgroundGrid>\n                <OverlayGrid\n                    columns={`repeat(${DAYS.length}, ${cellWidth || \"1fr\"})`}\n                    rows={`${HEADER_HEIGHT}px repeat(${SLOT_COUNT}, 1fr)`}\n                    flow=\"column\"\n                    gap={`${LINE_HEIGHT}px ${ROW_GAP}px`}\n                    alignItems=\"stretch\"\n                    justifyItems=\"stretch\"\n                    padding={`0 0 ${HEADER_HEIGHT * (1 - HEADER_CALIBRATION)}px 0`}\n                    ref={overlayRef}\n                    data-interaction={needLectureInteraction}\n                    data-lecture-deletable={needLectureDeletable}\n                    data-is-dragging={false}\n                    data-hovered-lectures=\"\"\n                    data-selected-lecture=\"\"\n                    onPointerLeave={clearHoveredLecturesCallback}\n                    onTouchEnd={clearHoveredLecturesCallback}\n                >\n                    {needTimeFilter && <HoverTile />}\n                    {lectures.map((lecture, lectureIdx) => (\n                        <MemoizedLectureTiles\n                            key={`${lecture.id}-lecture-tile-${lectureIdx}`}\n                            lecture={lecture}\n                            deleteLecture={deleteLectureCallback}\n                            handleLectureTileHover={handleLectureTileHoverCallBack}\n                            handleLectureTileSelect={handleLectureTileSelectCallback}\n                        />\n                    ))}\n                    {ghostLecture && (\n                        <MemoizedLectureTiles lecture={ghostLecture} isGhost={true} />\n                    )}\n                    {ghostLecture && <MemoizedOverlapTiles overlaps={overlaps} />}\n                </OverlayGrid>\n            </FlexWrapper>\n        </FlexWrapper>\n    )\n}\n\nexport default memo(CustomTimeTableGrid, (prevProps, nextProps) => {\n    return (\n        prevProps.lectures === nextProps.lectures &&\n        prevProps.cellWidth === nextProps.cellWidth &&\n        prevProps.timeFilter === nextProps.timeFilter &&\n        prevProps.needTimeFilter === nextProps.needTimeFilter &&\n        prevProps.needLectureInteraction === nextProps.needLectureInteraction &&\n        prevProps.needLectureDeletable === nextProps.needLectureDeletable &&\n        prevProps.deleteLecture === nextProps.deleteLecture &&\n        prevProps.hoveredLectures === nextProps.hoveredLectures &&\n        prevProps.setHoveredLectures === nextProps.setHoveredLectures &&\n        prevProps.selectedLecture === nextProps.selectedLecture &&\n        prevProps.setSelectedLecture === nextProps.setSelectedLecture\n    )\n})\n"],"names":["GridWrapper","styled","columns","rows","gap","alignItems","justifyItems","alignContents","justifyContents","flow","padding","flattenTimeTableColors","timeTable","HoverTileWrapper","FlexWrapper","HoverTileInner","HoverTile","jsx","MemoizedHoverTile","memo","LECTURE_TILE_CLASSNAME","LectureTileHoverCss","theme","css","LectureTileWrapper","col","rowStart","rowEnd","lectureId","LectureTileInner","courseId","flat","LectureDeleteWrapper","LectureTile","lecture","classIdx","deleteLecture","cls","jsxs","ThemeProvider","lightTheme","Typography","professor","IconButton","Icon","Close","MemoizedLectureTile","prevProps","nextProps","OverlapTileWrapper","day","begin","end","OverlapTileInner","OverlapTile","TIME_BEGIN","TIME_END","TIMES24","_","i","TIMES","time","SLOT_COUNT","DAYS","HEADER_HEIGHT","HEADER_CALIBRATION","ROW_GAP","LINE_HEIGHT","BackgroundGrid","OverlayGrid","BackgroundGridBlock","MemoizedBackgroundGridBlock","dayIdx","timeIdx","rest","MemoizedLectureTiles","handleLectureTileHover","handleLectureTileSelect","isGhost","handleMouseEnter","useCallback","handleMouseClick","deleteLectureCallback","MemoizedOverlapTiles","overlaps","overlap","idx","CustomTimeTableGrid","lectures","cellWidth","needTimeFilter","timeFilter","setTimeFilter","needLectureInteraction","needLectureDeletable","hoveredLectures","setHoveredLectures","selectedLecture","setSelectedLecture","t","useTranslation","backgroundRef","useRef","overlayRef","draggingRef","anchorRef","timeRef","dayRef","ghostLecture","setGhostLecture","useState","setOverlaps","handlePointerDown","x","y","target","startRow","handlePointerMove","start","minIdx","maxIdx","handlePointerLeave","useEffect","handleMouseDown","e","handleMouseMove","handleTouchMove","touch","handleLectureTileHoverCallBack","handleLectureTileSelectCallback","prev","clearHoveredLecturesCallback","hoveredIds","lec","selectedId","intervals","gClass","lClass","gStart","gEnd","lStart","lEnd","overlapStart","overlapEnd","Fragment","lectureIdx","CustomTimeTableGrid$1"],"mappings":"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"}
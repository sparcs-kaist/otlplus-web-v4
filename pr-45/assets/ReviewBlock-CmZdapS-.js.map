{"version":3,"file":"ReviewBlock-CmZdapS-.js","sources":["../../../node_modules/.pnpm/@mui+icons-material@7.1.0_@mui+material@7.1.0_@emotion+react@11.14.0_@types+react@19.2._e26b62497e618de25be77c80dcc73696/node_modules/@mui/icons-material/esm/Favorite.js","../../../node_modules/.pnpm/@mui+icons-material@7.1.0_@mui+material@7.1.0_@emotion+react@11.14.0_@types+react@19.2._e26b62497e618de25be77c80dcc73696/node_modules/@mui/icons-material/esm/FavoriteBorderOutlined.js","../../../app/utils/professorName.ts","../../../app/common/components/reviews/ReviewBlock.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z\"\n}), 'Favorite');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05\"\n}), 'FavoriteBorderOutlined');","import i18n from \"i18next\"\n\nimport { type Professor } from \"@/common/schemas/professor\"\n\nfunction professorName(professors: Professor[]): string {\n    if (!professors) return \"\"\n    if (professors.length === 0) return \"\"\n    return `${professors[0]?.name}${professors.length > 1 ? i18n.t(\"common.professors.over\") + (professors.length - 1) + i18n.t(\"common.professors.people\") : \"\"}`\n}\n\nexport default professorName\n","import { memo, useState } from \"react\"\n\nimport styled from \"@emotion/styled\"\nimport FavoriteIcon from \"@mui/icons-material/Favorite\"\nimport FavoriteBorderOutlinedIcon from \"@mui/icons-material/FavoriteBorderOutlined\"\nimport { useTranslation } from \"react-i18next\"\nimport { useNavigate } from \"react-router\"\n\nimport { ScoreEnum } from \"@/common/enum/scoreEnum\"\nimport { semesterToString } from \"@/common/enum/semesterEnum\"\nimport FlexWrapper from \"@/common/primitives/FlexWrapper\"\nimport Icon from \"@/common/primitives/Icon\"\nimport Typography from \"@/common/primitives/Typography\"\nimport { type Review } from \"@/common/schemas/review\"\nimport { useAPI } from \"@/utils/api/useAPI\"\nimport professorName from \"@/utils/professorName\"\n\nconst Content = styled(Typography)<{ overflow: boolean }>`\n    line-height: 1.5;\n    width: 100%;\n\n    ${(props) =>\n        props.overflow &&\n        `\n        text-overflow: ellipsis;\n        overflow: hidden;\n        word-break: break-word;\n        \n        display: -webkit-box;\n        -webkit-line-clamp: 5;\n        -webkit-box-orient: vertical;\n    `}\n`\n\nconst ReviewWrapper = styled.div<{ clickable: boolean }>`\n    padding: 8px 6px;\n    width: 100%;\n    border-radius: 6px;\n    border: 1px ${({ theme }) => theme.colors.Background.Block.dark} solid;\n    background-color: ${({ theme }) => theme.colors.Background.Block.default};\n\n    &:hover {\n        background-color: ${(props) =>\n            props.clickable\n                ? props.theme.colors.Background.Block.dark\n                : props.theme.colors.Background.Block.default};\n    }\n`\n\nconst SelectWrapper = styled(FlexWrapper)<{ clickable: boolean }>`\n    width: 100%;\n    cursor: ${(props) => (props.clickable ? \"pointer\" : \"default\")};\n    user-select: ${(props) => (props.clickable ? \"none\" : \"auto\")};\n`\n\ninterface ReviewBlockProps {\n    review: Review\n    withWrapper?: boolean\n    linkToDictionary?: boolean\n}\n\nfunction ReviewBlock({\n    review,\n    withWrapper = true,\n    linkToDictionary = true,\n}: ReviewBlockProps) {\n    const { t } = useTranslation()\n    const navigator = useNavigate()\n\n    const { requestFunction } = useAPI(\"PATCH\", `/reviews/${review.id}/liked`, {\n        onSuccess: () => {\n            setLikeOverride((prev) => {\n                if (prev === null) {\n                    return !review.likedByUser\n                } else {\n                    return !prev\n                }\n            })\n        },\n    })\n\n    const [likeOverride, setLikeOverride] = useState<boolean | null>(null)\n\n    if (!review) return\n\n    const likeReview = (e: React.MouseEvent) => {\n        e.stopPropagation()\n        requestFunction({\n            reviewId: review.id,\n            action: (likeOverride ?? review.likedByUser) ? \"unlike\" : \"like\",\n        })\n    }\n\n    const reviewContent = (\n        <SelectWrapper\n            direction=\"column\"\n            align=\"stretch\"\n            gap={8}\n            padding=\"0 4px\"\n            clickable={linkToDictionary}\n            onClick={() => {\n                if (linkToDictionary) {\n                    navigator(`/dictionary?courseId=${review.courseId}`)\n                }\n            }}\n        >\n            <FlexWrapper direction=\"row\" gap={6}>\n                <Typography type=\"NormalBold\" color=\"Text.default\">\n                    {review.courseName}\n                </Typography>\n                <Typography type=\"Normal\" color=\"Text.lighter\">\n                    {professorName(review.professors)}\n                </Typography>\n                <Typography type=\"Normal\" color=\"Text.lighter\">\n                    {review.year} {semesterToString(review.semester)}\n                </Typography>\n            </FlexWrapper>\n            <FlexWrapper direction=\"row\" gap={0} style={{ overflow: \"hidden\" }}>\n                <Content type=\"Normal\" color=\"Text.default\" overflow={!withWrapper}>\n                    {review.content}\n                </Content>\n            </FlexWrapper>\n            <FlexWrapper direction=\"row\" justify=\"space-between\" gap={0}>\n                <FlexWrapper direction=\"row\" gap={8}>\n                    <Typography type=\"Normal\" color=\"Text.lighter\">\n                        {t(\"common.review.like\")} {review.like}\n                    </Typography>\n                    <Typography type=\"Normal\" color=\"Text.lighter\">\n                        {t(\"common.grade\")} {ScoreEnum[review.grade]}\n                    </Typography>\n                    <Typography type=\"Normal\" color=\"Text.lighter\">\n                        {t(\"common.load\")} {ScoreEnum[review.load]}\n                    </Typography>\n                    <Typography type=\"Normal\" color=\"Text.lighter\">\n                        {t(\"common.speech\")} {ScoreEnum[review.speech]}\n                    </Typography>\n                </FlexWrapper>\n                <FlexWrapper direction=\"row\" gap={4} onClick={(e) => likeReview(e)}>\n                    <Typography type=\"Normal\" color=\"Highlight.default\">\n                        {t(\"common.review.like\")}\n                    </Typography>\n                    <Icon size={18} color=\"crimson\">\n                        {(likeOverride ?? review.likedByUser) ? (\n                            <FavoriteIcon />\n                        ) : (\n                            <FavoriteBorderOutlinedIcon />\n                        )}\n                    </Icon>\n                </FlexWrapper>\n            </FlexWrapper>\n        </SelectWrapper>\n    )\n\n    if (withWrapper) {\n        return <ReviewWrapper clickable={linkToDictionary}>{reviewContent}</ReviewWrapper>\n    } else return reviewContent\n}\n\nexport default memo(ReviewBlock)\n"],"names":["FavoriteIcon","createSvgIcon","_jsx","FavoriteBorderOutlined","professorName","professors","i18n","Content","styled","Typography","props","ReviewWrapper","theme","SelectWrapper","FlexWrapper","ReviewBlock","review","withWrapper","linkToDictionary","t","useTranslation","navigator","useNavigate","requestFunction","useAPI","setLikeOverride","prev","likeOverride","useState","likeReview","e","reviewContent","jsxs","jsx","semesterToString","ScoreEnum","Icon","FavoriteBorderOutlinedIcon","ReviewBlock$1","memo"],"mappings":"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","x_google_ignoreList":[0,1]}
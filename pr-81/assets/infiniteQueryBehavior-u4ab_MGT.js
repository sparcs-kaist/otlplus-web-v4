import{B as K,C as Q,D as k}from"./useIsDevice-Ebjg6yWC.js";function O(r){return{onFetch:(e,t)=>{const s=e.options,c=e.fetchOptions?.meta?.fetchMore?.direction,u=e.state.data?.pages||[],f=e.state.data?.pageParams||[];let i={pages:[],pageParams:[]},l=0;const d=async()=>{let g=!1;const b=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},q=K(e.options,e.fetchOptions),m=async(a,n,o)=>{if(g)return Promise.reject();if(n==null&&a.pages.length)return Promise.resolve(a);const w=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:n,direction:o?"backward":"forward",meta:e.options.meta};return b(F),F})(),C=await q(w),{maxPages:h}=e.options,y=o?Q:k;return{pages:y(a.pages,C,h),pageParams:y(a.pageParams,n,h)}};if(c&&u.length){const a=c==="backward",n=a?v:P,o={pages:u,pageParams:f},p=n(s,o);i=await m(o,p,a)}else{const a=r??u.length;do{const n=l===0?f[0]??s.initialPageParam:P(s,i);if(l>0&&n==null)break;i=await m(i,n),l++}while(l<a)}return i};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=d}}}function P(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function v(r,{pages:e,pageParams:t}){return e.length>0?r.getPreviousPageParam?.(e[0],e,t[0],t):void 0}function T(r,e){return e?P(r,e)!=null:!1}function j(r,e){return!e||!r.getPreviousPageParam?!1:v(r,e)!=null}export{T as a,j as h,O as i};
//# sourceMappingURL=infiniteQueryBehavior-u4ab_MGT.js.map

import{j as o,a as d}from"./emotion-react-jsx-runtime.browser.esm-Cql-SmI8.js";import{r as i,L as j}from"./chunk-UIGDSWPH-ClC-Bows.js";import{F as c,n as B}from"./FlexWrapper-B3Tmr1Ow.js";import{k as M,u as E,x as I}from"./useIsDevice-BAiF1JW-.js";import{T as g}from"./Typography-YMZw2QHy.js";import{W as L}from"./Widget-Crs3_Da_.js";import{T as b}from"./Trans-BnR27Moe.js";import"./index-CtIsX8Fj.js";import"./env-x7j716XO.js";const v=B(j)`
    color: ${({theme:e})=>e.colors.Highlight.default};
    text-decoration: none;
    font-size: ${({theme:e})=>e.fonts.NormalBold.fontSize}px;
    font-weight: ${({theme:e})=>e.fonts.NormalBold.fontWeight};

    &:hover {
        color: ${({theme:e})=>e.colors.Highlight.dark};
    }
`;function q(){const{query:e}=M("GET","/semesters"),[u,T]=i.useState(new Date),[x,$]=i.useState(""),[f,k]=i.useState(null),[h,p]=i.useState(""),[a,S]=i.useState(null),{t:l}=E();i.useEffect(()=>{const n=setInterval(()=>T(new Date),1e3);return()=>clearInterval(n)},[]),i.useEffect(()=>{if(!e.data?.semesters)return;const n=e.data.semesters[e.data.semesters.length-1];if(!n)return;k({year:n.year,semester:n.semester});const m=Object.entries(n).filter(([t,r])=>t!=="year"&&t!=="semester"&&r!==null).map(([t,r])=>[t,new Date(r)]).sort((t,r)=>t[1].getTime()-r[1].getTime());for(const[t,r]of m)if(u.getTime()<=r.getTime()){p(t),S(r);return}const s=m[m.length-1];s&&(p(s[0]),S(s[1]))},[e.data]),i.useEffect(()=>{if(!a)return;const n=a.getTime()-u.getTime(),m=n<0,s=Math.abs(n),t=Math.floor(s/(1e3*60*60*24)),r=Math.floor(s/(1e3*60*60)%24),w=Math.floor(s/(1e3*60)%60),D=Math.floor(s/1e3%60);$(`D${m?"+":"-"}${t} ${r}${l("common.hours")} ${w}${l("common.minutes")} ${D}${l("common.seconds")}`)},[u,a]);function y(){return f?f.year.toString()+" "+I(f.semester)+" "+l(`main.schedule.contents.${h}`):l(`main.schedule.contents.${h}`)}return a?o(L,{direction:"column",align:"stretch",gap:0,padding:"23px 30px",children:d(c,{direction:"column",align:"stretch",gap:16,children:[d(c,{direction:"column",align:"center",gap:10,children:[d(c,{direction:"column",align:"stretch",gap:0,children:[o(c,{direction:"row",justify:"center",gap:0,children:o(g,{type:"BiggerBold",color:"Text.dark",children:o(b,{i18nKey:"main.schedule.title",values:{content:y()}})})}),o(c,{direction:"row",justify:"center",gap:0,children:o(g,{type:"BiggerBold",color:"Text.dark",children:x})})]}),o(c,{direction:"column",gap:0,children:d(g,{type:"Normal",color:"Text.placeholder",children:[y()," ",a.getFullYear(),".",String(a.getMonth()+1).padStart(2,"0"),".",String(a.getDate()).padStart(2,"0")]})})]}),o(c,{direction:"column",align:"flex-end",gap:0,children:o(v,{to:"https://erp.kaist.ac.kr",target:"_blank",children:l("main.schedule.link")})})]})}):null}export{q as default};
//# sourceMappingURL=index-B2eb93_8.js.map

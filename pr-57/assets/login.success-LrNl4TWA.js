import{w as m,y as l,r as y}from"./chunk-UIGDSWPH-ClC-Bows.js";import{u as f,b as r}from"./index-CtIsX8Fj.js";import{c as p}from"./queryPersister-Dnan5egx.js";import"./env-x7j716XO.js";const b=m(function(){const a=l(),e=f();return y.useEffect(()=>{(async()=>{const i=window.location.hash.substring(1),n=new URLSearchParams(i),o=n.get("accessToken"),c=n.get("refreshToken");if(o&&c){if(navigator.userAgent.includes("otl-app")){window.location.href=`org.sparcs.otl://login?accessToken=${o}&refreshToken=${c}`;return}await p(),e.removeQueries({queryKey:["/users/info"]}),e.removeQueries({queryKey:["/timetables"]}),await e.prefetchQuery({queryKey:["/users/info",null,"ko"],queryFn:async()=>{const{data:s}=await r.get("/api/v2/users/info");return s}});try{const{data:s}=await r.get("/api/v2/semesters");if(s?.semesters?.length>0){const t=s.semesters[s.semesters.length-1];t&&await e.prefetchQuery({queryKey:["/timetables/my-timetable",{year:t.year,semester:t.semester},"ko"],queryFn:async()=>{const{data:u}=await r.get("/api/v2/timetables/my-timetable",{params:{year:t.year,semester:t.semester}});return u}})}}catch{}a("/",{replace:!0})}else a("/",{replace:!0})})()},[a,e]),null});export{b as default};
//# sourceMappingURL=login.success-LrNl4TWA.js.map

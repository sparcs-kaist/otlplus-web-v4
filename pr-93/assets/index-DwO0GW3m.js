import{a as c,j as e}from"./emotion-react-jsx-runtime.browser.esm-D2PZwVTC.js";import{r as i}from"./chunk-UIGDSWPH-ClhI_Z4l.js";import{F as d,n as S}from"./FlexWrapper-B6Hxm4Zw.js";import{u as $}from"./index-CkPA--y0.js";import{B as y}from"./media-MLnbxw48.js";import{T as j,G as k}from"./TextInputArea-D7VDEGRe.js";import{T as l}from"./Typography-DeI78L6T.js";import{u as x}from"./useIsDevice-DHIpzarX.js";import{u as q}from"./useUserStore-KWWdrl7d.js";import{W as C}from"./Widget-e9ONaX_D.js";import{u as W}from"./useTranslation-DrmvPmDd.js";import{T as F}from"./Trans-CkPcdMxK.js";import"./env-B1fW1i7m.js";const I=S(d)`
    height: 173px;
    border-radius: 4px;
    background-color: ${({theme:u})=>u.colors.Background.Block.default};
`,L=S.div`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: 12px;
    row-gap: 8px;
    align-items: end;
`;function V(){const{user:u,status:T}=q(),m=$(),{query:r}=x("GET","/users/writable-review",{enabled:T==="success"}),{requestFunction:R}=x("POST","/reviews",{onSuccess:v}),[o,h]=i.useState(""),[a,g]=i.useState(0),[n,f]=i.useState(0),[s,w]=i.useState(0),{t}=W();function v(){r.refetch(),h(""),g(0),f(0),w(0)}function b(){r.data&&(R({lectureId:r.data.lectureId,content:o,grade:a,load:n,speech:s}),m.invalidateQueries({queryKey:["/users/written-reviews"]}),m.invalidateQueries({queryKey:[`/users/${u?.id}/lectures`]}))}return r.data?c(C,{direction:"column",gap:20,padding:"23px 30px",align:"stretch",children:[e(l,{type:"BiggerBold",color:"Text.default",children:e(F,{i18nKey:"main.reviewSection.title",values:{lectureName:r.data?.name}})}),e(I,{direction:"column",align:"stretch",justify:"stretch",gap:0,children:e(j,{placeholder:t("main.reviewSection.placeholder"),type:"text",readOnly:!1,value:o,handleChange:h,area:!0})}),c(d,{direction:"column",gap:20,align:"stretch",children:[e(L,{children:[[t("common.grade"),a,g],[t("common.load"),n,f],[t("common.speech"),s,w]].map(([p,B,G])=>c(i.Fragment,{children:[e(l,{type:"Normal",color:"Text.light",children:p}),e(d,{direction:"row",align:"center",gap:10,children:e(k,{score:B,setScore:G})},p)]},p))}),c(d,{direction:"row",justify:"flex-end",gap:12,children:[e(y,{type:"default",$paddingLeft:8,$paddingTop:8,onClick:v,children:e(l,{type:"Normal",children:t("main.reviewSection.writeAnother")})}),e(y,{type:o&&a&&s&&n?"default":"disabled",$paddingLeft:8,$paddingTop:8,onClick:b,children:e(l,{type:"Normal",color:o&&a&&s&&n?"Highlight.default":"Text.disable",children:t("common.upload")})})]})]})]}):null}export{V as default};
//# sourceMappingURL=index-DwO0GW3m.js.map

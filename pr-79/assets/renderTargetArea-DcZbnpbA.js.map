{"version":3,"file":"renderTargetArea-DcZbnpbA.js","sources":["../../../app/utils/timetable/checkAnyOver24.tsx","../../../app/utils/timetable/renderGrid.tsx","../../../app/common/components/LectureTile.tsx","../../../app/utils/timetable/checkOverlap.ts","../../../app/utils/timetable/renderLectureTile.tsx","../../../app/utils/timetable/renderTargetArea.tsx"],"sourcesContent":["import type PersonalBlock from \"@/common/interface/Personal\"\nimport type { Lecture } from \"@/common/schemas/lecture\"\nimport type { TimeBlock } from \"@/common/schemas/timeblock\"\n\nexport function checkAnyOver24(schedule: Lecture[] | PersonalBlock[]): boolean {\n    schedule.forEach((val, _) => {\n        let timeBlocks: TimeBlock[] = []\n        if (!(\"timeBlocks\" in val)) {\n            timeBlocks = val.classes\n        } else {\n            timeBlocks = val.timeBlocks\n        }\n        timeBlocks.forEach((t, __) => {\n            if (t.end > 24) {\n                return true\n            }\n        })\n    })\n    return false\n}\n","import type { JSX } from \"react\"\n\nconst renderGrid = (\n    n: number,\n    m: number,\n    cellWidth: number,\n    cellHeight: number,\n    colPadding: number,\n    placeholderIndex: number[],\n    placeholderWidth: number,\n    pageStart: number,\n) => {\n    const grid: JSX.Element[] = []\n    const lastRowIndex = n - 1\n    const lastColIndex = m - 1\n\n    for (let i = 0; i < n; i++) {\n        const row: JSX.Element[] = []\n        const isEvenRow = i % 2 === 0\n        const isLastRow = i === lastRowIndex\n\n        for (let j = 0; j < m; j++) {\n            const isShown = !placeholderIndex.includes(j + pageStart)\n            const isLastCol = j === lastColIndex\n\n            row.push(\n                <div\n                    key={j}\n                    style={{\n                        width: isShown ? cellWidth : placeholderWidth,\n                        height: cellHeight,\n                        display: \"inline-block\",\n                        textAlign: \"center\",\n                        borderTop: isShown\n                            ? isEvenRow\n                                ? \"1px solid rgba(232, 232, 232, 1)\"\n                                : \"1px dashed rgba(232, 232, 232, 1)\"\n                            : undefined,\n                        borderBottom:\n                            isShown && isLastRow\n                                ? \"1px solid rgba(232, 232, 232, 1)\"\n                                : undefined,\n                        marginRight: isLastCol ? undefined : colPadding,\n                    }}\n                />,\n            )\n        }\n        grid.push(\n            <div key={i} style={{ display: \"flex\" }}>\n                {row}\n            </div>,\n        )\n    }\n    return grid\n}\n\nexport default renderGrid\n","import type { CSSProperties } from \"react\"\nimport { memo, useMemo } from \"react\"\n\nimport styled from \"@emotion/styled\"\nimport CloseIcon from \"@mui/icons-material/Close\"\n\nimport Icon from \"@/common/primitives/Icon\"\nimport type { ClassTime, Lecture } from \"@/common/schemas/lecture\"\n\nconst flattenTimeTableColors = (timeTable: any): Array<CSSProperties[\"color\"]> => {\n    return [\n        timeTable?.red?.[1],\n        timeTable?.red?.[2],\n        timeTable?.orange?.[1],\n        timeTable?.orange?.[2],\n        timeTable?.yellow?.[1],\n        timeTable?.yellow?.[2],\n        timeTable?.green?.[1],\n        timeTable?.green?.[2],\n        timeTable?.green?.[3],\n        timeTable?.blue?.[1],\n        timeTable?.blue?.[2],\n        timeTable?.purple?.[1],\n        timeTable?.purple?.[2],\n        timeTable?.pink?.[1],\n        timeTable?.pink?.[2],\n    ].map((c) => c ?? \"#CCCCCC\")\n}\n\nconst TileWrapper = styled.div<{\n    course_id: number\n    isHighlighted: boolean\n    isOverlapped: boolean\n    hoverSelectBanned: boolean\n}>`\n    display: flex;\n    flex-direction: column;\n    padding: 4px 6px;\n    width: var(--tile-width);\n    height: var(--tile-height);\n    margin-bottom: 2px;\n    margin-top: 2px;\n    background-color: ${({ theme, course_id, isHighlighted, isOverlapped }) =>\n        isOverlapped\n            ? theme.colors.Text.default\n            : isHighlighted\n              ? theme.colors.Highlight.default\n              : (() => {\n                    const flat = flattenTimeTableColors(\n                        theme.colors?.Tile?.TimeTable?.default,\n                    )\n                    return flat[course_id % flat.length]\n                })()};\n    border-radius: 2px;\n    overflow: hidden;\n    overflow-wrap: break-word;\n    gap: 1px;\n    transition: box-shadow 0.1s ease-in-out;\n    cursor: ${({ hoverSelectBanned }) => (hoverSelectBanned ? \"default\" : \"pointer\")};\n`\n\nconst TitleWrapper = styled.span<{ isHighlighted: boolean; isOverlapped: boolean }>`\n    width: 100%;\n    font-size: ${({ theme }) => theme.fonts.Small.fontSize}px;\n    line-height: ${({ theme }) => `${theme.fonts.Small.lineHeight}px`};\n    font-weight: ${({ theme }) => theme.fonts.Small.fontWeight};\n    color: ${({ theme, isHighlighted, isOverlapped }) =>\n        isHighlighted || isOverlapped ? \"white\" : theme.colors.Text.default};\n    display: inline-block;\n    word-wrap: break-word;\n    word-break: keep-all;\n    white-space: normal;\n`\n\nconst DescWrapper = styled.span<{ isHighlighted: boolean; isOverlapped: boolean }>`\n    width: 100%;\n    font-size: ${({ theme }) => theme.fonts.Small.fontSize}px;\n    line-height: ${({ theme }) => `${theme.fonts.Small.lineHeight}px`};\n    font-weight: ${({ theme }) => theme.fonts.Small.fontWeight};\n    color: ${({ isHighlighted, isOverlapped }) =>\n        isHighlighted || isOverlapped\n            ? \"rgba(255, 255, 255, 0.6)\"\n            : \"rgba(102, 102, 102, 0.6)\"};\n    word-wrap: break-word;\n    display: inline-block;\n    word-break: break-word;\n    white-space: normal;\n`\n\nconst RemoveButton = styled.div`\n    position: absolute;\n    top: 6px;\n    right: 4px;\n    cursor: pointer;\n`\n\nconst LectureTile: React.FC<{\n    lecture: Lecture\n    timeBlock: ClassTime\n    cellWidth: number\n    cellHeight: number\n    isSelected: boolean | null\n    isHovered: boolean | null\n    hoverSelectBanned: boolean\n    isOverlapped?: boolean\n    removeFunction?: (lectureId: number) => void\n}> = ({\n    lecture,\n    timeBlock,\n    cellWidth,\n    cellHeight,\n    isSelected = false,\n    isHovered = false,\n    hoverSelectBanned,\n    isOverlapped = false,\n    removeFunction,\n}) => {\n    const isHighlighted = isSelected || isHovered || false\n    const duration = (timeBlock.end - timeBlock.begin) / 30\n\n    const cssVariables = useMemo(\n        () =>\n            ({\n                \"--tile-width\": `${cellWidth}px`,\n                \"--tile-height\": `${duration * cellHeight - 4}px`,\n            }) as CSSProperties,\n        [cellWidth, cellHeight, duration],\n    )\n\n    return (\n        <TileWrapper\n            style={cssVariables}\n            course_id={lecture.courseId}\n            isHighlighted={isHighlighted}\n            isOverlapped={isOverlapped}\n            hoverSelectBanned={hoverSelectBanned}\n        >\n            {removeFunction !== undefined && (isSelected || isHovered) && (\n                <RemoveButton>\n                    <Icon\n                        size={13}\n                        onClick={(e) => {\n                            e.stopPropagation()\n                            removeFunction(lecture.id)\n                        }}\n                        color=\"rgba(255, 255, 255, 0.6)\"\n                    >\n                        <CloseIcon />\n                    </Icon>\n                </RemoveButton>\n            )}\n            <TitleWrapper isHighlighted={isHighlighted} isOverlapped={isOverlapped}>\n                {lecture.name + lecture.subtitle}\n            </TitleWrapper>\n            <DescWrapper isHighlighted={isHighlighted} isOverlapped={isOverlapped}>\n                {lecture.professors.map((prof) => prof.name).join(\", \")}\n            </DescWrapper>\n            <DescWrapper isHighlighted={isHighlighted} isOverlapped={isOverlapped}>\n                ({timeBlock.buildingCode}) {timeBlock.roomName}\n            </DescWrapper>\n        </TileWrapper>\n    )\n}\n\ntype LectureTileMemoProps = React.ComponentProps<typeof LectureTile>\n\nconst arePropsEqual = (\n    prevProps: Readonly<LectureTileMemoProps>,\n    nextProps: Readonly<LectureTileMemoProps>,\n) => {\n    if (\n        prevProps.cellWidth !== nextProps.cellWidth ||\n        prevProps.cellHeight !== nextProps.cellHeight ||\n        prevProps.isSelected !== nextProps.isSelected ||\n        prevProps.isHovered !== nextProps.isHovered ||\n        prevProps.hoverSelectBanned !== nextProps.hoverSelectBanned ||\n        prevProps.isOverlapped !== nextProps.isOverlapped ||\n        prevProps.removeFunction !== nextProps.removeFunction\n    ) {\n        return false\n    }\n\n    if (\n        prevProps.lecture.courseId !== nextProps.lecture.courseId ||\n        prevProps.lecture.name !== nextProps.lecture.name\n    ) {\n        return false\n    }\n\n    if (prevProps.lecture.professors.length !== nextProps.lecture.professors.length) {\n        return false\n    }\n    if (\n        !prevProps.lecture.professors.every(\n            (prevProf, i) => prevProf.name === nextProps.lecture.professors[i]?.name,\n        )\n    ) {\n        return false\n    }\n\n    if (\n        prevProps.timeBlock.begin !== nextProps.timeBlock.begin ||\n        prevProps.timeBlock.end !== nextProps.timeBlock.end ||\n        prevProps.timeBlock.buildingCode !== nextProps.timeBlock.buildingCode ||\n        prevProps.timeBlock.roomName !== nextProps.timeBlock.roomName\n    ) {\n        return false\n    }\n\n    return true\n}\n\nexport default memo(LectureTile, arePropsEqual)\n","import type { TimeBlock } from \"@/common/schemas/timeblock\"\n\nexport default function checkOverlap(blockA: TimeBlock[], blockB: TimeBlock[]): boolean {\n    for (const a of blockA) {\n        for (const b of blockB) {\n            if (a.day == b.day) {\n                if (a.begin < b.end && b.begin < a.end) {\n                    return true\n                }\n            }\n        }\n    }\n    return false\n}\n","import type { JSX } from \"react\"\n\nimport LectureTile from \"@/common/components/LectureTile\"\nimport { WeekdayEnum } from \"@/common/enum/weekdayEnum\"\nimport type { ClassTime, Lecture } from \"@/common/schemas/lecture\"\nimport checkOverlap from \"@/utils/timetable/checkOverlap\"\n\nconst renderLectureTile = (\n    timetableLectures: Lecture[],\n    cellWidth: number,\n    cellHeight: number,\n    colPadding: number,\n    selected: Lecture | null,\n    setSelected: React.Dispatch<React.SetStateAction<Lecture | null>>,\n    hover: Lecture[] | null,\n    setHover: React.Dispatch<React.SetStateAction<Lecture[] | null>>,\n    dragging: boolean,\n    removeFunction?: (lectureId: number) => void,\n    hoverSelectBanned: boolean = false,\n) => {\n    const rectangles: JSX.Element[] = []\n\n    const lectureSummary = timetableLectures\n        .concat(selected ? [selected] : [])\n        .concat(\n            hover\n                ? selected\n                    ? hover.filter((lec) => lec.id !== selected.id)\n                    : hover\n                : [],\n        )\n\n    // Pre-compute overlap map once: O(n²) total instead of O(n²) per lecture\n    const overlapMap = new Map<number, boolean>()\n    for (const lecture of lectureSummary) {\n        if (overlapMap.has(lecture.id)) continue\n        const isOverlapped = lectureSummary.some(\n            (other) =>\n                other.id !== lecture.id && checkOverlap(other.classes, lecture.classes),\n        )\n        overlapMap.set(lecture.id, isOverlapped)\n    }\n\n    for (let i = 0; i < lectureSummary.length; i++) {\n        const lecture: Lecture = lectureSummary[i] as Lecture\n        const timeBlocks: ClassTime[] = lecture.classes\n        const isSelected = selected === lecture\n        const isHovered = hover !== null && hover.some((lec) => lec.id === lecture.id)\n        const isOverlapped = overlapMap.get(lecture.id) ?? false\n\n        for (let j = 0; j < timeBlocks.length; j++) {\n            const timeBlock = timeBlocks[j]\n            if (!timeBlock) continue\n            const weekDay = timeBlock.day as unknown as WeekdayEnum\n            const left = weekDay * (cellWidth + colPadding)\n            const startIndex = Math.floor(timeBlock.begin / 30) - 16 // 8시부터 시작\n            const top = startIndex * cellHeight\n\n            rectangles.push(\n                <div\n                    style={{\n                        position: \"absolute\",\n                        left: left,\n                        top: top,\n                    }}\n                    key={`${lecture.id}-${j}-${i}`}\n                    onClick={(event: React.MouseEvent) => {\n                        event.stopPropagation()\n                        if (lecture === selected) {\n                            setSelected(null)\n                        } else {\n                            if (lecture !== undefined) {\n                                setSelected(lecture)\n                            }\n                        }\n                    }}\n                    onTouchStart={(event: React.TouchEvent) => {\n                        // Stop propagation to prevent grid's touch handler\n                        event.stopPropagation()\n                    }}\n                    onTouchEnd={(event: React.TouchEvent) => {\n                        event.stopPropagation()\n                        // Handle as click on touch end\n                        if (lecture === selected) {\n                            setSelected(null)\n                        } else {\n                            if (lecture !== undefined) {\n                                setSelected(lecture)\n                            }\n                        }\n                    }}\n                    onMouseEnter={() => {\n                        if (!dragging && lecture !== undefined) {\n                            setHover([lecture])\n                        }\n                    }}\n                    onMouseLeave={() => {\n                        setHover(null)\n                    }}\n                >\n                    <LectureTile\n                        lecture={lecture}\n                        timeBlock={timeBlock}\n                        cellWidth={cellWidth}\n                        isSelected={!hoverSelectBanned && isSelected}\n                        isHovered={!hoverSelectBanned && isHovered}\n                        hoverSelectBanned={hoverSelectBanned}\n                        isOverlapped={isOverlapped}\n                        cellHeight={cellHeight}\n                        removeFunction={\n                            timetableLectures.includes(lecture)\n                                ? removeFunction\n                                : undefined\n                        }\n                    />\n                </div>,\n            )\n        }\n    }\n\n    return rectangles\n}\n\nexport default renderLectureTile\n","import { type ReactElement } from \"react\"\n\nconst calcLeft = (\n    index: number,\n    placeholderIndex: number[],\n    cellWidth: number,\n    placeholderWidth: number,\n    pageStart: number,\n) => {\n    let res: number = 0\n\n    for (let i = 0; i < index; i++) {\n        if (placeholderIndex.includes(i + pageStart)) {\n            res += placeholderWidth\n        } else {\n            res += cellWidth\n        }\n    }\n\n    return res\n}\n\n// 표시할 영역에 대한 정보를 전달 받아 디자인에 맞게 표시\nconst renderTargetArea = (\n    idx: boolean = true,\n    targetArea: Map<number, boolean[]>,\n    color: string,\n    cellHeight: number,\n    cellWidth: number,\n    rowPadding: number,\n    colPadding: number,\n    placeholderIndex: number[],\n    placeholderWidth: number,\n    pageStart: number,\n) => {\n    const rectangles: ReactElement[] = []\n    targetArea.forEach((value, key) => {\n        if (!placeholderIndex.includes(key + pageStart)) {\n            let startIndex: number | null = null\n            value.forEach((val, index) => {\n                if (val == idx) {\n                    // true인 구간 시작\n                    if (startIndex === null) {\n                        startIndex = index\n                    }\n                } else {\n                    if (startIndex !== null) {\n                        const top = startIndex * cellHeight + rowPadding\n                        const left =\n                            calcLeft(\n                                key,\n                                placeholderIndex,\n                                cellWidth,\n                                placeholderWidth,\n                                pageStart,\n                            ) +\n                            colPadding * key\n                        const height = (index - startIndex) * cellHeight - rowPadding * 2\n                        const width = cellWidth\n\n                        rectangles.push(\n                            <div\n                                key={`${key}-${startIndex}`}\n                                style={{\n                                    position: \"absolute\",\n                                    left: left,\n                                    top: top,\n                                    width: width,\n                                    height: height,\n                                    backgroundColor: color,\n                                    pointerEvents: \"none\",\n                                    borderRadius: \"2px\",\n                                    zIndex: idx ? 0 : 1,\n                                }}\n                            />,\n                        )\n                        startIndex = null\n                    }\n                }\n            })\n\n            if (startIndex !== null) {\n                const top = startIndex * cellHeight + rowPadding\n                const left =\n                    calcLeft(\n                        key,\n                        placeholderIndex,\n                        cellWidth,\n                        placeholderWidth,\n                        pageStart,\n                    ) +\n                    colPadding * key\n                const height = (value.length - startIndex) * cellHeight - rowPadding * 2\n                const width = cellWidth\n\n                rectangles.push(\n                    <div\n                        key={`${key}-${startIndex}`}\n                        style={{\n                            position: \"absolute\",\n                            left: left,\n                            top: top,\n                            width: width,\n                            height: height,\n                            zIndex: idx ? 0 : 1,\n                            backgroundColor: color,\n                            pointerEvents: \"none\",\n                            borderRadius: \"2px\",\n                        }}\n                    />,\n                )\n            }\n        }\n    })\n\n    return rectangles\n}\n\nexport default renderTargetArea\n"],"names":["checkAnyOver24","schedule","val","_","timeBlocks","t","__","renderGrid","n","m","cellWidth","cellHeight","colPadding","placeholderIndex","placeholderWidth","pageStart","grid","lastRowIndex","lastColIndex","i","row","isEvenRow","isLastRow","j","isShown","isLastCol","jsx","flattenTimeTableColors","timeTable","c","TileWrapper","styled","theme","course_id","isHighlighted","isOverlapped","flat","hoverSelectBanned","TitleWrapper","DescWrapper","RemoveButton","LectureTile","lecture","timeBlock","isSelected","isHovered","removeFunction","duration","cssVariables","useMemo","jsxs","Icon","e","CloseIcon","prof","arePropsEqual","prevProps","nextProps","prevProf","LectureTile$1","memo","checkOverlap","blockA","blockB","a","b","renderLectureTile","timetableLectures","selected","setSelected","hover","setHover","dragging","rectangles","lectureSummary","lec","overlapMap","other","left","top","event","calcLeft","index","res","renderTargetArea","idx","targetArea","color","rowPadding","value","key","startIndex","height","width"],"mappings":"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"}
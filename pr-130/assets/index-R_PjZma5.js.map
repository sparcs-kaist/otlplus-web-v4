{"version":3,"file":"index-R_PjZma5.js","sources":["../../../app/features/main/sections/TimeTableSection/index.tsx"],"sourcesContent":["import { useEffect, useRef } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport styled from \"@emotion/styled\"\nimport LockIcon from \"@mui/icons-material/Lock\"\nimport { Trans } from \"react-i18next\"\n\nimport LoadingCircle from \"@/common/components/LoadingCircle\"\nimport CustomTimeTableGrid from \"@/common/components/timetable/CustomTimeTableGrid\"\nimport FlexWrapper from \"@/common/primitives/FlexWrapper\"\nimport Icon from \"@/common/primitives/Icon\"\nimport Typography from \"@/common/primitives/Typography\"\nimport { media } from \"@/styles/themes/media\"\nimport { useAPI } from \"@/utils/api/useAPI\"\nimport { handleLogin } from \"@/utils/handleLoginLogout\"\nimport useUserStore from \"@/utils/zustand/useUserStore\"\n\nimport Widget from \"../../../../common/primitives/Widget\"\n\nconst StyledWidget = styled(Widget)`\n    width: 856px;\n    height: 1000px;\n\n    ${media.laptop} {\n        width: 100%;\n    }\n`\n\nconst TimeTableInner = styled(FlexWrapper)`\n    flex-grow: 1;\n    width: 100%;\n`\n\nconst BlurWrapper = styled(FlexWrapper)<{ blur: boolean }>`\n    filter: ${(props) => (props.blur ? \"blur(4px)\" : \"none\")};\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n`\n\nconst LoginWrapper = styled(FlexWrapper)`\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 10;\n`\n\nconst LockIconWrapper = styled.div`\n    width: 50px;\n    height: 50px;\n    border-radius: 100%;\n    border: 2px solid ${({ theme }) => theme.colors.Highlight.default};\n    padding: 8px;\n`\n\nconst LoginButton = styled.div`\n    padding: 8px 20px;\n    border-radius: 20px;\n    background-color: ${({ theme }) => theme.colors.Highlight.default};\n    cursor: pointer;\n    user-select: none;\n`\n\nconst TimeTableSection = () => {\n    const theme = useTheme()\n    const { user, status } = useUserStore()\n\n    const totalRef = useRef<HTMLDivElement>(null)\n\n    const { query: myTimetable, setParams: setMyTimetableParams } = useAPI(\n        \"GET\",\n        \"/timetables/my-timetable\",\n        {\n            enabled: status === \"success\",\n        },\n    )\n    const { query: semesters } = useAPI(\"GET\", \"/semesters\")\n\n    useEffect(() => {\n        if (semesters.data && semesters.data.semesters.length > 0) {\n            const latestSemester =\n                semesters.data.semesters[semesters.data.semesters.length - 1]\n            if (!latestSemester) return\n            setMyTimetableParams({\n                year: latestSemester.year,\n                semester: latestSemester.semester,\n            } as never)\n        }\n    }, [semesters.data, setMyTimetableParams])\n\n    const lectures = myTimetable.data?.lectures ?? []\n\n    return (\n        <StyledWidget direction=\"column\" gap={0} padding=\"30px\" flex=\"1 1 auto\">\n            {status === \"loading\" ? (\n                <LoadingCircle />\n            ) : (\n                <TimeTableInner\n                    direction=\"column\"\n                    align=\"stretch\"\n                    gap={16}\n                    ref={totalRef}\n                >\n                    {status === \"idle\" ? (\n                        <LoginWrapper direction=\"column\" gap={12} align=\"center\">\n                            <LockIconWrapper>\n                                <Icon size={30} color={theme.colors.Highlight.default}>\n                                    <LockIcon />\n                                </Icon>\n                            </LockIconWrapper>\n                            <LoginButton onClick={handleLogin}>\n                                <Typography type=\"BigBold\" style={{ color: \"#FFFFFF\" }}>\n                                    로그인하러가기\n                                </Typography>\n                            </LoginButton>\n                        </LoginWrapper>\n                    ) : (\n                        <FlexWrapper direction=\"row\" gap={0}>\n                            <Trans\n                                i18nKey=\"main.hisTimeTable\"\n                                values={{ name: user?.name }}\n                                components={{\n                                    name: (\n                                        <Typography\n                                            type=\"BiggerBold\"\n                                            color=\"Highlight.default\"\n                                            children={undefined}\n                                        />\n                                    ),\n                                    normal: (\n                                        <Typography\n                                            type=\"BiggerBold\"\n                                            color=\"Text.dark\"\n                                            children={undefined}\n                                        />\n                                    ),\n                                    space: <>&nbsp;</>,\n                                }}\n                            />\n                        </FlexWrapper>\n                    )}\n                    <BlurWrapper\n                        blur={status === \"idle\"}\n                        direction=\"column\"\n                        gap={0}\n                        align=\"stretch\"\n                    >\n                        <CustomTimeTableGrid\n                            lectures={lectures}\n                            needLectureDeletable={false}\n                            needTimeFilter={false}\n                            needLectureInteraction={false}\n                        />\n                    </BlurWrapper>\n                </TimeTableInner>\n            )}\n        </StyledWidget>\n    )\n}\n\nexport default TimeTableSection\n"],"names":["StyledWidget","styled","Widget","media","TimeTableInner","FlexWrapper","BlurWrapper","props","LoginWrapper","LockIconWrapper","theme","LoginButton","TimeTableSection","useTheme","user","status","useUserStore","totalRef","useRef","myTimetable","setMyTimetableParams","useAPI","semesters","useEffect","latestSemester","lectures","jsx","LoadingCircle","jsxs","Icon","LockIcon","handleLogin","Typography","Trans","CustomTimeTableGrid"],"mappings":"swCAmBA,MAAMA,EAAeC,EAAOC,CAAM;AAAA;AAAA;AAAA;AAAA,MAI5BC,EAAM,MAAM;AAAA;AAAA;AAAA,EAKZC,EAAiBH,EAAOI,CAAW;AAAA;AAAA;AAAA,EAKnCC,EAAcL,EAAOI,CAAW;AAAA,cACvBE,GAAWA,EAAM,KAAO,YAAc,MAAO;AAAA;AAAA;AAAA;AAAA,EAMtDC,EAAeP,EAAOI,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQjCI,EAAkBR,EAAO;AAAA;AAAA;AAAA;AAAA,wBAIP,CAAC,CAAE,MAAAS,CAAA,IAAYA,EAAM,OAAO,UAAU,OAAO;AAAA;AAAA,EAI/DC,EAAcV,EAAO;AAAA;AAAA;AAAA,wBAGH,CAAC,CAAE,MAAAS,CAAA,IAAYA,EAAM,OAAO,UAAU,OAAO;AAAA;AAAA;AAAA,EAK/DE,EAAmB,IAAM,CAC3B,MAAMF,EAAQG,EAAA,EACR,CAAE,KAAAC,EAAM,OAAAC,CAAA,EAAWC,EAAA,EAEnBC,EAAWC,EAAAA,OAAuB,IAAI,EAEtC,CAAE,MAAOC,EAAa,UAAWC,GAAyBC,EAC5D,MACA,2BACA,CACI,QAASN,IAAW,SAAA,CACxB,EAEE,CAAE,MAAOO,CAAA,EAAcD,EAAO,MAAO,YAAY,EAEvDE,EAAAA,UAAU,IAAM,CACZ,GAAID,EAAU,MAAQA,EAAU,KAAK,UAAU,OAAS,EAAG,CACvD,MAAME,EACFF,EAAU,KAAK,UAAUA,EAAU,KAAK,UAAU,OAAS,CAAC,EAChE,GAAI,CAACE,EAAgB,OACrBJ,EAAqB,CACjB,KAAMI,EAAe,KACrB,SAAUA,EAAe,QAAA,CACnB,CACd,CACJ,EAAG,CAACF,EAAU,KAAMF,CAAoB,CAAC,EAEzC,MAAMK,EAAWN,EAAY,MAAM,UAAY,CAAA,EAE/C,OACIO,EAAC1B,EAAA,CAAa,UAAU,SAAS,IAAK,EAAG,QAAQ,OAAO,KAAK,WACxD,SAAAe,IAAW,UACRW,EAACC,IAAc,EAEfC,EAACxB,EAAA,CACG,UAAU,SACV,MAAM,UACN,IAAK,GACL,IAAKa,EAEJ,SAAA,CAAAF,IAAW,SACPP,EAAA,CAAa,UAAU,SAAS,IAAK,GAAI,MAAM,SAC5C,SAAA,CAAAkB,EAACjB,EAAA,CACG,SAAAiB,EAACG,EAAA,CAAK,KAAM,GAAI,MAAOnB,EAAM,OAAO,UAAU,QAC1C,SAAAgB,EAACI,EAAA,CAAA,CAAS,EACd,EACJ,EACAJ,EAACf,EAAA,CAAY,QAASoB,EAClB,WAACC,EAAA,CAAW,KAAK,UAAU,MAAO,CAAE,MAAO,SAAA,EAAa,mBAExD,CAAA,CACJ,CAAA,EACJ,EAEAN,EAACrB,EAAA,CAAY,UAAU,MAAM,IAAK,EAC9B,SAAAqB,EAACO,EAAA,CACG,QAAQ,oBACR,OAAQ,CAAE,KAAMnB,GAAM,IAAA,EACtB,WAAY,CACR,KACIY,EAACM,EAAA,CACG,KAAK,aACL,MAAM,oBACN,SAAU,MAAA,CAAA,EAGlB,OACIN,EAACM,EAAA,CACG,KAAK,aACL,MAAM,YACN,SAAU,MAAA,CAAA,EAGlB,WAAS,SAAA,GAAA,CAAM,CAAA,CACnB,CAAA,EAER,EAEJN,EAACpB,EAAA,CACG,KAAMS,IAAW,OACjB,UAAU,SACV,IAAK,EACL,MAAM,UAEN,SAAAW,EAACQ,EAAA,CACG,SAAAT,EACA,qBAAsB,GACtB,eAAgB,GAChB,uBAAwB,EAAA,CAAA,CAC5B,CAAA,CACJ,CAAA,CAAA,EAGZ,CAER"}
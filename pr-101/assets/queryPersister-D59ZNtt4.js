(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"49f485c9d7c342c7f1c8a17d8538fd3d0fe30d46"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="49c807e4-f723-4dbe-9d9b-6f117311a8ec",e._sentryDebugIdIdentifier="sentry-dbid-49c807e4-f723-4dbe-9d9b-6f117311a8ec")})()}catch{}function o(e){return new Promise((n,t)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>t(e.error)})}function u(e,n){let t;const i=()=>{if(t)return t;const r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(n),t=o(r),t.then(d=>{d.onclose=()=>t=void 0},()=>{}),t};return(r,d)=>i().then(s=>d(s.transaction(n,r).objectStore(n)))}let c;function f(){return c||(c=u("keyval-store","keyval")),c}function l(e,n=f()){return n("readonly",t=>o(t.get(e)))}function y(e,n,t=f()){return t("readwrite",i=>(i.put(n,e),o(i.transaction)))}function b(e,n=f()){return n("readwrite",t=>(t.delete(e),o(t.transaction)))}const a="otlplus-query-cache";function p(e){return JSON.stringify(e)}function g(e){return JSON.parse(e)}function w(){return{persistClient:async e=>{const n=p(e);await y(a,n)},restoreClient:async()=>{const e=await l(a);if(e)return g(e)},removeClient:async()=>{await b(a)}}}const h=w();async function S(){await h.removeClient()}export{S as c,h as i};
//# sourceMappingURL=queryPersister-D59ZNtt4.js.map

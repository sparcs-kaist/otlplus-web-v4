import{a as o,j as d,F as c,n as j}from"./FlexWrapper-C0dsngQo.js";import{a,L as B}from"./chunk-UIGDSWPH-NakEPbl8.js";import{k as M,u as E,A as I}from"./useIsDevice-BgbEVEMy.js";import{T as g}from"./Typography-DTsae4U-.js";import{W as L}from"./Widget-D7VP5HFl.js";import{T as b}from"./Trans-DYjdxKFe.js";import"./jsx-runtime-u17CrQMm.js";const v=j(B)`
    color: ${({theme:e})=>e.colors.Highlight.default};
    text-decoration: none;
    font-size: ${({theme:e})=>e.fonts.NormalBold.fontSize}px;
    font-weight: ${({theme:e})=>e.fonts.NormalBold.fontWeight};

    &:hover {
        color: ${({theme:e})=>e.colors.Highlight.dark};
    }
`;function H(){const{query:e}=M("GET","/semesters"),[u,T]=a.useState(new Date),[$,x]=a.useState(""),[f,k]=a.useState(null),[h,p]=a.useState(""),[i,S]=a.useState(null),{t:l}=E();a.useEffect(()=>{const r=setInterval(()=>T(new Date),1e3);return()=>clearInterval(r)},[]),a.useEffect(()=>{if(!e.data?.semesters)return;const r=e.data.semesters[e.data.semesters.length-1];if(!r)return;k({year:r.year,semester:r.semester});const m=Object.entries(r).filter(([t,n])=>t!=="year"&&t!=="semester"&&n!==null).map(([t,n])=>[t,new Date(n)]).sort((t,n)=>t[1].getTime()-n[1].getTime());for(const[t,n]of m)if(u.getTime()<=n.getTime()){p(t),S(n);return}const s=m[m.length-1];s&&(p(s[0]),S(s[1]))},[e.data]),a.useEffect(()=>{if(!i)return;const r=i.getTime()-u.getTime(),m=r<0,s=Math.abs(r),t=Math.floor(s/(1e3*60*60*24)),n=Math.floor(s/(1e3*60*60)%24),w=Math.floor(s/(1e3*60)%60),D=Math.floor(s/1e3%60);x(`D${m?"+":"-"}${t} ${n}${l("common.hours")} ${w}${l("common.minutes")} ${D}${l("common.seconds")}`)},[u,i]);function y(){return f?f.year.toString()+" "+I(f.semester)+" "+l(`main.schedule.contents.${h}`):l(`main.schedule.contents.${h}`)}return i?o(L,{direction:"column",align:"stretch",gap:0,padding:"23px 30px",children:d(c,{direction:"column",align:"stretch",gap:16,children:[d(c,{direction:"column",align:"center",gap:10,children:[d(c,{direction:"column",align:"stretch",gap:0,children:[o(c,{direction:"row",justify:"center",gap:0,children:o(g,{type:"BiggerBold",color:"Text.dark",children:o(b,{i18nKey:"main.schedule.title",values:{content:y()}})})}),o(c,{direction:"row",justify:"center",gap:0,children:o(g,{type:"BiggerBold",color:"Text.dark",children:$})})]}),o(c,{direction:"column",gap:0,children:d(g,{type:"Normal",color:"Text.placeholder",children:[y()," ",i.getFullYear(),".",String(i.getMonth()+1).padStart(2,"0"),".",String(i.getDate()).padStart(2,"0")]})})]}),o(c,{direction:"column",align:"flex-end",gap:0,children:o(v,{to:"https://erp.kaist.ac.kr",target:"_blank",children:l("main.schedule.link")})})]})}):null}export{H as default};
